# 배포 체크리스트

SQL 마이그레이션 프로젝트 배포를 위한 종합 체크리스트

**버전**: v2.0.0-sql-migration
**날짜**: 2025-01-10

---

## 📋 배포 전 검증

### 1. 코드 검증

- [ ] **Git 상태 확인**
  ```bash
  git status  # 모든 변경사항 커밋 확인
  git log --oneline -10  # 커밋 히스토리 확인
  ```

- [ ] **브랜치 상태 확인**
  ```bash
  git branch  # 현재 브랜치 확인
  # feature/sql-migration 브랜치에 있어야 함
  ```

- [ ] **빌드 성공 확인**
  ```bash
  npm run build  # 프로덕션 빌드
  # "Compiled successfully" 메시지 확인
  ```

- [ ] **TypeScript 타입 체크**
  ```bash
  npm run type-check  # 타입 오류 없음 확인
  ```

- [ ] **린트 검사**
  ```bash
  npm run lint  # 코드 스타일 확인
  ```

---

### 2. 데이터베이스 검증

- [ ] **스키마 검증**
  ```bash
  node scripts/validate-database.js
  # 모든 체크 통과 확인
  ```

- [ ] **테이블 구조 확인**
  - clients (8개 필드 + 타임스탬프)
  - estimates (10개 필드 + 타임스탬프)
  - estimate_items (9개 필드)
  - invoices (9개 필드 + 타임스탬프)
  - invoice_items (13개 필드)
  - work_items (16개 필드 + 타임스탬프)
  - company_info (10개 필드 + 타임스탬프)

- [ ] **인덱스 확인**
  - 단일 인덱스: 15개 이상
  - 복합 인덱스: 6개 (성능 최적화)

- [ ] **외래 키 제약조건**
  - estimates → clients
  - invoices → clients
  - work_items → clients
  - estimate_items → estimates
  - invoice_items → invoices

---

### 3. 기능 테스트

#### 3.1 건축주 관리
- [ ] 건축주 추가 (개인/사업자)
- [ ] 건축주 수정
- [ ] 건축주 삭제
- [ ] 건축주 검색

#### 3.2 견적서 관리
- [ ] 견적서 생성 (항목 포함)
- [ ] 견적서 조회 (상세)
- [ ] 견적서 수정
- [ ] 견적서 삭제
- [ ] 견적서 필터링 (상태, 날짜)
- [ ] 견적서 통계

#### 3.3 청구서 관리
- [ ] 청구서 생성 (항목 포함)
- [ ] 청구서 조회 (상세)
- [ ] 청구서 수정
- [ ] 청구서 삭제
- [ ] 청구서 필터링 (상태, 날짜)
- [ ] 청구서 통계

#### 3.4 작업 항목 관리
- [ ] 작업 항목 추가
- [ ] 작업 항목 수정
- [ ] 작업 항목 삭제
- [ ] 작업 항목 상태 변경
- [ ] 완료된 작업 조회

#### 3.5 마이그레이션 UI
- [ ] 데이터 통계 표시
- [ ] 데이터 검증 기능
- [ ] 백업 생성 기능
- [ ] 마이그레이션 실행
- [ ] 진행 상태 표시
- [ ] 오류 처리

---

### 4. 성능 테스트

- [ ] **로딩 속도**
  - 앱 시작: < 3초
  - 페이지 전환: < 1초
  - 데이터 로딩: < 2초

- [ ] **쿼리 성능**
  - 단순 조회: < 50ms
  - JOIN 쿼리: < 100ms
  - 통계 집계: < 200ms

- [ ] **대용량 데이터**
  - 100개 데이터: 정상 작동
  - 1,000개 데이터: 정상 작동
  - 10,000개 데이터: 테스트 (선택)

---

### 5. 안정성 테스트

- [ ] **데이터 지속성**
  - 앱 재시작 후 데이터 유지
  - 강제 종료 후 데이터 복구

- [ ] **오류 처리**
  - 잘못된 입력 처리
  - 네트워크 오류 처리
  - 데이터베이스 잠금 처리

- [ ] **동시성**
  - 여러 창에서 동시 수정
  - 트랜잭션 충돌 처리

---

## 💾 데이터 안전

### 백업 체크리스트

- [ ] **IndexedDB 백업 생성**
  - 마이그레이션 UI에서 백업 버튼 클릭
  - localStorage에 백업 저장 확인

- [ ] **SQLite 백업 생성**
  ```bash
  # 데이터베이스 파일 복사
  cp ~/Library/Application\ Support/construction-management-installer/cms.db \
     ~/Desktop/cms-backup-$(date +%Y%m%d).db
  ```

- [ ] **백업 파일 검증**
  ```bash
  node scripts/validate-database.js ~/Desktop/cms-backup-YYYYMMDD.db
  ```

- [ ] **백업 파일 보관**
  - 로컬 저장: ~/Desktop/backups/
  - 클라우드 저장: iCloud, Google Drive 등
  - 최소 3개 버전 보관

---

## 📚 문서화

### 문서 체크리스트

- [ ] **CHANGELOG.md 업데이트**
  - 새로운 기능 목록
  - 수정된 버그 목록
  - 주요 변경사항
  - 마이그레이션 안내

- [ ] **README.md 업데이트**
  - 버전 정보 업데이트
  - 새 기능 설명
  - 설치 방법 업데이트

- [ ] **사용자 가이드 작성**
  - 마이그레이션 절차
  - 백업/복원 방법
  - 문제 해결 가이드

- [ ] **개발자 문서**
  - API 문서 업데이트
  - 데이터베이스 스키마 문서
  - 아키텍처 다이어그램

---

## 🚀 배포 실행

### 배포 프로세스

- [ ] **1단계: 최종 커밋**
  ```bash
  git add .
  git commit -m "chore: prepare for v2.0.0 release"
  ```

- [ ] **2단계: 버전 태깅**
  ```bash
  git tag v2.0.0-sql-migration
  git push origin feature/sql-migration
  git push origin v2.0.0-sql-migration
  ```

- [ ] **3단계: 프로덕션 빌드**
  ```bash
  npm run build
  # 빌드 성공 확인
  ```

- [ ] **4단계: Electron 패키징** (선택)
  ```bash
  npm run electron:build
  # dist/ 폴더에 앱 생성 확인
  ```

- [ ] **5단계: 배포 파일 확인**
  - build/ 폴더: 웹 버전
  - dist/ 폴더: Electron 앱
  - 파일 크기 확인
  - 실행 테스트

---

## 📢 사용자 알림

### 알림 체크리스트

- [ ] **업데이트 공지 작성**
  - 새 기능 하이라이트
  - 마이그레이션 필요성 설명
  - 예상 소요 시간 안내

- [ ] **마이그레이션 가이드 공유**
  - 단계별 절차
  - 스크린샷 포함
  - 비디오 튜토리얼 (선택)

- [ ] **백업 권장 안내**
  - 백업 중요성 강조
  - 백업 방법 설명
  - 복원 방법 안내

- [ ] **지원 채널 안내**
  - 문제 발생 시 연락처
  - FAQ 페이지
  - 이슈 트래커

---

## ⚠️ 롤백 준비

### 롤백 체크리스트

- [ ] **이전 버전 보관**
  - 현재 프로덕션 버전 백업
  - 설치 파일 보관
  - 데이터베이스 백업

- [ ] **롤백 스크립트 준비**
  - 데이터 복원 스크립트
  - 버전 다운그레이드 스크립트
  - 테스트 완료

- [ ] **롤백 시나리오 문서화**
  - 시나리오 1: 마이그레이션 실패
  - 시나리오 2: 데이터 손상
  - 시나리오 3: 성능 문제

- [ ] **롤백 테스트**
  - 테스트 환경에서 롤백 실행
  - 데이터 복원 검증
  - 앱 정상 작동 확인

---

## ✅ 최종 확인

### 배포 승인 체크리스트

- [ ] **모든 테스트 통과**
  - 단위 테스트
  - 통합 테스트
  - 수동 테스트

- [ ] **성능 기준 충족**
  - 로딩 속도
  - 쿼리 성능
  - 메모리 사용량

- [ ] **보안 검토**
  - SQL 인젝션 방지
  - 데이터 암호화
  - 권한 관리

- [ ] **팀 승인**
  - 개발팀 리뷰
  - QA 승인
  - 프로덕트 오너 승인

---

## 📊 배포 후 모니터링

### 모니터링 체크리스트

- [ ] **사용자 피드백 수집**
  - 마이그레이션 성공률
  - 오류 보고서
  - 성능 문제

- [ ] **시스템 메트릭**
  - 앱 크래시 레이트
  - 평균 응답 시간
  - 데이터베이스 크기

- [ ] **일일 체크**
  - 첫 3일: 하루 2회 확인
  - 첫 주: 하루 1회 확인
  - 이후: 주 1회 확인

---

## 📝 배포 완료 보고

### 완료 보고서 작성

- [ ] **배포 일시**: ____________
- [ ] **배포 버전**: v2.0.0-sql-migration
- [ ] **배포자**: ____________
- [ ] **이슈 발견**: ____________
- [ ] **해결 방법**: ____________
- [ ] **다음 액션**: ____________

---

**최종 점검일**: ____________
**점검자**: ____________
**승인자**: ____________

---

*이 체크리스트는 안전한 배포를 위한 가이드입니다. 모든 항목을 확인한 후 배포를 진행하세요.*
