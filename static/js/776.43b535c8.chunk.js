"use strict";(self.webpackChunkconstruction_management_frontend=self.webpackChunkconstruction_management_frontend||[]).push([[776],{8776:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var a=r(6601),s=r(9198),d=r(3515),i=r(1129),l=r(1415),n=r(109),c=r(6696),x=r(2930),o=r(5582);const p=(0,a.FZ)(()=>(0,o.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 dark:border-indigo-400"}),(0,o.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"\ub85c\ub529 \uc911..."})]})}),{name:"AdminApproval_1"}),g=(0,a.FZ)(e=>(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-8",children:"\uc0ac\uc6a9\uc790 \uc2b9\uc778 \uad00\ub9ac"}),(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsxs)("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center",children:[e.v0,"\uc2b9\uc778 \ub300\uae30 \uc911 (",e.v1,")"]}),e.v2]}),(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsxs)("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center",children:[e.v3,"\uc2b9\uc778 \uc644\ub8cc (",e.v4,")"]}),e.v5]}),e.v6]}),{name:"AdminApproval_2",portals:["v0","v1","v2","v3","v4","v5","v6"]}),m=()=>{const e=(0,n.Zp)(),{isAdmin:t}=(0,c.Jd)(),[r,a]=(0,s.useState)([]),[m,u]=(0,s.useState)(!0),[h,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{t||e("/",{replace:!0})},[t,e]);const f=async()=>{if(null!==x.supabase)try{console.log("\ud83d\udd35 [AdminApproval] Fetching user approvals...");const{data:e,error:t}=await x.supabase.from("user_approvals").select("*").order("created_at",{ascending:!1});if(console.log("\ud83d\udd35 [AdminApproval] Query result:",{data:e,error:t}),null!==t)return console.error("\u274c [AdminApproval] Error fetching users:",t),void alert("\uc0ac\uc6a9\uc790 \ubaa9\ub85d \ub85c\ub529 \uc2e4\ud328: ".concat(t.message));null!==e&&(console.log("\u2705 [AdminApproval] Successfully loaded users:",e.length,"users"),a(e))}catch(e){console.error("\u274c [AdminApproval] Exception:",e),alert("\uc0ac\uc6a9\uc790 \ubaa9\ub85d \ub85c\ub529 \uc911 \uc608\uc678 \ubc1c\uc0dd")}finally{u(!1)}else console.error("\u274c [AdminApproval] Supabase is null")};(0,s.useEffect)(()=>{f()},[]);const v=async e=>{if(null!==x.supabase&&window.confirm("\uc2b9\uc778 \uae30\ub85d\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")){y(e);try{const{error:t}=await x.supabase.from("user_approvals").delete().eq("user_id",e);if(null!==t)return void alert("\uc0ad\uc81c \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");await f(),alert("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(t){alert("\uc0ad\uc81c \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(null)}}};if(!t)return null;if(m)return(0,o.jsx)(p,{});const w=r.filter(e=>"pending"===e.status),k=r.filter(e=>"approved"===e.status),b=r.filter(e=>"rejected"===e.status);return(0,o.jsx)(g,{v0:(0,o.jsx)(i.A,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400 mr-2"}),v1:w.length,v2:0===w.length?(0,o.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"\ub300\uae30 \uc911\uc778 \uc0ac\uc6a9\uc790\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,o.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,o.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uc774\uba54\uc77c"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\ub85c\uadf8\uc778 \ubc29\uc2dd"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\ub4f1\ub85d\uc77c"}),(0,o.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uc791\uc5c5"})]})}),(0,o.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.email}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:"google"===e.provider?"Google":"kakao"===e.provider?"Kakao":e.provider}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.created_at).toLocaleString("ko-KR")}),(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,o.jsxs)("button",{onClick:()=>{(async e=>{if(null!==x.supabase){y(e);try{const{error:t}=await x.supabase.from("user_approvals").update({status:"approved",approved_at:(new Date).toISOString()}).eq("user_id",e);if(null!==t)return void alert("\uc2b9\uc778 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");await f(),alert("\uc2b9\uc778\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")}catch(t){alert("\uc2b9\uc778 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(null)}}})(e.user_id)},disabled:h===e.user_id,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 mr-2 disabled:opacity-50",children:[(0,o.jsx)(d.A,{className:"h-4 w-4 mr-1"}),"\uc2b9\uc778"]}),(0,o.jsxs)("button",{onClick:()=>{(async e=>{if(null!==x.supabase&&window.confirm("\uc815\ub9d0 \uac70\ubd80\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){y(e);try{const{error:t}=await x.supabase.from("user_approvals").update({status:"rejected",rejected_at:(new Date).toISOString()}).eq("user_id",e);if(null!==t)return void alert("\uac70\ubd80 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");await f(),alert("\uac70\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(t){alert("\uac70\ubd80 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(null)}}})(e.user_id)},disabled:h===e.user_id,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:[(0,o.jsx)(l.A,{className:"h-4 w-4 mr-1"}),"\uac70\ubd80"]})]})]},e.id))})]})}),v3:(0,o.jsx)(d.A,{className:"h-6 w-6 text-green-600 dark:text-green-400 mr-2"}),v4:k.length,v5:0===k.length?(0,o.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"\uc2b9\uc778\ub41c \uc0ac\uc6a9\uc790\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,o.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,o.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uc774\uba54\uc77c"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\ub85c\uadf8\uc778 \ubc29\uc2dd"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uc2b9\uc778\uc77c"}),(0,o.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uc791\uc5c5"})]})}),(0,o.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:k.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.email}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:"google"===e.provider?"Google":"kakao"===e.provider?"Kakao":e.provider}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:null!==e.approved_at?new Date(e.approved_at).toLocaleString("ko-KR"):"-"}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,o.jsxs)("button",{onClick:()=>{v(e.user_id)},disabled:h===e.user_id,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:[(0,o.jsx)(l.A,{className:"h-4 w-4 mr-1"}),"\uc0ad\uc81c"]})})]},e.id))})]})}),v6:b.length>0&&(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsxs)("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center",children:[(0,o.jsx)(l.A,{className:"h-6 w-6 text-red-600 dark:text-red-400 mr-2"}),"\uac70\ubd80\ub428 (",b.length,")"]}),(0,o.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,o.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uc774\uba54\uc77c"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\ub85c\uadf8\uc778 \ubc29\uc2dd"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uac70\ubd80\uc77c"}),(0,o.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uc791\uc5c5"})]})}),(0,o.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.email}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:"google"===e.provider?"Google":"kakao"===e.provider?"Kakao":e.provider}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:null!==e.rejected_at?new Date(e.rejected_at).toLocaleString("ko-KR"):"-"}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,o.jsxs)("button",{onClick:()=>{v(e.user_id)},disabled:h===e.user_id,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:[(0,o.jsx)(l.A,{className:"h-4 w-4 mr-1"}),"\uc0ad\uc81c"]})})]},e.id))})]})})]})})}}}]);
//# sourceMappingURL=776.43b535c8.chunk.js.map