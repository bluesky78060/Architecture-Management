"use strict";(self.webpackChunkconstruction_management_frontend=self.webpackChunkconstruction_management_frontend||[]).push([[217,288],{217:(e,r,a)=>{a.r(r),a.d(r,{default:()=>x});var t=a(2555),n=a(6601),s=a(9198),l=a(5826),d=a(1288),i=a(6520),o=a(5582);const c=(0,n.FZ)(e=>(0,o.jsxs)("slot",{children:[(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"\ud658\uacbd\uc124\uc815"}),(0,o.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"\uac74\ucd95\uc5c5\uccb4 \uc815\ubcf4\uc640 \uc2dc\uc2a4\ud15c \uc124\uc815\uc744 \uad00\ub9ac\ud558\uc138\uc694"})]}),(0,o.jsxs)("div",{className:"flex flex-col lg:flex-row lg:flex-wrap gap-8 mb-8",children:[(0,o.jsxs)("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-lg shadow flex flex-col",children:[(0,o.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600 flex justify-between items-center bg-gray-50 dark:bg-gray-700",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"\uc5c5\uccb4 \uc815\ubcf4 \uad00\ub9ac"}),e.v0]}),(0,o.jsxs)("div",{className:"p-6 flex-1",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"company-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc5c5\uccb4\uba85 *"}),e.v1]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"company-business-number",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc0ac\uc5c5\uc790\ub4f1\ub85d\ubc88\ud638 *"}),e.v2]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"company-representative",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\ub300\ud45c\uc790\uba85 *"}),e.v3]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"company-phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc804\ud654\ubc88\ud638 *"}),e.v4]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"company-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc774\uba54\uc77c"}),e.v5]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"company-address",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc8fc\uc18c *"}),e.v6]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"company-bank-account",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uacc4\uc88c\ubc88\ud638"}),e.v7]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"company-account-holder",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc608\uae08\uc8fc\uba85"}),e.v8]})]})]}),(0,o.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:(0,o.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"\uc5ec\uae30\uc11c \uc124\uc815\ud55c \uc815\ubcf4\ub294 \uc0dd\uc131\ub418\ub294 \ubaa8\ub4e0 \uccad\uad6c\uc11c/\uacac\uc801\uc11c\uc5d0 \uc790\ub3d9\uc73c\ub85c \ud3ec\ud568\ub429\ub2c8\ub2e4. \uc815\ud655\ud55c \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."})})]})]}),(0,o.jsxs)("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-lg shadow flex flex-col",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",children:(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"\uc2dc\uc2a4\ud15c \uc124\uc815"})}),(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"\ub2e8\uc704 \uad00\ub9ac"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{value:e.v9,onChange:e.v10,placeholder:"\uc0c8 \ub2e8\uc704 \uc785\ub825",className:"border border-gray-300 dark:border-gray-600 rounded px-3 py-2 text-sm flex-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),(0,o.jsx)("button",{onClick:e.v11,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded text-sm",children:"\ucd94\uac00"})]}),(0,o.jsx)("div",{className:"mt-2 flex gap-2 flex-wrap",children:e.v12})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"\uce74\ud14c\uace0\ub9ac \uad00\ub9ac"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{value:e.v13,onChange:e.v14,placeholder:"\uc0c8 \uce74\ud14c\uace0\ub9ac \uc785\ub825",className:"border border-gray-300 dark:border-gray-600 rounded px-3 py-2 text-sm flex-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),(0,o.jsx)("button",{onClick:e.v15,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded text-sm",children:"\ucd94\uac00"})]}),(0,o.jsx)("div",{className:"mt-2 flex gap-2 flex-wrap",children:e.v16})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"\ub3c4\uc7a5 \uc774\ubbf8\uc9c0"}),e.v17,(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,o.jsx)("button",{onClick:e.v18,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded text-sm font-medium transition-colors",children:"\ud83d\udcf7 \uc774\ubbf8\uc9c0 \uc120\ud0dd"}),e.v19]}),(0,o.jsx)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-700",children:e.v20}),(0,o.jsxs)("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["\ud83d\udca1 ",(0,o.jsx)("strong",{children:"\ud301:"})," \ud22c\uba85 \ubc30\uacbd\uc758 PNG \ud30c\uc77c\uc744 \uc0ac\uc6a9\ud558\uba74 \ub354 \uae54\ub054\ud558\uac8c \ud45c\uc2dc\ub429\ub2c8\ub2e4"]})]})]})]})]})]}),e.v21,e.v22,e.v23]}),{name:"CompanyInfo_1",portals:["v0","v1","v2","v3","v4","v5","v6","v7","v8","v12","v16","v17","v19","v20","v21","v22","v23"]}),x=function(){var e,r,a,n,x,g,m,u,y,b;const{companyInfo:v,setCompanyInfo:p,units:h,setUnits:w,categories:k,setCategories:f,stampImage:j,setStampImage:N}=(0,l.n)(),[C,S]=(0,s.useState)(!1),[F,P]=(0,s.useState)((0,t.A)({},v)),[A,D]=(0,s.useState)(""),[I,H]=(0,s.useState)(""),B=(0,s.useRef)(null),[T,q]=(0,s.useState)(null),[G,L]=(0,s.useState)(null),[_,M]=(0,s.useState)(!1),R=e=>{const{name:r,value:a}=e.target;P(e=>(0,t.A)((0,t.A)({},e),{},{[r]:a}))};return(0,o.jsx)(c,{v0:C?(0,o.jsxs)("div",{className:"space-x-2",children:[(0,o.jsx)("button",{onClick:()=>{p(F),S(!1),alert("\uac74\ucd95\uc5c5\uccb4 \uc815\ubcf4\uac00 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")},className:"bg-green-600 hover:bg-green-700 text-white text-sm font-medium py-1.5 px-3 rounded",children:"\uc800\uc7a5"}),(0,o.jsx)("button",{onClick:()=>{P((0,t.A)({},v)),S(!1)},className:"bg-gray-500 hover:bg-gray-600 text-white text-sm font-medium py-1.5 px-3 rounded",children:"\ucde8\uc18c"})]}):(0,o.jsx)("button",{onClick:()=>S(!0),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-1.5 px-3 rounded",children:"\uc218\uc815"}),v1:C?(0,o.jsx)("input",{id:"company-name",type:"text",name:"name",value:F.name,onChange:R,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:!0}):(0,o.jsx)("p",{className:"text-gray-900 dark:text-gray-100 py-2",children:v.name}),v2:C?(0,o.jsx)("input",{id:"company-business-number",type:"text",name:"businessNumber",value:null!==(e=F.businessNumber)&&void 0!==e?e:"",onChange:R,placeholder:"000-00-00000",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:!0}):(0,o.jsx)("p",{className:"text-gray-900 dark:text-gray-100 py-2",children:v.businessNumber}),v3:C?(0,o.jsx)("input",{id:"company-representative",type:"text",name:"representative",value:null!==(r=F.representative)&&void 0!==r?r:"",onChange:R,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:!0}):(0,o.jsx)("p",{className:"text-gray-900 dark:text-gray-100 py-2",children:v.representative}),v4:C?(0,o.jsx)("input",{id:"company-phone",type:"tel",name:"phone",value:null!==(a=F.phone)&&void 0!==a?a:"",onChange:R,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:!0}):(0,o.jsx)("p",{className:"text-gray-900 dark:text-gray-100 py-2",children:v.phone}),v5:C?(0,o.jsx)("input",{id:"company-email",type:"email",name:"email",value:null!==(n=F.email)&&void 0!==n?n:"",onChange:R,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}):(0,o.jsx)("p",{className:"text-gray-900 dark:text-gray-100 py-2",children:null!==(x=v.email)&&void 0!==x?x:"-"}),v6:C?(0,o.jsx)("input",{id:"company-address",type:"text",name:"address",value:null!==(g=F.address)&&void 0!==g?g:"",onChange:R,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:!0}):(0,o.jsx)("p",{className:"text-gray-900 dark:text-gray-100 py-2",children:v.address}),v7:C?(0,o.jsx)("input",{id:"company-bank-account",type:"text",name:"bankAccount",value:null!==(m=F.bankAccount)&&void 0!==m?m:"",onChange:R,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}):(0,o.jsx)("p",{className:"text-gray-900 dark:text-gray-100 py-2",children:null!==(u=v.bankAccount)&&void 0!==u?u:"-"}),v8:C?(0,o.jsx)("input",{id:"company-account-holder",type:"text",name:"accountHolder",value:null!==(y=F.accountHolder)&&void 0!==y?y:"",onChange:R,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}):(0,o.jsx)("p",{className:"text-gray-900 dark:text-gray-100 py-2",children:null!==(b=v.accountHolder)&&void 0!==b?b:"-"}),v9:A,v10:e=>D(e.target.value),v11:()=>{const e=A.trim();e.length>0&&!h.includes(e)?(w(r=>[...r,e]),D(""),alert("\uc0c8\ub85c\uc6b4 \ub2e8\uc704\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):h.includes(e)&&alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ub2e8\uc704\uc785\ub2c8\ub2e4.")},v12:h.map(e=>(0,o.jsxs)("span",{className:"inline-flex items-center bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded text-xs",children:[e,(0,o.jsx)("button",{onClick:()=>{q(e)},className:"ml-2 text-red-600 dark:text-red-400",children:"\u2715"})]},e)),v13:I,v14:e=>H(e.target.value),v15:()=>{const e=I.trim();e.length>0&&!k.includes(e)?(f(r=>[...r,e]),H(""),alert("\uc0c8\ub85c\uc6b4 \uce74\ud14c\uace0\ub9ac\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):k.includes(e)&&alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uce74\ud14c\uace0\ub9ac\uc785\ub2c8\ub2e4.")},v16:k.map(e=>(0,o.jsxs)("span",{className:"inline-flex items-center bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded text-xs",children:[e,(0,o.jsx)("button",{onClick:()=>{L(e)},className:"ml-2 text-red-600 dark:text-red-400",children:"\u2715"})]},e)),v17:(0,o.jsx)("input",{ref:B,id:"stamp-image",type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:async e=>{var r;const a=(null!==(r=e.target.files)&&void 0!==r?r:[])[0];if(void 0!==a){if(!a.type.startsWith("image/"))return alert("\uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4. (JPG, PNG, GIF \ub4f1)"),void(null!==B.current&&(B.current.value=""));if(a.size>2097152)return alert("\uc774\ubbf8\uc9c0 \ud30c\uc77c \ud06c\uae30\ub294 2MB\ub97c \ucd08\uacfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n\ud604\uc7ac \ud30c\uc77c \ud06c\uae30: ".concat(Math.round(a.size/1024),"KB")),void(null!==B.current&&(B.current.value=""));try{const e=await(0,d.UV)(a);p((0,t.A)((0,t.A)({},v),{},{stampImage:e})),N(e),await(0,d.cF)(e),alert("\ub3c4\uc7a5 \uc774\ubbf8\uc9c0\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(n){alert("\uc774\ubbf8\uc9c0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.\n\ud30c\uc77c\uc774 \uc190\uc0c1\ub418\uc5c8\uac70\ub098 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud615\uc2dd\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4."),null!==B.current&&(B.current.value="")}}},className:"hidden"}),v18:()=>{var e;return null===(e=B.current)||void 0===e?void 0:e.click()},v19:null!==j&&(0,o.jsx)("button",{onClick:()=>M(!0),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm font-medium transition-colors",children:"\ud83d\uddd1\ufe0f \uc0ad\uc81c"}),v20:null!==j?(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsx)("img",{src:j,alt:"\uc5c5\ub85c\ub4dc\ub41c \ub3c4\uc7a5 \uc774\ubbf8\uc9c0",className:"w-20 h-20 object-contain border border-gray-200 dark:border-gray-600 rounded bg-white dark:bg-gray-800 shadow-sm"}),(0,o.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[(0,o.jsx)("p",{className:"font-medium text-green-600 dark:text-green-400 mb-1",children:"\u2705 \ub3c4\uc7a5 \uc774\ubbf8\uc9c0\uac00 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4"}),(0,o.jsx)("p",{children:"\uccad\uad6c\uc11c \ucd9c\ub825 \uc2dc \uc790\ub3d9\uc73c\ub85c \ud45c\uc2dc\ub429\ub2c8\ub2e4"})]})]}):(0,o.jsxs)("div",{className:"text-center py-4",children:[(0,o.jsx)("div",{className:"text-gray-400 dark:text-gray-500 mb-2",children:(0,o.jsx)("svg",{className:"mx-auto h-12 w-12",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,o.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,o.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"\ub3c4\uc7a5 \uc774\ubbf8\uc9c0\uac00 \ub4f1\ub85d\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4"}),(0,o.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"JPG, PNG, GIF \ud30c\uc77c (\ucd5c\ub300 2MB)"})]}),v21:(0,o.jsx)(i.A,{open:null!=T,title:"\ub2e8\uc704 \uc0ad\uc81c",message:"'".concat(null!==T&&void 0!==T?T:"","' \ub2e8\uc704\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),confirmText:"\uc0ad\uc81c",cancelText:"\ucde8\uc18c",onConfirm:()=>{null!==T&&(w(e=>e.filter(e=>e!==T)),q(null),alert("\ub2e8\uc704\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))},onCancel:()=>q(null)}),v22:(0,o.jsx)(i.A,{open:null!=G,title:"\uce74\ud14c\uace0\ub9ac \uc0ad\uc81c",message:"'".concat(null!==G&&void 0!==G?G:"","' \uce74\ud14c\uace0\ub9ac\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),confirmText:"\uc0ad\uc81c",cancelText:"\ucde8\uc18c",onConfirm:()=>{null!==G&&(f(e=>e.filter(e=>e!==G)),L(null),alert("\uce74\ud14c\uace0\ub9ac\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))},onCancel:()=>L(null)}),v23:(0,o.jsx)(i.A,{open:_,title:"\ub3c4\uc7a5 \uc774\ubbf8\uc9c0 \uc0ad\uc81c",message:"\ub3c4\uc7a5 \uc774\ubbf8\uc9c0\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",confirmText:"\uc0ad\uc81c",cancelText:"\ucde8\uc18c",onConfirm:async()=>{try{p((0,t.A)((0,t.A)({},v),{},{stampImage:void 0})),N(null),await(0,d.V6)(),null!==B.current&&(B.current.value=""),alert("\ub3c4\uc7a5 \uc774\ubbf8\uc9c0\uac00 \uc644\uc804\ud788 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){alert("\uc774\ubbf8\uc9c0 \uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}M(!1)},onCancel:()=>M(!1)})})}},1288:(e,r,a)=>{a.d(r,{UV:()=>w,loadStampImage:()=>p,V6:()=>h,cF:()=>v});var t=a(5644);const n="handles",s="dirHandle";function l(){return"undefined"!==typeof window&&"showDirectoryPicker"in window}function d(){return new Promise((e,r)=>{const a=indexedDB.open("cms-fs",1);a.onupgradeneeded=()=>{const e=a.result;e.objectStoreNames.contains(n)||e.createObjectStore(n)},a.onsuccess=()=>e(a.result),a.onerror=()=>r(a.error)})}async function i(){if(!l())return null;try{const e=await async function(e){const r=await d();return new Promise((a,t)=>{const s=r.transaction(n,"readonly").objectStore(n).get(e);s.onsuccess=()=>{var e;return a(null!==(e=s.result)&&void 0!==e?e:null)},s.onerror=()=>t(s.error)})}(s);return null!==e&&void 0!==e?e:null}catch(e){return null}}async function o(e){if(!l())return!1;try{return await async function(e,r){const a=await d();return new Promise((t,s)=>{const l=a.transaction(n,"readwrite").objectStore(n).put(r,e);l.onsuccess=()=>t(),l.onerror=()=>s(l.error)})}(s,e),!0}catch(r){return!1}}async function c(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readwrite";return null!=e&&("granted"===await e.queryPermission({mode:r})||"granted"===await e.requestPermission({mode:r}))}async function x(e,r){return await e.getFileHandle(r,{create:!0})}async function g(e,r,a){try{if(null==e&&(e=await i()),null==e)return!1;if(!await c(e,"readwrite"))return!1;const t=await x(e,"".concat(r,".json")),n=await t.createWritable(),s=2;return await n.write(new Blob([JSON.stringify(a,null,s)],{type:"application/json"})),await n.close(),!0}catch(t){return!1}}const m={isSupported:l,getSavedDirectoryHandle:i,saveDirectoryHandle:o,chooseDirectory:async function(){if(!l())return null;try{if("function"!==typeof window.showDirectoryPicker)return null;const e=await window.showDirectoryPicker({id:"cms-data"});return await c(e,"readwrite")?(await o(e),e):null}catch(e){return null}},readKey:async function(e,r){try{if(null==e&&(e=await i()),null==e||null==r||""===r)return null;if(!await c(e,"read"))return null;const a=await x(e,"".concat(r,".json")),t=await a.getFile(),n=await t.text();return 0===n.length?null:JSON.parse(n)}catch(a){return null}},writeKey:g,writeKeyDirect:async function(e,r){const a=await i();return null!=a&&await g(a,e,r)},writeImageFile:async function(e,r){try{const a=await i();if(null==a)return!1;if(!await c(a,"readwrite"))return!1;const t=await a.getFileHandle(e,{create:!0}),n=await t.createWritable();return await n.write(r),await n.close(),!0}catch(a){return!1}}},u="stampImages",y="companyStamp",b=()=>new Promise((e,r)=>{const a=indexedDB.open("ConstructionAppDB",1);a.onerror=()=>r(a.error),a.onsuccess=()=>e(a.result),a.onupgradeneeded=e=>{const r=e.target.result;r.objectStoreNames.contains(u)||r.createObjectStore(u)}}),v=async e=>{try{const a=await fetch(e),n=await a.blob(),s=5*t.nH*t.nH;if(n.size>s)return!1;const l=await b(),d=l.transaction([u],"readwrite").objectStore(u);if(await new Promise((e,r)=>{const a=d.put(n,y);a.onsuccess=()=>e(),a.onerror=()=>r(a.error)}),l.close(),m.isSupported())try{await m.writeImageFile("company-stamp.png",n)}catch(r){}return!0}catch(a){return!1}},p=async()=>{try{const e=await b(),r=e.transaction([u],"readonly").objectStore(u),a=await new Promise((e,a)=>{const t=r.get(y);t.onsuccess=()=>{const r=t.result;e(void 0!==r&&null!==r?r:null)},t.onerror=()=>a(t.error)});return e.close(),null===a?null:new Promise((e,r)=>{const t=new FileReader;t.onload=()=>e(t.result),t.onerror=()=>r(t.error),t.readAsDataURL(a)})}catch(e){return null}},h=async()=>{try{const e=await b(),r=e.transaction([u],"readwrite").objectStore(u);return await new Promise((e,a)=>{const t=r.delete(y);t.onsuccess=()=>e(),t.onerror=()=>a(t.error)}),e.close(),!0}catch(e){return!1}},w=e=>new Promise((r,a)=>{const t=new FileReader;t.onload=e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.result;"string"===typeof n?r(n):a(new Error("Failed to convert file to base64"))},t.onerror=e=>a(e),t.readAsDataURL(e)})},5826:(e,r,a)=>{a.d(r,{n:()=>t.n});var t=a(8026)},6520:(e,r,a)=>{a.d(r,{A:()=>l});var t=a(6601),n=(a(9198),a(5582));const s=(0,t.FZ)(e=>(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 dark:bg-black dark:bg-opacity-50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:e.v0}),(0,n.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:e.v1}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)("button",{onClick:e.v2,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:e.v3}),(0,n.jsx)("button",{onClick:e.v4,className:"px-4 py-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded",children:e.v5})]})]})}),{name:"ConfirmDialog_1",portals:["v0","v1","v3","v5"]}),l=e=>{let{open:r,title:a,message:t,confirmText:l="\ud655\uc778",cancelText:d="\ucde8\uc18c",onConfirm:i,onCancel:o}=e;return r?(0,n.jsx)(s,{v0:a,v1:t,v2:o,v3:d,v4:i,v5:l}):null}}}]);
//# sourceMappingURL=217.4ba30a97.chunk.js.map