"use strict";(self.webpackChunkconstruction_management_frontend=self.webpackChunkconstruction_management_frontend||[]).push([[399],{2399:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var a=r(2555),n=r(6601),l=r(9198),s=r(4623),i=r(3515),d=r(1129),o=r(3688),c=r(5582);const x=(0,n.FZ)(e=>(0,c.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.v0,e.v1,e.v2,e.v3]}),{name:"StatsCards_1",portals:["v0","v1","v2","v3"]}),g=function(e){let{invoices:t}=e;const r=t.length,a=t.reduce((e,t)=>{const r=Number(t.amount);return e+(Number.isFinite(r)?r:0)},0),n=t.filter(e=>"\uacb0\uc81c\uc644\ub8cc"===e.status).length,l=t.filter(e=>"\ubbf8\uacb0\uc81c"===e.status).length,g=e=>{let{title:t,value:r,icon:a,bg:n,iconBg:l}=e;return(0,c.jsx)("div",{className:"".concat(n," rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700"),children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2",children:t}),(0,c.jsx)("p",{className:"text-base font-bold text-gray-900 dark:text-gray-100",children:r})]}),(0,c.jsx)("div",{className:"".concat(l," rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12"),children:(0,c.jsx)(a,{className:"h-6 w-6","aria-hidden":!0})})]})})};return(0,c.jsx)(x,{v0:(0,c.jsx)(g,{title:"\ucd1d \uccad\uad6c\uc11c",value:"".concat(r,"\uac74"),icon:s.A,bg:"bg-indigo-100 dark:bg-indigo-900/30",iconBg:"bg-indigo-500 dark:bg-indigo-600"}),v1:(0,c.jsx)(g,{title:"\uacb0\uc81c\uc644\ub8cc",value:"".concat(n,"\uac74"),icon:i.A,bg:"bg-green-100 dark:bg-green-900/30",iconBg:"bg-green-500 dark:bg-green-600"}),v2:(0,c.jsx)(g,{title:"\ubbf8\uacb0\uc81c",value:"".concat(l,"\uac74"),icon:d.A,bg:"bg-orange-100 dark:bg-orange-900/30",iconBg:"bg-orange-500 dark:bg-orange-600"}),v3:(0,c.jsx)(g,{title:"\ucd1d \uccad\uad6c \uae08\uc561",value:"\u20a9".concat(a.toLocaleString(),"\uc6d0"),icon:o.A,bg:"bg-blue-100 dark:bg-blue-900/30",iconBg:"bg-blue-500 dark:bg-blue-600"})})},u=(0,n.FZ)(e=>(0,c.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-md shadow-sm p-3 mb-4",children:(0,c.jsxs)("div",{className:"flex items-center space-x-3 flex-wrap",children:[(0,c.jsx)("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-300",children:"\ud544\ud130:"}),(0,c.jsx)("div",{className:"relative inline-flex items-center",children:(0,c.jsxs)("select",{id:"invoice-client-filter",name:"invoice-client-filter",value:e.v0,onChange:e.v1,className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 pr-8 py-1.5 bg-white dark:bg-gray-700 text-xs text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-indigo-500 appearance-none cursor-pointer min-w-0",children:[(0,c.jsx)("option",{value:"",children:"\uc804\uccb4 \uac74\ucd95\uc8fc"}),e.v2]})}),(0,c.jsx)("div",{className:"relative inline-flex items-center",children:(0,c.jsxs)("select",{id:"invoice-status-filter",name:"invoice-status-filter",value:e.v3,onChange:e.v4,disabled:e.v5,className:e.v6,children:[(0,c.jsx)("option",{value:"",children:e.v7}),(0,c.jsx)("option",{value:"\ubc1c\uc1a1\ub300\uae30",children:"\ubc1c\uc1a1\ub300\uae30"}),(0,c.jsx)("option",{value:"\ubc1c\uc1a1\ub428",children:"\ubc1c\uc1a1\ub428"}),(0,c.jsx)("option",{value:"\ubbf8\uacb0\uc81c",children:"\ubbf8\uacb0\uc81c"}),(0,c.jsx)("option",{value:"\uacb0\uc81c\uc644\ub8cc",children:"\uacb0\uc81c\uc644\ub8cc"})]})}),(0,c.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:[e.v8,"\uac1c"]}),e.v9]})}),{name:"FilterBar_1",portals:["v2","v7","v8","v9"]}),m=function(e){let{clients:t,selectedClient:r,selectedStatus:a,filteredCount:n,onChangeClient:l,onChangeStatus:s,onReset:i}=e;const d=""!==String(null!==r&&void 0!==r?r:""),o=""!==(null!==a&&void 0!==a?a:"").trim(),x=d||o;return(0,c.jsx)(u,{v0:null==r?"":String(r),v1:e=>l(e.target.value),v2:t.map(e=>(0,c.jsx)("option",{value:String(e.id),children:e.name},e.id)),v3:a,v4:e=>s(e.target.value),v5:!d,v6:"border border-gray-300 dark:border-gray-600 rounded-md px-3 pr-8 py-1.5 bg-white dark:bg-gray-700 text-xs hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-indigo-500 appearance-none cursor-pointer min-w-0 ".concat(d?"text-gray-700 dark:text-gray-200":"text-gray-400 dark:text-gray-500 cursor-not-allowed"),v7:d?"\uc804\uccb4 \uc0c1\ud0dc":"\uac74\ucd95\uc8fc \uc120\ud0dd \ud6c4",v8:n,v9:x&&(0,c.jsx)("button",{onClick:i,className:"text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 underline",children:"\ucd08\uae30\ud654"})})};var b=r(9529);const p=(0,n.FZ)(e=>(0,c.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,c.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-3 py-3 text-center text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:(0,c.jsx)("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600",checked:e.v0,onChange:e.v1,title:"\uc804\uccb4 \uc120\ud0dd"})}),(0,c.jsx)("th",{className:"px-3 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uccad\uad6c\uc11c \ubc88\ud638"}),(0,c.jsx)("th",{className:"px-3 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uac74 \ucd95 \uc8fc"}),(0,c.jsx)("th",{className:"px-3 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\ud504\ub85c\uc81d\ud2b8"}),(0,c.jsx)("th",{className:"px-2 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uc791 \uc5c5 \uc7a5"}),(0,c.jsx)("th",{className:"px-2 py-3 text-center text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uccad\uad6c \uae08\uc561"}),(0,c.jsx)("th",{className:"px-2 py-3 text-center text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uc0c1\xa0\xa0\xa0\xa0\ud0dc"}),(0,c.jsx)("th",{className:"px-2 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\ub0a0\xa0\xa0\xa0\xa0\uc9dc"}),(0,c.jsx)("th",{className:"px-2 py-3 text-center text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-20",children:"\uc791\xa0\xa0\xa0\xa0\uc5c5"})]})}),(0,c.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-600",children:e.v2})]})}),{name:"InvoicesTable_1",portals:["v2"]}),y=function(e){let{items:t,allSelected:r,selectedIds:a,onToggleAll:n,onToggleOne:l,format:s,onChangeStatus:i,onViewDetails:d,onOpenPrint:o,onDelete:x,statuses:g,getStatusColor:u}=e;return(0,c.jsx)(p,{v0:r,v1:e=>n(e.target.checked),v2:t.map(e=>(0,c.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,c.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,c.jsx)("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600",checked:a.includes(e.id),onChange:t=>l(e.id,t.target.checked),title:"\uc120\ud0dd"})}),(0,c.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap",children:[(0,c.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.id}),(0,c.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.dueDate})]}),(0,c.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100",children:e.client})}),(0,c.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.project}),(0,c.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.workplaceAddress}),(0,c.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap text-center text-sm text-gray-900 dark:text-gray-100",children:[s(e.amount),"\uc6d0"]}),(0,c.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:(0,c.jsx)("select",{className:"px-2 py-1 text-xs font-semibold rounded-full border-0 ".concat(u(e.status)," focus:outline-none focus:ring-0"),value:e.status,onChange:t=>i(e.id,t.target.value),title:"\uccad\uad6c\uc11c \uc0c1\ud0dc \ubcc0\uacbd",children:g.map(e=>(0,c.jsx)("option",{value:e,children:e},e))})}),(0,c.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.date}),(0,c.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:(0,c.jsxs)("div",{className:"flex justify-center",children:[(0,c.jsx)(b.A,{label:"\uc0c1\uc138\ubcf4\uae30",children:(0,c.jsx)("button",{onClick:()=>d(e),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mx-2",title:"\uccad\uad6c\uc11c \uc0c1\uc138\ubcf4\uae30",children:"\ud83d\udd0d"})}),(0,c.jsx)(b.A,{label:"\ucd9c\ub825",children:(0,c.jsx)("button",{onClick:()=>o(e),className:"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 mx-2",title:"\uccad\uad6c\uc11c \ucd9c\ub825",children:"\ud83d\udda8\ufe0f"})}),(0,c.jsx)(b.A,{label:"\uc0ad\uc81c",children:(0,c.jsx)("button",{onClick:()=>x(e.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 mx-2",title:"\uccad\uad6c\uc11c \uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})})]})})]},e.id))})},h=(0,n.FZ)(e=>(0,c.jsxs)("table",{className:"w-full border text-sm",children:[(0,c.jsx)("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"border px-3 py-2 text-center w-12",children:"\uc5f0\ubc88"}),(0,c.jsx)("th",{className:"border px-3 py-2 text-center w-24",children:"\uc77c\uc790"}),(0,c.jsx)("th",{className:"border px-3 py-2 text-center w-[26rem]",children:"\ub0b4\uc6a9"}),(0,c.jsx)("th",{className:"border px-3 py-2 text-center w-16",children:"\uc218\ub7c9"}),(0,c.jsx)("th",{className:"border px-3 py-2 text-center w-16",children:"\ub2e8\uc704"}),(0,c.jsx)("th",{className:"border px-3 py-2 text-right w-28",children:"\ub2e8\uac00"}),(0,c.jsx)("th",{className:"border px-3 py-2 text-right w-32",children:"\ud569\uacc4"}),(0,c.jsx)("th",{className:"border px-3 py-2 text-left w-36",children:"\ube44\uace0"})]})}),(0,c.jsx)("tbody",{children:e.v0}),(0,c.jsx)("tfoot",{children:(0,c.jsxs)("tr",{className:"bg-gray-50",children:[(0,c.jsx)("td",{className:"border px-3 py-2 text-right font-semibold",colSpan:6,children:"\ucd1d \uae08\uc561"}),(0,c.jsxs)("td",{className:"border px-3 py-2 text-right font-bold",children:[e.v1,"\uc6d0"]}),(0,c.jsx)("td",{className:"border px-3 py-2"})]})})]}),{name:"InvoiceDetailTable_1",portals:["v0","v1"]}),v=function(e){let{items:t,format:r,totalAmount:a}=e;const n=t.reduce((e,t)=>{const r=Number(t.quantity),a=Number.isFinite(r)?r:0,n=Number(t.unitPrice),l=Number.isFinite(n)?n:0,s=null!=t.total?Number(t.total):a*l;return e+(Number.isFinite(s)?s:0)},0);return(0,c.jsx)(h,{v0:t.map((e,t)=>{var a,n,l,s,i,d;const o=null!==(a=e.category)&&void 0!==a?a:"",x=null!==(n=e.description)&&void 0!==n?n:"",g="number"===typeof e.laborPersonsGeneral?e.laborPersonsGeneral:0,u="number"===typeof e.laborUnitRateGeneral?e.laborUnitRateGeneral:0,m="number"===typeof e.laborPersons?e.laborPersons:0,b="number"===typeof e.laborUnitRate?e.laborUnitRate:0,p=g*u,y=m*b,h=p+y,v=Number(e.quantity),k=Number(e.unitPrice),N=(Number.isFinite(v)?v:0)*(Number.isFinite(k)?k:0),j=Number(null!==(l=e.total)&&void 0!==l?l:N),f=Number.isFinite(j)?j:N;return(0,c.jsxs)("tr",{className:"align-top",children:[(0,c.jsx)("td",{className:"border px-3 py-2 text-center",children:t+1}),(0,c.jsx)("td",{className:"border px-3 py-2 text-center",children:null!==(s=e.date)&&void 0!==s?s:""}),(0,c.jsxs)("td",{className:"border px-3 py-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"font-medium text-gray-900 text-left",children:e.name}),""!==o&&(0,c.jsx)("div",{className:"mt-1 text-right",children:(0,c.jsx)("span",{className:"inline-block text-[11px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:o})})]}),""!==x&&(0,c.jsx)("div",{className:"text-xs text-gray-600 mt-1 whitespace-pre-line break-words leading-relaxed",children:x}),h>0&&(0,c.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:[(0,c.jsx)("span",{className:"font-medium",children:"\uc778\ubd80\uc784:"})," ",[p>0?"".concat(g,"\uba85 \xd7 ").concat(u.toLocaleString(),"\uc6d0"):null,y>0?"".concat(m,"\uba85 \xd7 ").concat(b.toLocaleString(),"\uc6d0"):null].filter(Boolean).join(", ")," = ",h.toLocaleString(),"\uc6d0"]})]}),(0,c.jsx)("td",{className:"border px-3 py-2 text-center",children:e.quantity}),(0,c.jsx)("td",{className:"border px-3 py-2 text-center",children:null!==(i=e.unit)&&void 0!==i?i:""}),(0,c.jsx)("td",{className:"border px-3 py-2 text-right",children:(()=>{const t=Number(e.unitPrice),a=Number.isFinite(t)?t:0;return"".concat(r(a),"\uc6d0")})()}),(0,c.jsxs)("td",{className:"border px-3 py-2 text-right",children:[r(f),"\uc6d0"]}),(0,c.jsx)("td",{className:"border px-2 py-2 w-36 text-xs",children:null!==(d=e.notes)&&void 0!==d?d:""})]},t)}),v1:r(Number(null!==a&&void 0!==a?a:n))})};var k=r(6520),N=r(5826),j=r(7875),f=r(8974),w=r(7467),I=r(8815),_=r(5568);const S=(0,n.FZ)(e=>(0,c.jsxs)("div",{className:"p-4",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"\uccad\uad6c\uc11c \uad00\ub9ac"}),(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"\uccad\uad6c\uc11c\ub97c \ubc1c\uc1a1\ud558\uace0 \uacb0\uc81c \ud604\ud669\uc744 \ucd94\uc801\ud558\uc138\uc694"})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[e.v0,(0,c.jsxs)("button",{onClick:e.v1,className:"flex items-center justify-center px-4 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white rounded-full shadow-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors duration-300 font-bold",children:[(0,c.jsx)("span",{className:"text-yellow-300 mr-2",children:"\u2728"}),(0,c.jsx)("span",{className:"text-xs font-bold",children:"\uc0c8 \uccad\uad6c\uc11c"})]})]})]}),e.v2,e.v3,e.v4,e.v5,e.v6,e.v7,e.v8]}),{name:"Invoices_1",portals:["v0","v2","v3","v4","v5","v6","v7","v8"]}),P=function(){const{invoices:e,setInvoices:t,clients:n,companyInfo:s,stampImage:i,categories:d,units:o,setWorkItems:x}=(0,N.n)(),{format:u}=(0,j.g)(),b=(0,f.R)(),[p,h]=(0,l.useState)(!1),[P,C]=(0,l.useState)(!1),[R,A]=(0,l.useState)({clientId:"",client:"",workplaceId:"",workplaceAddress:"",project:"",date:(new Date).toISOString().split("T")[0],status:"\ubc1c\uc1a1\ub300\uae30",items:[{name:"",quantity:1,unit:"",unitPrice:0,total:0,category:"",description:"",laborPersons:"",laborUnitRate:"",laborPersonsGeneral:"",laborUnitRateGeneral:""}]}),G=(0,l.useMemo)(()=>{const t=(t=>{if(""===b.selectedClient)return e;const r=parseInt(b.selectedClient),a=null===(t=n.find(e=>e.id===r))||void 0===t?void 0:t.name;return e.filter(e=>null!==e.clientId&&void 0!==e.clientId&&e.clientId===r||null!==a&&void 0!==a&&""!==a&&e.client===a)})();return""===b.selectedStatus?t:t.filter(e=>e.status===b.selectedStatus)},[e,b.selectedClient,b.selectedStatus,n]),U=(0,l.useMemo)(()=>G.map(e=>e.id),[G]),T=(0,w.C)(U),D=T.allSelected,[E,O]=(0,l.useState)(!1),[q,L]=(0,l.useState)(null),[F,M]=(0,l.useState)(null),H=()=>{const e="https://bluesky78060.github.io/Architecture-Management";if(""!==e.trim())try{let t=new URL(e,window.location.origin).pathname;return t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1)),"".concat(window.location.origin).concat(t)}catch(t){let r=e.trim();return r.startsWith("/")||(r="/".concat(r)),r.length>1&&r.endsWith("/")&&(r=r.slice(0,-1)),"".concat(window.location.origin).concat(r)}return window.location.origin},B=(0,l.useRef)(null),z=e=>{const t=parseInt(String(e)),r=n.find(e=>Number(e.id)===t);return null!==(null===r||void 0===r?void 0:r.workplaces)&&void 0!==(null===r||void 0===r?void 0:r.workplaces)?r.workplaces:[]},V=e=>{const{name:t,value:r}=e.target;A(e=>{const l=(0,a.A)((0,a.A)({},e),{},{[t]:r});if("clientId"===t){const e=parseInt(String(r)),t=n.find(t=>Number(t.id)===e);l.client=null!==(null===t||void 0===t?void 0:t.name)&&void 0!==(null===t||void 0===t?void 0:t.name)&&""!==(null===t||void 0===t?void 0:t.name)?t.name:"",l.workplaceId="",l.workplaceAddress="",l.project="",C(!1)}if("workplaceId"===t){const t=z(e.clientId).find(e=>Number(e.id)===parseInt(String(r)));l.workplaceAddress=null!==(null===t||void 0===t?void 0:t.address)&&void 0!==(null===t||void 0===t?void 0:t.address)&&""!==(null===t||void 0===t?void 0:t.address)?t.address:"",""===l.project&&null!==(null===t||void 0===t?void 0:t.description)&&void 0!==(null===t||void 0===t?void 0:t.description)&&""!==(null===t||void 0===t?void 0:t.description)&&(l.project=t.description)}return"project"===t&&("custom"===r?(C(!0),l.project=""):C(!1)),l})},Z=(e,t,r)=>{A(n=>{const l=[...n.items];if("quantity"===t||"unitPrice"===t||"laborPersons"===t||"laborUnitRate"===t||"laborPersonsGeneral"===t||"laborUnitRateGeneral"===t){const a=String(null!==r&&void 0!==r?r:"").replace(/[^\d-]/g,""),n=""===a||"-"===a?"":parseInt(a,10);"quantity"===t&&(l[e].quantity=n),"unitPrice"===t&&(l[e].unitPrice=n),"laborPersons"===t&&(l[e].laborPersons=n),"laborUnitRate"===t&&(l[e].laborUnitRate=n),"laborPersonsGeneral"===t&&(l[e].laborPersonsGeneral=n),"laborUnitRateGeneral"===t&&(l[e].laborUnitRateGeneral=n)}else"name"===t?l[e].name=r:"unit"===t?l[e].unit=r:"notes"===t?l[e].notes=r:"date"===t?l[e].date=r:"category"===t?l[e].category=r:"description"===t&&(l[e].description=r);const s=Number(l[e].quantity),i=Number(l[e].unitPrice),d=Number(l[e].laborPersons),o=Number(l[e].laborUnitRate),c=Number(l[e].laborPersonsGeneral),x=Number(l[e].laborUnitRateGeneral),g=0===s||isNaN(s)?0:s,u=0===i||isNaN(i)?0:i,m=(0===d||isNaN(d)?0:d)*(0===o||isNaN(o)?0:o)+(0===c||isNaN(c)?0:c)*(0===x||isNaN(x)?0:x);return l[e].total=g*u+m,(0,a.A)((0,a.A)({},n),{},{items:l})})},Y=()=>R.items.reduce((e,t)=>{const r=Number(t.total);return e+(0===r||isNaN(r)?0:r)},0);return(0,c.jsx)(S,{v0:T.selected.length>0&&(0,c.jsxs)("button",{onClick:()=>{0!==T.selected.length&&O(!0)},className:"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-red-200 dark:border-red-600 rounded-full shadow-sm hover:shadow-md hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-300 text-red-600 dark:text-red-400 font-medium",children:[(0,c.jsx)("span",{className:"text-red-500 dark:text-red-400 mr-2",children:"\ud83d\uddd1\ufe0f"}),(0,c.jsxs)("span",{className:"text-xs font-semibold",children:["\uc120\ud0dd \uc0ad\uc81c(",T.selected.length,")"]})]}),v1:()=>h(!0),v2:(0,c.jsx)(g,{invoices:e}),v3:(0,c.jsx)(m,{clients:n,selectedClient:b.selectedClient,selectedStatus:b.selectedStatus,filteredCount:G.length,onChangeClient:e=>b.setSelectedClient(e),onChangeStatus:e=>b.setSelectedStatus(e),onReset:()=>b.reset()}),v4:(0,c.jsx)(y,{items:G,allSelected:D,selectedIds:T.selected,onToggleAll:e=>T.toggleAll(e),onToggleOne:(e,t)=>T.toggleOne(e,t),format:u,onChangeStatus:(e,r)=>{const n=r;t(t=>t.map(t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{status:n}):t))},onViewDetails:e=>M(e),onOpenPrint:e=>{try{const r={invoice:e,companyInfo:s,stampImage:i};try{localStorage.setItem("invoicePrintData",JSON.stringify(r))}catch(t){}const a="".concat(H(),"/invoice-output.html"),n=window.open(a,"_blank","width=1200,height=800,scrollbars=yes,resizable=yes");if(null===n||void 0===n){return void(window.confirm("\ud31d\uc5c5\uc774 \ucc28\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uac19\uc740 \ud0ed\uc5d0\uc11c \ucd9c\ub825 \ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud560\uae4c\uc694?")&&window.location.assign(a))}setTimeout(()=>{try{n.focus()}catch(t){}},_.Q9.AUTO_SAVE_DELAY)}catch(r){window.confirm("\ucd9c\ub825 \ucc3d\uc744 \uc5ec\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.\n\ub300\uc2e0 Excel \ud30c\uc77c\ub85c \ub0b4\ubcf4\ub0b4\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&I.bJ.invoiceDetail(e)}},onDelete:e=>{L(e)},statuses:["\ubc1c\uc1a1\ub300\uae30","\ubc1c\uc1a1\ub428","\ubbf8\uacb0\uc81c","\uacb0\uc81c\uc644\ub8cc"],getStatusColor:e=>{switch(e){case"\uacb0\uc81c\uc644\ub8cc":return"bg-green-100 text-green-800";case"\ubc1c\uc1a1\ub428":return"bg-blue-100 text-blue-800";case"\ubbf8\uacb0\uc81c":return"bg-orange-100 text-orange-800";case"\ubc1c\uc1a1\ub300\uae30":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}}}),v5:null!==F&&void 0!==F&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black/30 dark:bg-black/50 flex items-center justify-center z-50",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-5xl p-6",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"\uccad\uad6c\uc11c \uc0c1\uc138"}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("button",{onClick:()=>{if(null!==F&&void 0!==F)try{const t={invoice:F,companyInfo:s};try{localStorage.setItem("invoiceDetailPrintData",JSON.stringify(t))}catch(e){}const r="".concat(H(),"/invoice-detail-output.html"),a=window.open(r,"_blank","width=1200,height=800,scrollbars=yes,resizable=yes");if(null===a||void 0===a){return void(window.confirm("\ud31d\uc5c5\uc774 \ucc28\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uac19\uc740 \ud0ed\uc5d0\uc11c \ucd9c\ub825 \ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud560\uae4c\uc694?")&&window.location.assign(r))}setTimeout(()=>{try{a.focus()}catch(e){}},_.Q9.AUTO_SAVE_DELAY)}catch(t){alert("\uc0c1\uc138 \ucd9c\ub825 \ucc3d\uc744 \uc5ec\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"px-3 py-1.5 bg-indigo-600 dark:bg-indigo-500 hover:bg-indigo-700 dark:hover:bg-indigo-600 text-white rounded text-sm",title:"\uc0c1\uc138 \ucd9c\ub825",children:"\ud83d\udda8\ufe0f \uc0c1\uc138 \ucd9c\ub825"}),(0,c.jsx)("button",{onClick:()=>M(null),className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]})]}),(0,c.jsxs)("div",{ref:B,children:[(0,c.jsxs)("div",{className:"mb-3 text-sm text-gray-900 dark:text-gray-100",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\ubc88\ud638:"})," ",F.id]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uc131\uba85:"})," ",F.client]})]}),(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsx)("h4",{className:"font-medium mb-2 text-gray-900 dark:text-gray-100",children:"\uc791\uc5c5 \ub0b4\uc5ed"}),(0,c.jsx)(v,{items:null!==F.workItems&&void 0!==F.workItems?F.workItems:[],format:u,totalAmount:(()=>{const e=Number(F.amount);return 0===e||isNaN(e)?0:e})()}),(0,c.jsx)("div",{className:"mt-3 w-full flex justify-end",children:(0,c.jsx)("div",{className:"w-full max-w-sm space-y-1 bg-white dark:bg-gray-700 p-3 rounded border border-gray-200 dark:border-gray-600",children:(()=>{const e=Number(F.amount),t=0===e||isNaN(e)?0:e,r=Math.round(t/1.1),a=t-r;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex justify-between text-sm text-gray-900 dark:text-gray-100",children:[(0,c.jsx)("span",{children:"\uc18c\uacc4"}),(0,c.jsxs)("span",{children:[u(r),"\uc6d0"]})]}),(0,c.jsxs)("div",{className:"flex justify-between text-sm text-gray-900 dark:text-gray-100",children:[(0,c.jsx)("span",{children:"\ubd80\uac00\uc138(10%)"}),(0,c.jsxs)("span",{children:[u(a),"\uc6d0"]})]}),(0,c.jsxs)("div",{className:"flex justify-between font-bold text-base text-gray-900 dark:text-gray-100",children:[(0,c.jsx)("span",{children:"\ucd1d\uc561"}),(0,c.jsxs)("span",{children:[u(t),"\uc6d0"]})]})]})})()})})]})]}),(0,c.jsx)("div",{className:"mt-4 text-right",children:(0,c.jsx)("button",{onClick:()=>M(null),className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:"\ub2eb\uae30"})})]})}),v6:(0,c.jsx)(k.A,{open:E,title:"\uc120\ud0dd \uc0ad\uc81c",message:"\uc120\ud0dd\ub41c ".concat(T.selected.length,"\uac1c\uc758 \uccad\uad6c\uc11c\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),confirmText:"\uc0ad\uc81c",cancelText:"\ucde8\uc18c",onConfirm:async()=>{t(e=>e.filter(e=>!T.selected.includes(e.id))),T.clear(),O(!1);try{const{supabase:e}=await Promise.resolve().then(r.bind(r,2930));if(null===e||void 0===e)return;const{error:t}=await e.from("invoices").delete().in("invoice_number",T.selected)}catch(e){}},onCancel:()=>O(!1)}),v7:(0,c.jsx)(k.A,{open:null!=q,title:"\uccad\uad6c\uc11c \uc0ad\uc81c",message:"\uc774 \uccad\uad6c\uc11c\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",confirmText:"\uc0ad\uc81c",cancelText:"\ucde8\uc18c",onConfirm:async()=>{if(null!==q&&void 0!==q){t(e=>e.filter(e=>e.id!==q)),L(null);try{const{supabase:e}=await Promise.resolve().then(r.bind(r,2930));if(null===e||void 0===e)return;const{error:t}=await e.from("invoices").delete().eq("invoice_number",q)}catch(e){}}},onCancel:()=>L(null)}),v8:p&&(0,c.jsx)("div",{className:"fixed inset-0 bg-gray-800/50 dark:bg-black/60 backdrop-blur-sm overflow-y-auto h-full w-full z-50",children:(0,c.jsxs)("div",{className:"relative top-8 mx-auto w-[980px] max-w-[95vw] shadow-2xl rounded-2xl bg-white/80 dark:bg-gray-800/90 ring-1 ring-black/5 dark:ring-white/10 mb-8",children:[(0,c.jsxs)("div",{className:"rounded-t-2xl bg-gradient-to-br from-indigo-50 via-purple-50 to-white dark:from-gray-700 dark:via-gray-800 dark:to-gray-900 px-8 pt-8 pb-6 text-center",children:[(0,c.jsx)("h3",{className:"text-2xl font-extrabold tracking-tight text-indigo-600 dark:text-indigo-400",children:"\uc0c8 \uccad\uad6c\uc11c \uc0dd\uc131"}),(0,c.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"\uccad\uad6c \uc815\ubcf4\ub97c \uc785\ub825\ud558\uace0 \ud56d\ubaa9\uc744 \ucd94\uac00\ud558\uc138\uc694"})]}),(0,c.jsx)("div",{className:"px-6 pb-6",children:(0,c.jsxs)("form",{id:"invoice-form",onSubmit:async a=>{a.preventDefault();if("number"===typeof R.clientId&&(0===R.clientId||isNaN(R.clientId))||"string"===typeof R.clientId&&""===R.clientId||"number"===typeof R.workplaceId&&(0===R.workplaceId||isNaN(R.workplaceId))||"string"===typeof R.workplaceId&&""===R.workplaceId||""===R.project)return void alert("\uac74\ucd95\uc8fc/\uc791\uc5c5\uc7a5/\ud504\ub85c\uc81d\ud2b8\ub97c \uc785\ub825\ud558\uc138\uc694.");if(0===R.items.length||""===R.items[0].name)return void alert("\uc791\uc5c5 \ud56d\ubaa9\uc744 1\uac1c \uc774\uc0c1 \uc785\ub825\ud558\uc138\uc694.");const n="INV-".concat((new Date).getFullYear(),"-").concat(String(e.length+1).padStart(3,"0")),l=Number(R.workplaceId),s={id:n,clientId:Number(R.clientId),client:R.client,workplaceId:l,project:R.project,workplaceAddress:R.workplaceAddress,amount:Y(),status:R.status,date:R.date,workItems:R.items.map((e,t)=>{const r=Number(e.quantity),a=Number(e.unitPrice),n=Number(e.total);return{id:t+1,name:e.name,quantity:0===r||isNaN(r)?0:r,unit:e.unit,unitPrice:0===a||isNaN(a)?0:a,total:0===n||isNaN(n)?0:n,notes:null!==e.notes&&void 0!==e.notes&&""!==e.notes?e.notes:"",date:null!==e.date&&void 0!==e.date&&""!==e.date?e.date:"",category:null!==e.category&&void 0!==e.category&&""!==e.category?e.category:"",description:null!==e.description&&void 0!==e.description&&""!==e.description?e.description:"",laborPersons:"number"===typeof e.laborPersons?e.laborPersons:""===String(e.laborPersons).trim()||0===Number(e.laborPersons)||isNaN(Number(e.laborPersons))?"":Number(e.laborPersons),laborUnitRate:"number"===typeof e.laborUnitRate?e.laborUnitRate:""===String(e.laborUnitRate).trim()||0===Number(e.laborUnitRate)||isNaN(Number(e.laborUnitRate))?"":Number(e.laborUnitRate),laborPersonsGeneral:"number"===typeof e.laborPersonsGeneral?e.laborPersonsGeneral:""===String(e.laborPersonsGeneral).trim()||0===Number(e.laborPersonsGeneral)||isNaN(Number(e.laborPersonsGeneral))?"":Number(e.laborPersonsGeneral),laborUnitRateGeneral:"number"===typeof e.laborUnitRateGeneral?e.laborUnitRateGeneral:""===String(e.laborUnitRateGeneral).trim()||0===Number(e.laborUnitRateGeneral)||isNaN(Number(e.laborUnitRateGeneral))?"":Number(e.laborUnitRateGeneral)}})},i=e;t(e=>[...e,s]),h(!1),C(!1),A({clientId:"",client:"",workplaceId:"",workplaceAddress:"",project:"",date:(new Date).toISOString().split("T")[0],status:"\ubc1c\uc1a1\ub300\uae30",items:[{name:"",quantity:1,unit:"",unitPrice:0,total:0,category:"",description:"",laborPersons:"",laborUnitRate:"",laborPersonsGeneral:"",laborUnitRateGeneral:""}]});try{var d,o,c;const{supabase:e}=await Promise.resolve().then(r.bind(r,2930));if(null===e||void 0===e)return t(i),void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");const{getCurrentUserId:a}=await Promise.resolve().then(r.bind(r,2930)),n=await a(),l="number"===typeof s.workplaceId&&s.workplaceId>0&&!isNaN(s.workplaceId)?s.workplaceId:null,u={invoice_number:s.id,user_id:n,client_id:s.clientId,workplace_id:l,title:null!==(d=s.project)&&void 0!==d?d:"",date:s.date,status:s.status,amount:s.amount},{data:m,error:b}=await e.from("invoices").insert(u).select().single();var g;if(null!==b&&void 0!==b)return t(i),console.error("\uccad\uad6c\uc11c \uc800\uc7a5 \uc624\ub958:",b),console.error("\uccad\uad6c\uc11c \ub370\uc774\ud130:",{invoice_number:s.id,user_id:n,client_id:s.clientId,title:null!==(g=s.project)&&void 0!==g?g:"",date:s.date,status:s.status,amount:s.amount}),void alert("\uccad\uad6c\uc11c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(b.message,"\n\ucf54\ub4dc: ").concat(b.code,"\n\uc0c1\uc138: ").concat(b.details));if(null===m||void 0===m)return t(i),void alert("\uccad\uad6c\uc11c \uc0dd\uc131\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");const p=s.workItems.map((e,t)=>{var r,a,n,l,s,i,d,o;return{invoice_id:m.invoice_id,item_id:t+1,category:null!==(r=e.category)&&void 0!==r?r:"",name:e.name,description:null!==(a=e.description)&&void 0!==a?a:"",quantity:null!==(n=e.quantity)&&void 0!==n?n:0,unit:null!==(l=e.unit)&&void 0!==l?l:"",unit_price:null!==(s=e.unitPrice)&&void 0!==s?s:0,total:null!==(i=e.total)&&void 0!==i?i:0,notes:null!==(d=e.notes)&&void 0!==d?d:"",date:null!==(o=e.date)&&void 0!==o?o:"",labor_persons:"number"===typeof e.laborPersons?e.laborPersons:0,labor_unit_rate:"number"===typeof e.laborUnitRate?e.laborUnitRate:0,labor_persons_general:"number"===typeof e.laborPersonsGeneral?e.laborPersonsGeneral:0,labor_unit_rate_general:"number"===typeof e.laborUnitRateGeneral?e.laborUnitRateGeneral:0}}),{error:y}=await e.from("invoice_items").insert(p);if(null!==y&&void 0!==y)return t(i),console.error("\uccad\uad6c\uc11c \ud56d\ubaa9 \uc800\uc7a5 \uc624\ub958:",y),console.error("\ud56d\ubaa9 \ub370\uc774\ud130:",p),void alert("\uccad\uad6c\uc11c \ud56d\ubaa9 \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(y.message,"\n\ucf54\ub4dc: ").concat(y.code,"\n\uc0c1\uc138: ").concat(y.details));const h=null!==(o=s.clientId)&&void 0!==o?o:0,v=z(h).find(e=>Number(e.id)===Number(l)),k=null!==(c=null===v||void 0===v?void 0:v.name)&&void 0!==c?c:"",N=s.workItems.map(e=>{var t,r,a,i,d,o,c,x;return{user_id:n,client_id:s.clientId,client_name:s.client,workplace_id:l,workplace_name:k,project_name:null!==(t=s.project)&&void 0!==t?t:"",name:e.name,description:null!==(r=e.description)&&void 0!==r?r:"",category:null!==(a=e.category)&&void 0!==a?a:"",quantity:null!==(i=e.quantity)&&void 0!==i?i:0,unit:null!==(d=e.unit)&&void 0!==d?d:"",default_price:null!==(o=e.unitPrice)&&void 0!==o?o:0,status:"completed",start_date:null!==(c=e.date)&&void 0!==c?c:s.date,notes:null!==(x=e.notes)&&void 0!==x?x:"",labor_persons:"number"===typeof e.laborPersons?e.laborPersons:0,labor_unit_rate:"number"===typeof e.laborUnitRate?e.laborUnitRate:0,labor_persons_general:"number"===typeof e.laborPersonsGeneral?e.laborPersonsGeneral:0,labor_unit_rate_general:"number"===typeof e.laborUnitRateGeneral?e.laborUnitRateGeneral:0}}),{data:j,error:f}=await e.from("work_items").insert(N).select();if(null!==f&&void 0!==f)return console.error("\uc791\uc5c5 \ud56d\ubaa9 \uc800\uc7a5 \uc624\ub958:",f),void alert("\uccad\uad6c\uc11c\ub294 \uc0dd\uc131\ub418\uc5c8\uc73c\ub098 \uc791\uc5c5 \ud56d\ubaa9 \uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(f.message));if(null!==j&&void 0!==j){const e=e=>{var t;return null!==(t={planned:"\uc608\uc815",in_progress:"\uc9c4\ud589\uc911",completed:"\uc644\ub8cc",on_hold:"\ubcf4\ub958"}[e])&&void 0!==t?t:"\uc608\uc815"},t=j.map(t=>{var r,a,n,l,i,d,o,c,x,g,u,m,b,p;const y=t.workplace_id,h=null!==y&&void 0!==y?y:"";return{id:t.work_item_id,clientId:t.client_id,clientName:null!==(r=t.client_name)&&void 0!==r?r:s.client,workplaceId:h,workplaceName:null!==(a=t.workplace_name)&&void 0!==a?a:k,projectName:null!==(n=t.project_name)&&void 0!==n?n:"",name:t.name,category:null!==(l=t.category)&&void 0!==l?l:"",defaultPrice:null!==(i=t.default_price)&&void 0!==i?i:0,quantity:null!==(d=t.quantity)&&void 0!==d?d:0,unit:null!==(o=t.unit)&&void 0!==o?o:"",description:null!==(c=t.description)&&void 0!==c?c:"",status:e(t.status),date:null!==(x=t.start_date)&&void 0!==x?x:"",notes:null!==(g=t.notes)&&void 0!==g?g:"",laborPersons:null!==(u=t.labor_persons)&&void 0!==u?u:0,laborUnitRate:null!==(m=t.labor_unit_rate)&&void 0!==m?m:0,laborPersonsGeneral:null!==(b=t.labor_persons_general)&&void 0!==b?b:0,laborUnitRateGeneral:null!==(p=t.labor_unit_rate_general)&&void 0!==p?p:0}});x(e=>[...e,...t])}}catch(u){return t(i),void alert("\uccad\uad6c\uc11c \uc0dd\uc131 \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"space-y-4",children:[(0,c.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4",children:(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uac74\ucd95\uc8fc *"}),(0,c.jsxs)("select",{name:"clientId",value:String(R.clientId),onChange:V,className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:!0,children:[(0,c.jsx)("option",{value:"",children:"\uac74\ucd95\uc8fc \uc120\ud0dd"}),n.map(e=>(0,c.jsx)("option",{value:String(e.id),children:e.name},e.id))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ud504\ub85c\uc81d\ud2b8 *"}),P?(0,c.jsx)("input",{type:"text",name:"project",value:R.project,onChange:V,placeholder:"\ud504\ub85c\uc81d\ud2b8\uba85\uc744 \uc785\ub825\ud558\uc138\uc694",className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:!0}):(0,c.jsxs)("select",{name:"project",value:R.project,onChange:V,className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:!0,disabled:"string"===typeof R.clientId&&""===R.clientId||"number"===typeof R.clientId&&(0===R.clientId||isNaN(R.clientId)),children:[(0,c.jsx)("option",{value:"",children:("string"===typeof R.clientId?""===R.clientId:0===R.clientId||isNaN(R.clientId))?"\uba3c\uc800 \uac74\ucd95\uc8fc\ub97c \uc120\ud0dd\ud558\uc138\uc694":"\ud504\ub85c\uc81d\ud2b8 \uc120\ud0dd"}),("string"===typeof R.clientId?""!==R.clientId:0!==R.clientId&&!isNaN(R.clientId))&&(e=>{const t=parseInt(String(e)),r=n.find(e=>Number(e.id)===t),a=null!==(null===r||void 0===r?void 0:r.projects)&&void 0!==(null===r||void 0===r?void 0:r.projects)?r.projects.filter(e=>""!==e&&null!==e&&void 0!==e):[],l=null!==(null===r||void 0===r?void 0:r.workplaces)&&void 0!==(null===r||void 0===r?void 0:r.workplaces)?r.workplaces.map(e=>{var t;return null!==(t=e.description)&&void 0!==t?t:""}).filter(e=>""!==e):[];return Array.from(new Set([...a,...l]))})(R.clientId).map((e,t)=>(0,c.jsx)("option",{value:e,children:e},t)),("string"===typeof R.clientId?""!==R.clientId:0!==R.clientId&&!isNaN(R.clientId))&&(0,c.jsx)("option",{value:"custom",children:"\uc9c1\uc811 \uc785\ub825"})]}),P&&(0,c.jsx)("button",{type:"button",onClick:()=>{C(!1),A(e=>(0,a.A)((0,a.A)({},e),{},{project:""}))},className:"mt-1 text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300",children:"\u2190 \ubaa9\ub85d\uc5d0\uc11c \uc120\ud0dd"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc791\uc5c5\uc7a5 *"}),(0,c.jsxs)("select",{name:"workplaceId",value:String(R.workplaceId),onChange:V,className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:!0,disabled:"string"===typeof R.clientId&&""===R.clientId||"number"===typeof R.clientId&&(0===R.clientId||isNaN(R.clientId)),children:[(0,c.jsx)("option",{value:"",children:("string"===typeof R.clientId?""===R.clientId:0===R.clientId||isNaN(R.clientId))?"\uba3c\uc800 \uac74\ucd95\uc8fc\ub97c \uc120\ud0dd\ud558\uc138\uc694":"\uc791\uc5c5\uc7a5 \uc120\ud0dd"}),("string"===typeof R.clientId?""!==R.clientId:0!==R.clientId&&!isNaN(R.clientId))&&z(R.clientId).map(e=>(0,c.jsxs)("option",{value:String(e.id),children:[e.name," - ",e.address]},e.id))]}),""!==R.workplaceAddress&&(0,c.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded text-sm text-gray-600 dark:text-gray-300",children:["\uc791\uc5c5\uc7a5 \uc8fc\uc18c: ",R.workplaceAddress]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ubc1c\ud589\uc77c"}),(0,c.jsx)("input",{type:"date",name:"date",value:R.date,onChange:V,className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]})]})}),(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,c.jsx)("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"\uc791\uc5c5 \ud56d\ubaa9"}),(0,c.jsx)("button",{type:"button",onClick:()=>A(e=>(0,a.A)((0,a.A)({},e),{},{items:[...e.items,{name:"",quantity:1,unit:"",unitPrice:0,total:0,category:"",description:"",laborPersons:"",laborUnitRate:"",laborPersonsGeneral:"",laborUnitRateGeneral:""}]})),className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 text-sm",children:"+ \ud56d\ubaa9 \ucd94\uac00"})]}),(0,c.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-1",children:R.items.map((e,t)=>(0,c.jsxs)("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-3 bg-gray-50 dark:bg-gray-700",children:[(0,c.jsxs)("div",{className:"grid grid-cols-4 gap-2 mb-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\ub0b4\uc6a9"}),(0,c.jsx)("input",{type:"text",value:e.name,onChange:e=>Z(t,"name",e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\uce74\ud14c\uace0\ub9ac"}),(0,c.jsxs)("select",{value:null!==e.category&&void 0!==e.category&&""!==e.category?e.category:"",onChange:e=>Z(t,"category",e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[(0,c.jsx)("option",{value:"",children:"\uc120\ud0dd"}),d.map(e=>(0,c.jsx)("option",{value:e,children:e},e))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\uc218\ub7c9"}),(0,c.jsx)("input",{type:"text",value:""===e.quantity?"":String(e.quantity),onChange:e=>Z(t,"quantity",e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\ub2e8\uc704"}),(0,c.jsxs)("select",{value:null!==e.unit&&void 0!==e.unit&&""!==e.unit?e.unit:"",onChange:e=>Z(t,"unit",e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[(0,c.jsx)("option",{value:"",children:"\uc120\ud0dd"}),o.map(e=>(0,c.jsx)("option",{value:e,children:e},e))]})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\ub2e8\uac00"}),(0,c.jsx)("input",{type:"text",value:""===e.unitPrice?"":String(e.unitPrice),onChange:e=>Z(t,"unitPrice",e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\uc0c1\uc138 \uc124\uba85"}),(0,c.jsx)("textarea",{value:null!==e.description&&void 0!==e.description&&""!==e.description?e.description:"",onChange:e=>Z(t,"description",e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded px-2 py-1 text-sm h-8 resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"\uc791\uc5c5 \uc0c1\uc138 \ub0b4\uc6a9"})]})]}),(0,c.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded p-2 mb-2",children:[(0,c.jsx)("div",{className:"text-xs font-medium text-blue-700 dark:text-blue-400 mb-1",children:"\uc778\ubd80\uc784 \uc815\ubcf4"}),(0,c.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs text-blue-600 dark:text-blue-400 mb-1",children:"\uc778\ubd80\uc218"}),(0,c.jsx)("input",{type:"text",value:""===e.laborPersons?"":String(e.laborPersons),onChange:e=>Z(t,"laborPersons",e.target.value),className:"w-full border border-blue-200 dark:border-blue-700 rounded px-2 py-1 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"\uba85"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs text-blue-600 dark:text-blue-400 mb-1",children:"\ub2e8\uac00"}),(0,c.jsx)("input",{type:"text",value:""===e.laborUnitRate?"":String(e.laborUnitRate),onChange:e=>Z(t,"laborUnitRate",e.target.value),className:"w-full border border-blue-200 dark:border-blue-700 rounded px-2 py-1 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"\uc6d0"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs text-blue-600 dark:text-blue-400 mb-1",children:"\uc778\ubd80\uc218"}),(0,c.jsx)("input",{type:"text",value:""===e.laborPersonsGeneral?"":String(e.laborPersonsGeneral),onChange:e=>Z(t,"laborPersonsGeneral",e.target.value),className:"w-full border border-blue-200 dark:border-blue-700 rounded px-2 py-1 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"\uba85"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs text-blue-600 dark:text-blue-400 mb-1",children:"\ub2e8\uac00"}),(0,c.jsx)("input",{type:"text",value:""===e.laborUnitRateGeneral?"":String(e.laborUnitRateGeneral),onChange:e=>Z(t,"laborUnitRateGeneral",e.target.value),className:"w-full border border-blue-200 dark:border-blue-700 rounded px-2 py-1 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"\uc6d0"})]})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\ube44\uace0"}),(0,c.jsx)("input",{type:"text",value:null!==e.notes&&void 0!==e.notes&&""!==e.notes?e.notes:"",onChange:e=>Z(t,"notes",e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\ub0a0\uc9dc"}),(0,c.jsx)("input",{type:"date",value:null!==e.date&&void 0!==e.date&&""!==e.date?e.date:"",onChange:e=>Z(t,"date",e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded px-2 py-1 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\ud569\uacc4"}),(0,c.jsxs)("div",{className:"w-full bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded px-2 py-1 text-sm text-gray-900 dark:text-gray-100",children:[(()=>{const t=Number(e.total);return u(0===t||isNaN(t)?0:t)})(),"\uc6d0"]})]})]}),R.items.length>1&&(0,c.jsx)("div",{className:"mt-2 text-right",children:(0,c.jsx)("button",{type:"button",onClick:()=>(e=>A(t=>(0,a.A)((0,a.A)({},t),{},{items:t.items.filter((t,r)=>r!==e)})))(t),className:"text-xs text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",children:"\ud56d\ubaa9 \uc0ad\uc81c"})})]},t))})]}),(0,c.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4",children:(0,c.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc0c1\ud0dc"}),(0,c.jsxs)("select",{name:"status",value:R.status,onChange:V,className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[(0,c.jsx)("option",{value:"\ubc1c\uc1a1\ub300\uae30",children:"\ubc1c\uc1a1\ub300\uae30"}),(0,c.jsx)("option",{value:"\ubc1c\uc1a1\ub428",children:"\ubc1c\uc1a1\ub428"}),(0,c.jsx)("option",{value:"\ubbf8\uacb0\uc81c",children:"\ubbf8\uacb0\uc81c"}),(0,c.jsx)("option",{value:"\uacb0\uc81c\uc644\ub8cc",children:"\uacb0\uc81c\uc644\ub8cc"})]})]}),(0,c.jsxs)("div",{className:"col-span-2 text-right",children:[(0,c.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"\ucd1d \uae08\uc561"}),(0,c.jsxs)("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:[u(Y()),"\uc6d0"]})]})]})})]})}),(0,c.jsx)("div",{className:"sticky bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700 px-6 py-4 rounded-b-2xl shadow-lg",children:(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,c.jsx)("button",{type:"button",onClick:()=>{h(!1),C(!1)},className:"px-6 py-2.5 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition font-medium",children:"\ucde8\uc18c"}),(0,c.jsx)("button",{type:"submit",form:"invoice-form",className:"px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 hover:bg-indigo-700 dark:hover:bg-indigo-600 text-white rounded-lg transition font-bold",children:"\uc800\uc7a5"})]})})]})})})};function C(){return(0,c.jsx)(P,{})}},5568:(e,t,r)=>{r.d(t,{Q9:()=>s,hR:()=>n,hm:()=>l});var a=r(5644);const n={SEOUL_AREA_CODE_LENGTH:2,STANDARD_AREA_CODE_LENGTH:3,MIN_DIGITS_FOR_AREA_CODE:3,MIN_DIGITS_FOR_FIRST_HYPHEN:7,MAX_PHONE_DIGITS:11,SEOUL_DIGITS_THRESHOLD:9,LAST_FOUR_DIGITS:4,SEOUL_MIDDLE_START:2,SEOUL_MIDDLE_END:6,SEOUL_TOTAL_MAX:10,STANDARD_MIDDLE_START:3,STANDARD_MIDDLE_END:7},l={MAX_DIGITS:10,FIRST_PART_LENGTH:3,SECOND_PART_LENGTH:5},s={AUTO_SAVE_DELAY:3*a.G1,SESSION_TIMEOUT:60*a.Rc*a.G1}},6520:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(6601),n=(r(9198),r(5582));const l=(0,a.FZ)(e=>(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 dark:bg-black dark:bg-opacity-50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:e.v0}),(0,n.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:e.v1}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)("button",{onClick:e.v2,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:e.v3}),(0,n.jsx)("button",{onClick:e.v4,className:"px-4 py-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded",children:e.v5})]})]})}),{name:"ConfirmDialog_1",portals:["v0","v1","v3","v5"]}),s=e=>{let{open:t,title:r,message:a,confirmText:s="\ud655\uc778",cancelText:i="\ucde8\uc18c",onConfirm:d,onCancel:o}=e;return t?(0,n.jsx)(l,{v0:r,v1:a,v2:o,v3:i,v4:d,v5:s}):null}},7467:(e,t,r)=>{r.d(t,{C:()=>n});var a=r(9198);function n(e){const[t,r]=(0,a.useState)([]);(0,a.useEffect)(()=>{r(t=>{const r=t.filter(t=>e.includes(t));return r.length===t.length&&r.every((e,r)=>e===t[r])?t:r})},[e]);const n=(0,a.useMemo)(()=>e.length>0&&t.length===e.length,[e.length,t.length]);return{selected:t,setSelected:r,allSelected:n,toggleOne:(e,t)=>{r(r=>t?Array.from(new Set([...r,e])):r.filter(t=>t!==e))},toggleAll:t=>{r(t?[...e]:[])},clear:()=>r([])}}},7875:(e,t,r)=>{function a(){return{format:e=>{if(null===e||void 0===e||""===e)return"";const t=String(e).replace(/[^\d-]/g,"");if(""===t||"-"===t)return"";const r=Number(t);return Number.isNaN(r)?"":r.toLocaleString()},parse:e=>{const t=String(null!==e&&void 0!==e?e:"").replace(/[^\d-]/g,"");if(""===t||"-"===t)return 0;const r=parseInt(t,10);return Number.isNaN(r)?0:r}}}r.d(t,{g:()=>a})},8974:(e,t,r)=>{r.d(t,{R:()=>n});var a=r(9198);function n(e){var t,r;const[n,l]=(0,a.useState)(null!==(t=null===e||void 0===e?void 0:e.selectedClient)&&void 0!==t?t:""),[s,i]=(0,a.useState)(null!==(r=null===e||void 0===e?void 0:e.selectedStatus)&&void 0!==r?r:""),d=(0,a.useMemo)(()=>""!==n.trim()||""!==s.trim(),[n,s]);return{selectedClient:n,selectedStatus:s,setSelectedClient:l,setSelectedStatus:i,reset:()=>{l(""),i("")},isActive:d,countLabel:(e,t)=>d?"".concat(t,"\uac1c"):"\ucd1d ".concat(e,"\uac1c")}}}}]);
//# sourceMappingURL=399.4ea31244.chunk.js.map