(()=>{"use strict";var e={568:(e,t,r)=>{var a=r(6601),n=r(9198),s=r(8296),o=r(109),i=r(8106),l=r(3552),d=r(5644),c=r(5582);const u=(0,n.createContext)(void 0),m=e=>{let{children:t}=e;const[r,a]=(0,n.useState)(()=>{const e=localStorage.getItem("theme");return null!==e&&""!==e?e:"light"});(0,n.useEffect)(()=>{const e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(r),localStorage.setItem("theme",r)},[r]);return(0,c.jsx)(u.Provider,{value:{theme:r,toggleTheme:()=>{a(e=>"light"===e?"dark":"light")}},children:t})};var p=r(6696),g=r(8026),h=r(9988),v=r(4637),b=r(386),x=r(4970),y=r(6773),f=r(4623),_=r(5747),w=r(9022),S=r(7443),j=r(6792),k=r(7542),N=r(940);const E=(0,a.FZ)(e=>(0,c.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[(0,c.jsxs)("div",{className:"fixed inset-y-0 left-0 z-50 w-72 bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700",children:[(0,c.jsxs)("div",{className:"flex h-20 items-center justify-between px-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center",children:e.v0}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"\uac74\ucd95 \uad00\ub9ac \uc2dc\uc2a4\ud15c"}),(0,c.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Architecture Management"})]})]}),(0,c.jsx)("button",{onClick:e.v1,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":e.v2,title:e.v3,children:e.v4})]}),(0,c.jsx)("nav",{className:"mt-10 px-4",children:(0,c.jsx)("ul",{className:"space-y-2",children:e.v5})}),e.v6]}),(0,c.jsx)("div",{className:"pl-72",children:(0,c.jsx)("main",{className:"py-10 px-8 lg:px-12",children:(0,c.jsx)("div",{className:"mx-auto max-w-7xl",children:e.v7})})})]}),{name:"Layout_1",portals:["v0","v4","v5","v6","v7"]}),A=[{name:"\ub300\uc2dc\ubcf4\ub4dc",href:"/",icon:b.A,adminOnly:!1},{name:"\uacac\uc801\uc11c \uad00\ub9ac",href:"/estimates",icon:y.A,adminOnly:!1},{name:"\uccad\uad6c\uc11c \uad00\ub9ac",href:"/invoices",icon:f.A,adminOnly:!1},{name:"\uac74\ucd95\uc8fc \uad00\ub9ac",href:"/clients",icon:_.A,adminOnly:!1},{name:"\uc791\uc5c5 \ud56d\ubaa9 \uad00\ub9ac",href:"/work-items",icon:w.A,adminOnly:!1},{name:"\uc77c\uc815 \uad00\ub9ac",href:"/schedules",icon:S.A,adminOnly:!1},{name:"\ud658\uacbd\uc124\uc815",href:"/company-info",icon:j.A,adminOnly:!1},{name:"\uacc4\uc815 \uc124\uc815",href:"/settings",icon:k.A,adminOnly:!1},{name:"\uc0ac\uc6a9\uc790 \uc2b9\uc778",href:"/admin/approvals",icon:N.A,adminOnly:!0}],T=function(){const e=(0,o.zy)(),{logout:t,currentUser:r,isAdmin:a}=(0,p.Jd)(),{theme:s,toggleTheme:l}=(()=>{const e=(0,n.useContext)(u);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e})(),[d,m]=(0,n.useState)(!1),g=(0,n.useRef)(null);return(0,n.useEffect)(()=>{const e=e=>{null===g.current||g.current.contains(e.target)||m(!1)},t=e=>{"Escape"===e.key&&m(!1)};return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[]),(0,c.jsx)(E,{v0:(0,c.jsx)(b.A,{className:"h-5 w-5 text-white"}),v1:l,v2:"light"===s?"\ub2e4\ud06c \ubaa8\ub4dc\ub85c \uc804\ud658":"\ub77c\uc774\ud2b8 \ubaa8\ub4dc\ub85c \uc804\ud658",v3:"light"===s?"\ub2e4\ud06c \ubaa8\ub4dc\ub85c \uc804\ud658":"\ub77c\uc774\ud2b8 \ubaa8\ub4dc\ub85c \uc804\ud658",v4:"light"===s?(0,c.jsx)(h.A,{className:"h-5 w-5 text-gray-700"}):(0,c.jsx)(v.A,{className:"h-5 w-5 text-yellow-400"}),v5:A.filter(e=>!e.adminOnly||a).map(t=>{const r=e.pathname===t.href;return(0,c.jsx)("li",{children:(0,c.jsxs)(i.N_,{to:t.href,onClick:()=>{console.log("\ud83d\udd35 [Layout] Navigation clicked:",t.name,"\u2192",t.href),console.log("\ud83d\udd35 [Layout] Current location:",e.pathname)},className:"\n                        flex items-center px-4 py-3 text-base font-medium rounded-xl transition-all duration-200\n                        ".concat(r?"bg-gradient-to-r from-blue-500 to-purple-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700","\n                      "),children:[(0,c.jsx)(t.icon,{className:"mr-3 h-5 w-5 ".concat(r?"text-white":"text-gray-500 dark:text-gray-400")}),(0,c.jsx)("span",{children:t.name})]})},t.name)}),v6:(0,c.jsx)("div",{className:"absolute bottom-6 left-4 right-4",ref:g,children:(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsxs)("button",{onClick:()=>m(!d),className:"flex w-full items-center px-4 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-colors duration-200",children:[(0,c.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mr-3",children:(0,c.jsx)(x.A,{className:"h-4 w-4 text-white"})}),(0,c.jsxs)("div",{className:"text-left flex-1",children:[(0,c.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:null!==(null===r||void 0===r?void 0:r.name)&&void 0!==(null===r||void 0===r?void 0:r.name)?r.name:"\uc0ac\uc6a9\uc790"}),(0,c.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"v2.0 Enhanced Edition"})]})]}),d&&(0,c.jsx)("div",{className:"absolute bottom-full mb-2 w-full rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 shadow-lg overflow-hidden",children:(0,c.jsxs)("button",{onClick:t,className:"flex w-full items-center px-4 py-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[(0,c.jsx)(x.A,{className:"mr-3 h-4 w-4 text-gray-500 dark:text-gray-400"}),"\ub85c\uadf8\uc544\uc6c3"]})})]})}),v7:(0,c.jsx)(o.sv,{})})};var C=r(1917),R=r(1941),I=r(8550),P=r(2930);const O=(0,a.FZ)(()=>(0,c.jsxs)("svg",{className:"w-[18px] h-[18px] mr-2",viewBox:"0 0 24 24",children:[(0,c.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,c.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,c.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,c.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),{name:"JSX_socialProviders_1",svg:!0}),U=(0,a.FZ)(()=>(0,c.jsx)("svg",{className:"w-[18px] h-[18px] mr-2",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{fill:"currentColor",d:"M12 3C6.48 3 2 6.48 2 11c0 2.76 1.66 5.23 4.24 6.63l-.91 3.35c-.08.3.26.54.52.37l4.07-2.68c.69.09 1.4.14 2.08.14 5.52 0 10-3.48 10-8S17.52 3 12 3z"})}),{name:"JSX_socialProviders_2",svg:!0}),L=(0,a.FZ)(e=>(0,c.jsxs)("div",{className:"min-h-screen relative flex items-center justify-center px-4 py-8 overflow-hidden",children:[e.v0,(0,c.jsx)("div",{"aria-hidden":!0,className:"absolute inset-0 bg-[#0b2a53]/70 dark:bg-[#0b2a53]/70 mix-blend-multiply"}),(0,c.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 bg-gradient-to-br from-indigo-900/40 via-transparent to-blue-900/40 dark:from-indigo-900/40 dark:via-transparent dark:to-blue-900/40"}),(0,c.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none absolute -top-24 -left-24 w-96 h-96 rounded-full bg-indigo-300/30 dark:bg-indigo-300/30 blur-3xl"}),(0,c.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none absolute -bottom-24 -right-24 w-96 h-96 rounded-full bg-blue-300/30 dark:bg-blue-300/30 blur-3xl"}),(0,c.jsx)("div",{className:"w-full max-w-md",children:(0,c.jsxs)("div",{className:"bg-white/85 dark:bg-white/85 backdrop-blur-md rounded-2xl shadow-xl border border-gray-200 dark:border-gray-200 p-7",children:[(0,c.jsxs)("div",{className:"text-center mb-6",children:[(0,c.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-blue-600 dark:bg-blue-600 text-white dark:text-white shadow-lg mb-2",children:e.v1}),(0,c.jsx)("h1",{className:"font-sans font-bold text-2xl text-gray-900 dark:text-gray-900 mb-1 tracking-wide",children:"\uac74\ucd95 \uad00\ub9ac \uc2dc\uc2a4\ud15c"}),(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-600 text-sm",children:e.v2})]}),e.v3,(0,c.jsxs)("form",{onSubmit:e.v4,className:"space-y-4",children:[e.v5,(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-700 mb-1.5",children:"\uc774\uba54\uc77c"}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400 dark:text-gray-400",children:e.v6}),(0,c.jsx)("input",{id:"email",type:"email",autoComplete:"email",value:e.v7,onChange:e.v8,className:" w-full pl-10 pr-3 py-2 border-2 border-gray-200 dark:border-gray-200 rounded-lg text-sm bg-gray-50 dark:bg-gray-50 transition-all duration-300 ease-in-out focus:outline-none focus:border-blue-500 focus:bg-white dark:focus:bg-white focus:shadow-[0_0_0_3px_rgba(59,130,246,0.1)] focus:-translate-y-0.5 placeholder-gray-400 dark:placeholder-gray-400 text-gray-900 dark:text-gray-900 ",placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694"})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-700 mb-1.5",children:"\ube44\ubc00\ubc88\ud638"}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400 dark:text-gray-400",children:e.v9}),(0,c.jsx)("input",{id:"password",type:"password",autoComplete:e.v10,value:e.v11,onChange:e.v12,className:" w-full pl-10 pr-3 py-2 border-2 border-gray-200 dark:border-gray-200 rounded-lg text-sm bg-gray-50 dark:bg-gray-50 transition-all duration-300 ease-in-out focus:outline-none focus:border-blue-500 focus:bg-white dark:focus:bg-white focus:shadow-[0_0_0_3px_rgba(59,130,246,0.1)] focus:-translate-y-0.5 placeholder-gray-400 dark:placeholder-gray-400 text-gray-900 dark:text-gray-900 ",placeholder:e.v13})]})]}),e.v14,e.v15,e.v16,(0,c.jsxs)("button",{type:"submit",disabled:e.v17,className:" w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white py-3 rounded-lg text-sm font-semibold transition-all duration-300 ease-in-out relative overflow-hidden hover:bg-blue-700 dark:hover:bg-blue-700 hover:-translate-y-0.5 hover:shadow-[0_12px_24px_rgba(59,130,246,0.3)] focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none group ",children:[(0,c.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transition-transform duration-600"}),e.v18]})]}),(0,c.jsx)("div",{className:"text-center text-sm text-gray-600 dark:text-gray-600 mt-5",children:e.v19}),(0,c.jsxs)("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-500 text-center",children:[(0,c.jsx)("p",{children:"\uac74\ucd95 \uad00\ub9ac \uc2dc\uc2a4\ud15c v2.0"}),(0,c.jsx)("p",{children:"\xa9 2025 Architecture Management System"})]})]})})]}),{name:"Login_1",portals:["v0","v1","v2","v3","v5","v6","v9","v14","v15","v16","v18","v19"]}),D=()=>{const[e,t]=(0,n.useState)("login"),[r,a]=(0,n.useState)(""),[s,i]=(0,n.useState)(""),[l,d]=(0,n.useState)(""),[u,m]=(0,n.useState)(!1),[g,h]=(0,n.useState)(""),[v,b]=(0,n.useState)(""),[x,y]=(0,n.useState)(!1),f=(0,o.Zp)(),{isLoggedIn:_}=(0,p.Jd)();(0,n.useEffect)(()=>{console.log("\ud83d\udfe2 [Login] isLoggedIn changed:",_),_&&(console.log("\ud83d\udfe2 [Login] Redirecting to dashboard"),f("/"))},[_,f]);const w=[{name:"Google",action:async()=>{if(null!==P.supabase)try{const{error:e}=await P.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});null!==e&&h("Google \ub85c\uadf8\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}catch(e){const t=e instanceof Error?e.message:"Google \ub85c\uadf8\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.";h(t)}else h("Supabase\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.")},bgColor:"bg-white dark:bg-white",hoverColor:"hover:bg-red-500 dark:hover:bg-red-500",textColor:"text-red-500 hover:text-white dark:text-red-500 dark:hover:text-white",borderColor:"border-red-500 dark:border-red-500",icon:(0,c.jsx)(O,{})},{name:"Kakao",action:async()=>{if(console.log("\ud83d\udfe1 [Kakao] Login button clicked"),null!==P.supabase)try{console.log("\ud83d\udfe1 [Kakao] Calling signInWithOAuth...");const{data:e,error:t}=await P.supabase.auth.signInWithOAuth({provider:"kakao",options:{redirectTo:window.location.origin}});console.log("\ud83d\udfe1 [Kakao] signInWithOAuth response:",{data:e,error:t}),null!==t&&(console.error("\u274c [Kakao] signInError:",t),h("Kakao \ub85c\uadf8\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(t.message)))}catch(e){console.error("\u274c [Kakao] Exception:",e);const t=e instanceof Error?e.message:"Kakao \ub85c\uadf8\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.";h(t)}else h("Supabase\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.")},bgColor:"bg-yellow-400 dark:bg-yellow-400",hoverColor:"hover:bg-yellow-500 dark:hover:bg-yellow-500",textColor:"text-gray-800 dark:text-gray-800",borderColor:"border-yellow-400 dark:border-yellow-400",icon:(0,c.jsx)(U,{})}],S="login"===e?async e=>{if(e.preventDefault(),y(!0),h(""),b(""),""===r.trim()||""===s.trim())return h("\uc774\uba54\uc77c\uacfc \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."),void y(!1);if(null===P.supabase)return h("Supabase\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),void y(!1);try{const{data:e,error:t}=await P.supabase.auth.signInWithPassword({email:r,password:s});null!==t?h("Invalid login credentials"===t.message?"\uc774\uba54\uc77c \ub610\ub294 \ube44\ubc00\ubc88\ud638\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.":t.message):null!==e.user&&(b("\ub85c\uadf8\uc778 \uc131\uacf5!"),setTimeout(()=>f("/"),500))}catch(t){const e=t instanceof Error?t.message:"\ub85c\uadf8\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.";h(e)}y(!1)}:async e=>{if(e.preventDefault(),y(!0),h(""),b(""),""===r.trim()||""===s.trim()||""===l.trim())return h("\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."),void y(!1);if(s.length<6)return h("\ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."),void y(!1);if(null===P.supabase)return h("Supabase\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),void y(!1);try{const{data:e,error:a}=await P.supabase.auth.signUp({email:r,password:s,options:{data:{name:l}}});null!==a?h(a.message):null!==e.user&&(b("\ud68c\uc6d0\uac00\uc785\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4! \uc774\uba54\uc77c\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694."),setTimeout(()=>t("login"),2e3))}catch(a){const e=a instanceof Error?a.message:"\ud68c\uc6d0\uac00\uc785 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.";h(e)}y(!1)};return(0,c.jsx)(L,{v0:(()=>{const e="1760958895",t=""!==e.trim()?e.trim():"v2",r={NODE_ENV:"production",PUBLIC_URL:"https://bluesky78060.github.io/Architecture-Management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ASSET_VER:"1760958895",REACT_APP_USE_HASH_ROUTER:"1"}.REACT_APP_LOGIN_BG,a="string"===typeof r&&""!==r.trim()?r.trim():"".concat("https://bluesky78060.github.io/Architecture-Management","/images/login-blueprint.png"),n=a.includes("?")?"&":"?",s="".concat(a).concat(n).concat(t);return(0,c.jsx)("div",{"aria-hidden":!0,className:"absolute inset-0 bg-center bg-cover bg-no-repeat bg-fixed blur-[2px]",style:{backgroundImage:"url(".concat(s,")")}})})(),v1:(0,c.jsx)(C.A,{className:"w-6 h-6"}),v2:"login"===e?"\ub85c\uadf8\uc778\ud558\uc5ec \uc2dc\uc791\ud558\uc138\uc694":"\uc0c8 \uacc4\uc815\uc744 \ub9cc\ub4dc\uc138\uc694",v3:"login"===e&&(0,c.jsxs)("div",{className:"mb-5",children:[(0,c.jsx)("p",{className:"text-center text-gray-600 dark:text-gray-600 text-sm font-medium mb-3",children:"\uac04\ud3b8 \ub85c\uadf8\uc778"}),(0,c.jsx)("div",{className:"flex flex-col gap-2.5 mb-4",children:w.map(e=>(0,c.jsxs)("button",{type:"button",onClick:e.action,className:"\n                      flex items-center justify-center px-4 py-2.5 border-2\n                      ".concat(e.bgColor," ").concat(e.borderColor," ").concat(e.textColor,"\n                      ").concat(e.hoverColor," rounded-lg font-medium text-sm\n                      transition-all duration-300 ease-in-out\n                      hover:-translate-y-0.5 hover:shadow-lg\n                      relative overflow-hidden group\n                    "),children:[(0,c.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transition-transform duration-500"}),e.icon,e.name]},e.name))}),(0,c.jsxs)("div",{className:"relative flex items-center my-4",children:[(0,c.jsx)("div",{className:"flex-1 border-t border-gray-300 dark:border-gray-300"}),(0,c.jsx)("span",{className:"px-3 text-xs text-gray-500 dark:text-gray-500 font-medium",children:"\ub610\ub294"}),(0,c.jsx)("div",{className:"flex-1 border-t border-gray-300 dark:border-gray-300"})]})]}),v4:S,v5:"signup"===e&&(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-700 mb-1.5",children:"\uc774\ub984"}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400 dark:text-gray-400",children:(0,c.jsx)(R.A,{className:"w-5 h-5"})}),(0,c.jsx)("input",{id:"name",type:"text",autoComplete:"name",value:l,onChange:e=>d(e.target.value),className:" w-full pl-10 pr-3 py-2 border-2 border-gray-200 dark:border-gray-200 rounded-lg text-sm bg-gray-50 dark:bg-gray-50 transition-all duration-300 ease-in-out focus:outline-none focus:border-blue-500 focus:bg-white dark:focus:bg-white focus:shadow-[0_0_0_3px_rgba(59,130,246,0.1)] focus:-translate-y-0.5 placeholder-gray-400 dark:placeholder-gray-400 text-gray-900 dark:text-gray-900 ",placeholder:"\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694"})]})]}),v6:(0,c.jsx)(I.A,{className:"w-5 h-5"}),v7:r,v8:e=>a(e.target.value),v9:(0,c.jsx)(C.A,{className:"w-5 h-5"}),v10:"login"===e?"current-password":"new-password",v11:s,v12:e=>i(e.target.value),v13:"signup"===e?"\ube44\ubc00\ubc88\ud638 (\ucd5c\uc18c 6\uc790)":"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694",v14:"login"===e&&(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,c.jsx)("input",{type:"checkbox",checked:u,onChange:e=>m(e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 dark:border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),(0,c.jsx)("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-600",children:"\ub85c\uadf8\uc778 \uc0c1\ud0dc \uc720\uc9c0"})]}),(0,c.jsx)("button",{type:"button",onClick:()=>f("/forgot-password"),className:"text-sm text-blue-600 dark:text-blue-600 hover:text-blue-800 dark:hover:text-blue-800 font-medium transition-colors",children:"\ube44\ubc00\ubc88\ud638 \ucc3e\uae30"})]}),v15:""!==g&&(0,c.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-50 border border-red-200 dark:border-red-200 rounded-md",children:(0,c.jsx)("p",{className:"text-red-700 dark:text-red-700 text-sm",children:g})}),v16:""!==v&&(0,c.jsx)("div",{className:"p-3 bg-green-50 dark:bg-green-50 border border-green-200 dark:border-green-200 rounded-md",children:(0,c.jsx)("p",{className:"text-green-700 dark:text-green-700 text-sm",children:v})}),v17:x,v18:x?"login"===e?"\ub85c\uadf8\uc778 \uc911...":"\uac00\uc785 \uc911...":"login"===e?"\ub85c\uadf8\uc778":"\ud68c\uc6d0\uac00\uc785",v19:"login"===e?(0,c.jsxs)(c.Fragment,{children:["\uc544\uc9c1 \uacc4\uc815\uc774 \uc5c6\uc73c\uc2e0\uac00\uc694?"," ",(0,c.jsx)("button",{type:"button",onClick:()=>{t("signup"),h(""),b("")},className:"text-blue-600 dark:text-blue-600 hover:text-blue-800 dark:hover:text-blue-800 font-semibold transition-colors underline",children:"\ud68c\uc6d0\uac00\uc785"})]}):(0,c.jsxs)(c.Fragment,{children:["\uc774\ubbf8 \uacc4\uc815\uc774 \uc788\uc73c\uc2e0\uac00\uc694?"," ",(0,c.jsx)("button",{type:"button",onClick:()=>{t("login"),h(""),b("")},className:"text-blue-600 dark:text-blue-600 hover:text-blue-800 dark:hover:text-blue-800 font-semibold transition-colors underline",children:"\ub85c\uadf8\uc778"})]})})};var K=r(8686);const G=(0,a.FZ)(e=>(0,c.jsxs)("div",{className:"min-h-screen relative flex items-center justify-center px-4 py-8 overflow-hidden",children:[e.v0,(0,c.jsx)("div",{"aria-hidden":!0,className:"absolute inset-0 bg-[#0b2a53]/70 mix-blend-multiply"}),(0,c.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 bg-gradient-to-br from-indigo-900/40 via-transparent to-blue-900/40"}),(0,c.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none absolute -top-24 -left-24 w-96 h-96 rounded-full bg-indigo-300/30 blur-3xl"}),(0,c.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none absolute -bottom-24 -right-24 w-96 h-96 rounded-full bg-blue-300/30 blur-3xl"}),(0,c.jsx)("div",{className:"w-full max-w-md",children:(0,c.jsxs)("div",{className:"bg-white/85 backdrop-blur-md rounded-2xl shadow-xl border border-gray-200 p-7",children:[(0,c.jsxs)("div",{className:"text-center mb-6",children:[(0,c.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-blue-600 text-white shadow-lg mb-2",children:e.v1}),(0,c.jsx)("h1",{className:"font-sans font-bold text-2xl text-gray-900 mb-1 tracking-wide",children:"\ube44\ubc00\ubc88\ud638 \ucc3e\uae30"}),(0,c.jsx)("p",{className:"text-gray-600 text-sm",children:"\uac00\uc785\ud55c \uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud558\uc138\uc694"})]}),(0,c.jsxs)("form",{onSubmit:e.v2,className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"\uc774\uba54\uc77c"}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:e.v3}),(0,c.jsx)("input",{id:"email",type:"email",autoComplete:"email",value:e.v4,onChange:e.v5,className:" w-full pl-10 pr-3 py-2 border-2 border-gray-200 rounded-lg text-sm bg-gray-50 transition-all duration-300 ease-in-out focus:outline-none focus:border-blue-500 focus:bg-white focus:shadow-[0_0_0_3px_rgba(59,130,246,0.1)] focus:-translate-y-0.5 placeholder-gray-400 ",placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694"})]})]}),e.v6,e.v7,(0,c.jsxs)("button",{type:"submit",disabled:e.v8,className:" w-full bg-blue-600 text-white py-3 rounded-lg text-sm font-semibold transition-all duration-300 ease-in-out relative overflow-hidden hover:bg-blue-700 hover:-translate-y-0.5 hover:shadow-[0_12px_24px_rgba(59,130,246,0.3)] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none group ",children:[(0,c.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transition-transform duration-600"}),e.v9]})]}),(0,c.jsx)("div",{className:"text-center text-sm text-gray-600 mt-5",children:(0,c.jsxs)("button",{type:"button",onClick:e.v10,className:"inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:[e.v11,"\ub85c\uadf8\uc778\uc73c\ub85c \ub3cc\uc544\uac00\uae30"]})}),(0,c.jsxs)("div",{className:"mt-4 text-xs text-gray-500 text-center",children:[(0,c.jsx)("p",{children:"\uac74\ucd95 \uad00\ub9ac \uc2dc\uc2a4\ud15c v2.0"}),(0,c.jsx)("p",{children:"\xa9 2025 Architecture Management System"})]})]})})]}),{name:"ForgotPassword_1",portals:["v0","v1","v3","v6","v7","v9","v11"]}),M=()=>{const[e,t]=(0,n.useState)(""),[r,a]=(0,n.useState)(""),[s,i]=(0,n.useState)(""),[l,d]=(0,n.useState)(!1),u=(0,o.Zp)();return(0,c.jsx)(G,{v0:(()=>{const e="1760958895",t=""!==e.trim()?e.trim():"v2",r={NODE_ENV:"production",PUBLIC_URL:"https://bluesky78060.github.io/Architecture-Management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ASSET_VER:"1760958895",REACT_APP_USE_HASH_ROUTER:"1"}.REACT_APP_LOGIN_BG,a="string"===typeof r&&""!==r.trim()?r.trim():"".concat("https://bluesky78060.github.io/Architecture-Management","/images/login-blueprint.png"),n=a.includes("?")?"&":"?",s="".concat(a).concat(n).concat(t);return(0,c.jsx)("div",{"aria-hidden":!0,className:"absolute inset-0 bg-center bg-cover bg-no-repeat bg-fixed blur-[2px]",style:{backgroundImage:"url(".concat(s,")")}})})(),v1:(0,c.jsx)(C.A,{className:"w-6 h-6"}),v2:async r=>{if(r.preventDefault(),d(!0),a(""),i(""),""===e.trim())return a("\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."),void d(!1);if(null===P.supabase)return a("Supabase\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),void d(!1);try{const{error:r}=await P.supabase.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});null!==r?a("\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c \ubc1c\uc1a1\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."):(i("\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \ub9c1\ud06c\ub97c \uc774\uba54\uc77c\ub85c \ubcf4\ub0c8\uc2b5\ub2c8\ub2e4. \uc774\uba54\uc77c\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694."),t(""))}catch(n){const e=n instanceof Error?n.message:"\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.";a(e)}d(!1)},v3:(0,c.jsx)(I.A,{className:"w-5 h-5"}),v4:e,v5:e=>t(e.target.value),v6:""!==r&&(0,c.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,c.jsx)("p",{className:"text-red-700 text-sm",children:r})}),v7:""!==s&&(0,c.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:(0,c.jsx)("p",{className:"text-green-700 text-sm",children:s})}),v8:l,v9:l?"\ubc1c\uc1a1 \uc911...":"\uc7ac\uc124\uc815 \ub9c1\ud06c \ubc1c\uc1a1",v10:()=>u("/login"),v11:(0,c.jsx)(K.A,{className:"w-4 h-4 mr-1"})})};var H=r(1129),B=r(5522);const F=(0,a.FZ)(e=>(0,c.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 relative overflow-hidden",children:[e.v0,(0,c.jsxs)("div",{className:"text-center relative z-10",children:[(0,c.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-white dark:border-gray-300"}),(0,c.jsx)("p",{className:"mt-4 text-white dark:text-gray-200",children:"\ub85c\ub529 \uc911..."})]})]}),{name:"PendingApproval_1",portals:["v0"]}),q=(0,a.FZ)(e=>(0,c.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 relative overflow-hidden",children:[e.v0,(0,c.jsxs)("div",{className:"relative z-10 w-full max-w-md mx-4",children:[(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden",children:[(0,c.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-700 dark:to-purple-700 px-8 py-6",children:(0,c.jsx)("h1",{className:"text-3xl font-bold text-white dark:text-gray-100 text-center font-['Pacifico']",children:"\uac74\ucd95 \uad00\ub9ac \uc2dc\uc2a4\ud15c"})}),(0,c.jsxs)("div",{className:"px-8 py-10",children:[e.v1,e.v2,e.v3,e.v4,e.v5]})]}),(0,c.jsx)("p",{className:"text-center text-white dark:text-gray-200 text-sm mt-6 drop-shadow-lg",children:"\xa9 2024 \uac74\ucd95 \uad00\ub9ac \uc2dc\uc2a4\ud15c. All rights reserved."})]})]}),{name:"PendingApproval_2",portals:["v0","v1","v2","v3","v4","v5"]}),W=()=>{const e=(0,o.Zp)(),{isLoggedIn:t}=(0,p.Jd)(),[r,a]=(0,n.useState)(null),[s,i]=(0,n.useState)(!0);(0,n.useEffect)(()=>{t||e("/login",{replace:!0})},[t,e]),(0,n.useEffect)(()=>{if(!t)return;(async()=>{if(null!==P.supabase)try{const{data:{user:t}}=await P.supabase.auth.getUser();if(null===t)return void e("/login",{replace:!0});const{data:r,error:n}=await P.supabase.from("user_approvals").select("status, email, provider, created_at").eq("user_id",t.id).single();if(null!==n)return void i(!1);null!==r&&a(r)}catch(t){}finally{i(!1)}})()},[t,e]);const l=async()=>{null!==P.supabase&&(await P.supabase.auth.signOut(),e("/login"))};return t?s?(0,c.jsx)(F,{v0:(()=>{const e="1760958895",t=""!==e.trim()?e.trim():"v2",r={NODE_ENV:"production",PUBLIC_URL:"https://bluesky78060.github.io/Architecture-Management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ASSET_VER:"1760958895",REACT_APP_USE_HASH_ROUTER:"1"}.REACT_APP_LOGIN_BG,a="string"===typeof r&&""!==r.trim()?r.trim():"".concat("https://bluesky78060.github.io/Architecture-Management","/images/login-blueprint.png"),n=a.includes("?")?"&":"?",s="".concat(a).concat(n).concat(t);return(0,c.jsx)("div",{className:"absolute inset-0 bg-center bg-cover bg-no-repeat blur-[2px] opacity-10",style:{backgroundImage:"url(".concat(s,")")}})})()}):(0,c.jsx)(q,{v0:(()=>{const e="1760958895",t=""!==e.trim()?e.trim():"v2",r={NODE_ENV:"production",PUBLIC_URL:"https://bluesky78060.github.io/Architecture-Management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ASSET_VER:"1760958895",REACT_APP_USE_HASH_ROUTER:"1"}.REACT_APP_LOGIN_BG,a="string"===typeof r&&""!==r.trim()?r.trim():"".concat("https://bluesky78060.github.io/Architecture-Management","/images/login-blueprint.png"),n=a.includes("?")?"&":"?",s="".concat(a).concat(n).concat(t);return(0,c.jsx)("div",{className:"absolute inset-0 bg-center bg-cover bg-no-repeat blur-[2px] opacity-10",style:{backgroundImage:"url(".concat(s,")")}})})(),v1:"approved"===(null===r||void 0===r?void 0:r.status)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"flex justify-center mb-6",children:(0,c.jsx)("div",{className:"bg-green-100 dark:bg-green-900/30 rounded-full p-4",children:(0,c.jsx)("svg",{className:"h-16 w-16 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 text-center mb-4",children:"\uc2b9\uc778 \uc644\ub8cc"}),(0,c.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-400 dark:border-green-500 p-4 mb-6",children:[(0,c.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:[(0,c.jsx)("strong",{children:r.email})," \uacc4\uc815\uc774 \uc2b9\uc778\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]}),(0,c.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"\uc774\uc81c \ub85c\uadf8\uc778\ud558\uc5ec \uc2dc\uc2a4\ud15c\uc744 \uc0ac\uc6a9\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,c.jsx)("button",{onClick:()=>{l()},className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-3 rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-200 font-medium shadow-md mb-3",children:"\ub85c\uadf8\uc778\ud558\uae30"})]}),v2:"pending"===(null===r||void 0===r?void 0:r.status)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"flex justify-center mb-6",children:(0,c.jsx)("div",{className:"bg-yellow-100 dark:bg-yellow-900/30 rounded-full p-4",children:(0,c.jsx)(H.A,{className:"h-16 w-16 text-yellow-600 dark:text-yellow-400"})})}),(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 text-center mb-4",children:"\uc2b9\uc778 \ub300\uae30 \uc911"}),(0,c.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 dark:border-yellow-500 p-4 mb-6",children:[(0,c.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:[(0,c.jsx)("strong",{children:r.email})," \uacc4\uc815\uc774 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]}),(0,c.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"\uad00\ub9ac\uc790\uc758 \uc2b9\uc778\uc744 \uae30\ub2e4\ub9ac\uace0 \uc788\uc2b5\ub2c8\ub2e4."}),(0,c.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-3",children:["\ub85c\uadf8\uc778 \ubc29\uc2dd: ","google"===r.provider?"Google":"kakao"===r.provider?"Kakao":r.provider]}),(0,c.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["\ub4f1\ub85d\uc77c: ",new Date(r.created_at).toLocaleString("ko-KR")]})]})]}),v3:"rejected"===(null===r||void 0===r?void 0:r.status)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"flex justify-center mb-6",children:(0,c.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 rounded-full p-4",children:(0,c.jsx)(B.A,{className:"h-16 w-16 text-red-600 dark:text-red-400"})})}),(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 text-center mb-4",children:"\uc811\uadfc \uac70\ubd80\ub428"}),(0,c.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 dark:border-red-500 p-4 mb-6",children:[(0,c.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:[(0,c.jsx)("strong",{children:r.email})," \uacc4\uc815\uc758 \uc811\uadfc \uc694\uccad\uc774 \uac70\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]}),(0,c.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"\uc790\uc138\ud55c \ub0b4\uc6a9\uc740 \uc2dc\uc2a4\ud15c \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."})]})]}),v4:null===r&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"flex justify-center mb-6",children:(0,c.jsx)("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-full p-4",children:(0,c.jsx)(B.A,{className:"h-16 w-16 text-gray-600 dark:text-gray-400"})})}),(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 text-center mb-4",children:"\uc2b9\uc778 \uc815\ubcf4 \uc5c6\uc74c"}),(0,c.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700/50 border-l-4 border-gray-400 dark:border-gray-500 p-4 mb-6",children:(0,c.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:"\uc2b9\uc778 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694."})})]}),v5:"approved"!==(null===r||void 0===r?void 0:r.status)&&(0,c.jsx)("button",{onClick:()=>{l()},className:"w-full bg-gradient-to-r from-gray-500 to-gray-600 text-white py-3 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-200 font-medium shadow-md",children:"\ub85c\uadf8\uc544\uc6c3"})}):null},z=(0,a.FZ)(()=>(0,c.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),(0,c.jsx)("p",{className:"mt-4 text-gray-600",children:"\ud655\uc778 \uc911..."})]})}),{name:"AppGate_1"}),V=(0,a.FZ)(e=>e.v0,{name:"AppGate_2",portals:["v0"]}),Z=(0,a.FZ)(e=>e.v0,{name:"AppGate_3",portals:["v0"]}),J=(0,a.FZ)(e=>e.v0,{name:"AppGate_4",portals:["v0"]}),Y=function(){const{isLoggedIn:e}=(0,p.Jd)(),[t,r]=(0,n.useState)("loading"),a="1"==={NODE_ENV:"production",PUBLIC_URL:"https://bluesky78060.github.io/Architecture-Management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ASSET_VER:"1760958895",REACT_APP_USE_HASH_ROUTER:"1"}.REACT_APP_DISABLE_LOGIN||"undefined"!==typeof window&&null!=window.localStorage&&"1"===window.localStorage.getItem("CMS_DISABLE_LOGIN");return(0,n.useEffect)(()=>{e?(async()=>{if(console.log("\ud83d\udd35 [AppGate] checkApprovalStatus called, isLoggedIn:",e),null===P.supabase||!e)return console.log("\u26aa [AppGate] Skipping approval check (supabase null or not logged in)"),void r("approved");try{const{data:{user:e}}=await P.supabase.auth.getUser();if(console.log("\ud83d\udd35 [AppGate] user:",null!==e?"id=".concat(e.id,", provider=").concat(e.app_metadata.provider):"null"),null===e)return void r("approved");const{data:n,error:s}=await P.supabase.from("user_approvals").select("status").eq("user_id",e.id).maybeSingle();if(console.log("\ud83d\udd35 [AppGate] approval query result:",{approval:n,approvalError:s}),null!==s)return console.error("\u274c [AppGate] approvalError:",s),void r("approved");if(null===n){var t,a;const n=null!==(t=e.app_metadata.provider)&&void 0!==t?t:"email",s=null!==(a=e.email)&&void 0!==a?a:"".concat(e.id,"@user");console.log("\ud83d\udd35 [AppGate] No approval record. provider:",n,"email:",s);const{error:o}=await P.supabase.from("user_approvals").insert({user_id:e.id,email:s,provider:n,status:"pending"});console.log("\ud83d\udd35 [AppGate] Insert approval record result:",null!==o?"ERROR: ".concat(o.message):"SUCCESS"),null!==o&&console.error("\u274c [AppGate] insertError:",o),console.log("\ud83d\udfe1 [AppGate] All new users require approval - Setting status to PENDING"),r("pending")}else console.log("\ud83d\udd35 [AppGate] Found approval record with status:",n.status),r(n.status)}catch(n){console.error("\u274c [AppGate] Exception:",n),r("approved")}})():r("approved")},[e]),"loading"===t?(0,c.jsx)(z,{}):"pending"===t||"rejected"===t?(0,c.jsx)(V,{v0:(0,c.jsx)(o.C5,{to:"/pending-approval",replace:!0})}):!1===a&&!1===e?(0,c.jsx)(Z,{v0:(0,c.jsx)(o.C5,{to:"/login",replace:!0})}):(0,c.jsx)(J,{v0:(0,c.jsx)(T,{})})},Q=(0,a.FZ)(()=>(0,c.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),(0,c.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}),{name:"LoadingFallback_1"}),X=function(){return(0,c.jsx)(Q,{})},$=(0,n.lazy)(()=>Promise.all([r.e(96),r.e(940)]).then(r.bind(r,2940))),ee=(0,n.lazy)(()=>Promise.all([r.e(96),r.e(648),r.e(347)]).then(r.bind(r,7347))),te=(0,n.lazy)(()=>Promise.all([r.e(96),r.e(648),r.e(399)]).then(r.bind(r,2399))),re=(0,n.lazy)(()=>Promise.all([r.e(96),r.e(648),r.e(28)]).then(r.bind(r,4028))),ae=(0,n.lazy)(()=>Promise.all([r.e(96),r.e(648),r.e(355)]).then(r.bind(r,7355))),ne=(0,n.lazy)(()=>r.e(703).then(r.bind(r,1703))),se=(0,n.lazy)(()=>r.e(217).then(r.bind(r,217))),oe=(0,n.lazy)(()=>Promise.all([r.e(96),r.e(93)]).then(r.bind(r,7093))),ie=(0,n.lazy)(()=>Promise.all([r.e(96),r.e(776)]).then(r.bind(r,8776))),le=new l.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*d.Rc*d.G1}}}),de=s.createRoot(document.getElementById("root")),ce=(0,o.Eu)((0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.qh,{path:"login",element:(0,c.jsx)(D,{})}),(0,c.jsx)(o.qh,{path:"forgot-password",element:(0,c.jsx)(M,{})}),(0,c.jsx)(o.qh,{path:"pending-approval",element:(0,c.jsx)(W,{})}),(0,c.jsxs)(o.qh,{element:(0,c.jsx)(Y,{}),children:[(0,c.jsx)(o.qh,{index:!0,element:(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(X,{}),children:(0,c.jsx)($,{})})}),(0,c.jsx)(o.qh,{path:"estimates",element:(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(X,{}),children:(0,c.jsx)(ee,{})})}),(0,c.jsx)(o.qh,{path:"invoices",element:(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(X,{}),children:(0,c.jsx)(te,{})})}),(0,c.jsx)(o.qh,{path:"clients",element:(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(X,{}),children:(0,c.jsx)(re,{})})}),(0,c.jsx)(o.qh,{path:"work-items",element:(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(X,{}),children:(0,c.jsx)(ae,{})})}),(0,c.jsx)(o.qh,{path:"schedules",element:(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(X,{}),children:(0,c.jsx)(ne,{})})}),(0,c.jsx)(o.qh,{path:"company-info",element:(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(X,{}),children:(0,c.jsx)(se,{})})}),(0,c.jsx)(o.qh,{path:"settings",element:(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(X,{}),children:(0,c.jsx)(oe,{})})}),(0,c.jsx)(o.qh,{path:"admin/approvals",element:(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(X,{}),children:(0,c.jsx)(ie,{})})}),(0,c.jsx)(o.qh,{path:"*",element:(0,c.jsx)(o.C5,{to:"/",replace:!0})})]})]})),ue={v7_startTransition:!0,v7_relativeSplatPath:!0},me=(0,i.Ys)(ce,{basename:"/",future:ue});de.render((0,c.jsx)(m,{children:(0,c.jsx)(l.QueryClientProvider,{client:le,children:(0,c.jsx)(p.vu,{children:(0,c.jsx)(g.D,{children:(0,c.jsx)(i.pg,{router:me,future:{v7_startTransition:!0}})})})})}))},2930:(e,t,r)=>{r.d(t,{getCurrentUserId:()=>c,supabase:()=>d});var a,n,s=r(3744);const o=new class{constructor(){this.client=null,this.config=null}initialize(e){try{console.log("\ud83d\udd0c Initializing Supabase connection..."),console.log("\ud83d\udccd URL:",e.url),this.config=e,this.client=(0,s.UU)(e.url,e.anonKey,{auth:{persistSession:!0,autoRefreshToken:!0},db:{schema:"public"},global:{headers:{"x-application-name":"construction-management"}}}),console.log("\u2705 Supabase initialized successfully")}catch(t){throw console.error("\u274c Supabase initialization failed:",t),t}}getClient(){if(null===this.client)throw new Error("Supabase not initialized. Call initialize() first.");return this.client}getConfig(){return this.config}async healthCheck(){try{const e=this.getClient(),{error:t}=await e.from("clients").select("count",{count:"exact",head:!0});return null===t||"PGRST116"===t.code||(console.error("Health check failed:",t),!1)}catch(e){return console.error("Health check failed:",e),!1}}getStats(){return null===this.client?null:{connected:null!==this.client,config:null!==this.config?{url:this.config.url,hasAnonKey:""!==this.config.anonKey&&void 0!==this.config.anonKey,hasServiceRoleKey:""!==this.config.serviceRoleKey&&void 0!==this.config.serviceRoleKey}:null}}async query(e,t){const r=this.getClient(),{data:a,error:n}=await r.rpc(e,t);if(null!==n)throw new Error("Query failed: ".concat(n.message));return a}async transaction(e){const t=this.getClient();return await e(t)}},i=null!==(a={NODE_ENV:"production",PUBLIC_URL:"https://bluesky78060.github.io/Architecture-Management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ASSET_VER:"1760958895",REACT_APP_USE_HASH_ROUTER:"1"}.REACT_APP_SUPABASE_URL)&&void 0!==a?a:"",l=null!==(n={NODE_ENV:"production",PUBLIC_URL:"https://bluesky78060.github.io/Architecture-Management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ASSET_VER:"1760958895",REACT_APP_USE_HASH_ROUTER:"1"}.REACT_APP_SUPABASE_ANON_KEY)&&void 0!==n?n:"";""!==i&&""!==l&&o.initialize({url:i,anonKey:l});const d=""!==i&&""!==l?o.getClient():null;async function c(){const e="00000000-0000-0000-0000-000000000000";if(null===d)return e;try{var t,r;const{data:{session:e}}=await d.auth.getSession();if(void 0!==(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id)&&null!==(null===e||void 0===e||null===(r=e.user)||void 0===r?void 0:r.id))return e.user.id}catch(a){}return e}},5471:(e,t,r)=>{r.d(t,{v:()=>n});const a=!1,n={log:function(){a},info:function(){a},warn:function(){a},error:function(){console.error(...arguments)},debug:function(){a}}},5644:(e,t,r)=>{r.d(t,{G1:()=>a,Rc:()=>n,nH:()=>s});const a=1e3,n=60,s=1024},6696:(e,t,r)=>{r.d(t,{vu:()=>f,Jd:()=>y});var a=r(9198),n=r(5644),s=r(7048),o=r(5471);const i="CMS_SYSTEM_2024";let l=!1,d=null;async function c(){if(!l)return null!=d||(d=(async()=>{try{await s.Z.initializeSystemKey(i),l=!0,o.v.log("\u2705 Secure Storage initialized")}catch(e){throw o.v.error("\u274c Secure Storage initialization failed:",e),e}})()),d}function u(e,t){if(!l)return o.v.warn("\u26a0\ufe0f Storage not initialized, storing ".concat(e," temporarily")),"undefined"!==typeof window&&null!=window.localStorage&&window.localStorage.setItem(e,t),void c().then(()=>{s.Z.setSecureItem(e,t).catch(o.v.error)});s.Z.setSecureItem(e,t).catch(t=>{o.v.error("Failed to set secure item: ".concat(e),t)})}function m(e){try{"undefined"!==typeof window&&null!=window.localStorage&&window.localStorage.removeItem(e)}catch(t){o.v.error("Failed to remove secure item: ".concat(e),t)}}"undefined"!==typeof window&&c().catch(o.v.error);var p,g=r(2930),h=r(5582);const v=(null!==(p={NODE_ENV:"production",PUBLIC_URL:"https://bluesky78060.github.io/Architecture-Management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ASSET_VER:"1760958895",REACT_APP_USE_HASH_ROUTER:"1"}.REACT_APP_ADMIN_EMAILS)&&void 0!==p?p:"bluesky78060@gmail.com").split(",").map(e=>e.trim().toLowerCase()),b=()=>"1"==={NODE_ENV:"production",PUBLIC_URL:"https://bluesky78060.github.io/Architecture-Management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ASSET_VER:"1760958895",REACT_APP_USE_HASH_ROUTER:"1"}.REACT_APP_DISABLE_LOGIN||(()=>{try{return"undefined"!==typeof window&&("1"===window.sessionStorage.getItem("CMS_DISABLE_LOGIN_PLAIN")||"1"===window.localStorage.getItem("CMS_DISABLE_LOGIN"))}catch(e){return!1}})(),x=(0,a.createContext)(void 0),y=()=>{const e=(0,a.useContext)(x);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e},f=e=>{let{children:t}=e;const[s,d]=(0,a.useState)(null),[p,y]=(0,a.useState)(!!b());(0,a.useEffect)(()=>{if((async()=>{await async function(){try{l||await c();const{autoMigrate:e}=await r.e(686).then(r.bind(r,6686));await e(i)}catch(e){o.v.error("Migration failed:",e)}}();try{const t=new URLSearchParams(window.location.search),r=t.get("bypassLogin");if("1"===r){u("CMS_DISABLE_LOGIN","1");try{window.sessionStorage.setItem("CMS_DISABLE_LOGIN_PLAIN","1")}catch(e){}}else if("0"===r){m("CMS_DISABLE_LOGIN");try{window.sessionStorage.removeItem("CMS_DISABLE_LOGIN_PLAIN")}catch(e){}}if("1"===t.get("resetAuth")){try{window.sessionStorage.removeItem("CURRENT_USER")}catch(e){}try{m("CURRENT_USER")}catch(e){}try{m("CMS_DISABLE_LOGIN")}catch(e){}try{window.sessionStorage.removeItem("CMS_DISABLE_LOGIN_PLAIN")}catch(e){}}}catch(e){}if(b()){const e={id:1,username:"dev",name:"\uac1c\ubc1c\uc790",role:"admin"};d(e),y(!0);try{sessionStorage.setItem("CURRENT_USER",JSON.stringify(e))}catch(t){}}else{null!==g.supabase&&g.supabase.auth.getSession().then(e=>{let{data:{session:r}}=e;if(void 0!==(null===r||void 0===r?void 0:r.user)&&null!==(null===r||void 0===r?void 0:r.user)){var a,n,s,o;const e={id:1,username:null!==(a=r.user.email)&&void 0!==a?a:"user",name:null!==(n=null!==(s=null===(o=r.user.user_metadata)||void 0===o?void 0:o.name)&&void 0!==s?s:r.user.email)&&void 0!==n?n:"User",role:"admin"};d(e),y(!0);try{sessionStorage.setItem("CURRENT_USER",JSON.stringify(e))}catch(t){}return}}).catch(()=>{});const e=sessionStorage.getItem("CURRENT_USER");null!==e&&""!==e?(d(JSON.parse(e)),y(!0)):m("CURRENT_USER")}})(),null===g.supabase)return;const{data:{subscription:e}}=g.supabase.auth.onAuthStateChange((e,t)=>{if(console.log("\ud83d\udd35 [UserContext] onAuthStateChange triggered:",e),console.log("\ud83d\udd35 [UserContext] session:",void 0!==(null===t||void 0===t?void 0:t.user)&&null!==(null===t||void 0===t?void 0:t.user)?"has user":"no user"),void 0!==(null===t||void 0===t?void 0:t.user)&&null!==(null===t||void 0===t?void 0:t.user)){var r,a,n,s;const e={id:1,username:null!==(r=t.user.email)&&void 0!==r?r:"user",name:null!==(a=null!==(n=null===(s=t.user.user_metadata)||void 0===s?void 0:s.name)&&void 0!==n?n:t.user.email)&&void 0!==a?a:"User",role:"admin"};console.log("\u2705 [UserContext] Setting logged in:",e.username),d(e),y(!0);try{sessionStorage.setItem("CURRENT_USER",JSON.stringify(e))}catch(o){}}else if(!b()){console.log("\u26a0\ufe0f [UserContext] No session, logging out"),d(null),y(!1);try{sessionStorage.removeItem("CURRENT_USER")}catch(o){}}});return()=>{e.unsubscribe()}},[]);const f=()=>{if(!b()){null!==g.supabase&&g.supabase.auth.signOut().catch(()=>{}),d(null),y(!1);try{sessionStorage.removeItem("CURRENT_USER")}catch(e){}try{m("CURRENT_USER")}catch(e){}try{u("CMS_LOGOUT",String(Date.now())),m("CMS_LOGOUT")}catch(e){}}},_=null!==s&&v.includes(s.username.toLowerCase()),w={currentUser:s,isLoggedIn:p,isAdmin:_,logout:f,getUserStorageKey:(e,t)=>"USER_".concat(e,"_").concat(t)};return(0,a.useEffect)(()=>{if(!p||b())return;let e;const t=60*n.Rc*n.G1,r=()=>{clearTimeout(e),e=setTimeout(()=>{f()},t)},a=["mousemove","mousedown","keydown","scroll","touchstart"];return a.forEach(e=>window.addEventListener(e,r,{passive:!0})),r(),()=>{clearTimeout(e),a.forEach(e=>window.removeEventListener(e,r))}},[p]),(0,a.useEffect)(()=>{const e=e=>{if("CMS_LOGOUT"===e.key){d(null),y(!1);try{sessionStorage.removeItem("CURRENT_USER")}catch(t){}try{m("CURRENT_USER")}catch(t){}}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,h.jsx)(x.Provider,{value:w,children:t})}},7048:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(5471);const n=1e5,s=256;class o{constructor(){this.cryptoKey=null,this.keyVersion="1.0"}static getInstance(){return void 0===o.instance&&(o.instance=new o),o.instance}async deriveKey(e,t){const r=null!==t&&void 0!==t?t:crypto.getRandomValues(new Uint8Array(16)),a=await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),"PBKDF2",!1,["deriveKey"]);return{key:await crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:n,hash:"SHA-256"},a,{name:"AES-GCM",length:s},!1,["encrypt","decrypt"]),salt:r}}async initializeSystemKey(e){const t=this.getStoredSalt(),{key:r,salt:a}=await this.deriveKey(e,null!==t&&void 0!==t?t:void 0);this.cryptoKey=r,null==t&&this.storeSalt(a)}async encrypt(e,t){var r;const a=null!==t&&void 0!==t?t:this.cryptoKey;if(null==a)throw new Error("\uc554\ud638\ud654 \ud0a4\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. initializeSystemKey()\ub97c \uba3c\uc800 \ud638\ucd9c\ud558\uc138\uc694.");const n=crypto.getRandomValues(new Uint8Array(12)),s=(new TextEncoder).encode(e);return{encrypted:await crypto.subtle.encrypt({name:"AES-GCM",iv:n},a,s),iv:n,salt:null!==(r=this.getStoredSalt())&&void 0!==r?r:new Uint8Array(16),algorithm:"AES-GCM-256",version:this.keyVersion}}async decrypt(e,t){const r=null!==t&&void 0!==t?t:this.cryptoKey;if(null==r)throw new Error("\uc554\ud638\ud654 \ud0a4\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");const a=await crypto.subtle.decrypt({name:"AES-GCM",iv:e.iv},r,e.encrypted);return(new TextDecoder).decode(a)}async setSecureItem(e,t){try{if("undefined"===typeof window||null==window.localStorage)throw new Error("localStorage\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(!1===this.isSensitiveData(e))return void window.localStorage.setItem(e,t);const r=await this.encrypt(t),a=this.serializeEncryptedData(r);window.localStorage.setItem(e,a)}catch(r){throw a.v.error("\ubcf4\uc548 \uc800\uc7a5 \uc2e4\ud328:",r),r}}async getSecureItem(e){try{if("undefined"===typeof window||null==window.localStorage)return null;const t=window.localStorage.getItem(e);if(null===t)return null;if(!1===this.isSensitiveData(e))return t;const r=this.deserializeEncryptedData(t);return null==r?t:await this.decrypt(r)}catch(t){return a.v.error("\ubcf4\uc548 \uc77d\uae30 \uc2e4\ud328:",t),null}}isSensitiveData(e){return["CMS_USERS","CURRENT_USER","CMS_DISABLE_LOGIN","CMS_LOGOUT","constructionApp_stampImage"].some(t=>e.includes(t))}serializeEncryptedData(e){return JSON.stringify({encrypted:this.arrayBufferToBase64(e.encrypted),iv:this.uint8ArrayToBase64(e.iv),salt:this.uint8ArrayToBase64(e.salt),algorithm:e.algorithm,version:e.version})}deserializeEncryptedData(e){try{const t=JSON.parse(e);return null==t.encrypted||null==t.iv||null==t.algorithm?null:{encrypted:this.base64ToArrayBuffer(t.encrypted),iv:this.base64ToUint8Array(t.iv),salt:this.base64ToUint8Array(t.salt),algorithm:t.algorithm,version:t.version}}catch(t){return null}}arrayBufferToBase64(e){const t=new Uint8Array(e);let r="";for(let a=0;a<t.byteLength;a++)r+=String.fromCharCode(t[a]);return btoa(r)}base64ToArrayBuffer(e){const t=atob(e),r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r.buffer}uint8ArrayToBase64(e){let t="";for(let r=0;r<e.byteLength;r++)t+=String.fromCharCode(e[r]);return btoa(t)}base64ToUint8Array(e){const t=atob(e),r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}storeSalt(e){if("undefined"!==typeof window&&null!=window.localStorage){const t=this.uint8ArrayToBase64(e);window.localStorage.setItem("CMS_SECURITY_SALT",t)}}getStoredSalt(){if("undefined"===typeof window||null==window.localStorage)return null;const e=window.localStorage.getItem("CMS_SECURITY_SALT");if(null===e)return null;try{return this.base64ToUint8Array(e)}catch(t){return null}}async resetSecurityKey(e,t){await this.initializeSystemKey(e);const r=crypto.getRandomValues(new Uint8Array(16)),{key:a}=await this.deriveKey(t,r);await this.reencryptAllSensitiveData(a),this.cryptoKey=a,this.storeSalt(r)}async reencryptAllSensitiveData(e){if("undefined"===typeof window||null==window.localStorage)return;const t=["CMS_USERS","CURRENT_USER","CMS_DISABLE_LOGIN","constructionApp_stampImage"];for(const r of t){const t=await this.getSecureItem(r);if(null!==t&&""!==t){const a=await this.encrypt(t,e),n=this.serializeEncryptedData(a);window.localStorage.setItem(r,n)}}}}o.instance=void 0;const i=o.getInstance()},8026:(e,t,r)=>{r.d(t,{D:()=>f,n:()=>h});var a=r(2555),n=r(6601),s=r(9198),o=r(2930);const i=(e,t)=>{if("granted"!==Notification.permission)return;const r=0===t?"\uc9c0\uae08":"".concat(t,"\ubd84 \ud6c4"),a=new Notification("\uc77c\uc815 \uc54c\ub9bc: ".concat(e.title),{body:"".concat(r,"\uc5d0 \uc77c\uc815\uc774 \uc788\uc2b5\ub2c8\ub2e4.\n").concat(e.description||"").concat(e.location?"\n\ud83d\udccd ".concat(e.location):""),icon:"/logo192.png",tag:"schedule-".concat(e.id),requireInteraction:!1,silent:!1});a.onclick=()=>{window.focus(),window.location.href="/schedules",a.close()},setTimeout(()=>{a.close()},5e3)},l=[],d=e=>{const t=l.findIndex(t=>t.scheduleId===e);-1!==t&&(clearTimeout(l[t].timeoutId),l.splice(t,1))},c=e=>{if(!e.reminderEnabled||!e.reminderMinutesBefore)return;d(e.id);const t=new Date("".concat(e.startDate,"T").concat(e.startTime||"00:00",":00")),r=new Date(t.getTime()-60*e.reminderMinutesBefore*1e3),a=new Date,n=r.getTime()-a.getTime();if(n<=0){if(t.getTime()>a.getTime()){const r=Math.round((t.getTime()-a.getTime())/6e4);i(e,r)}}else if(n<=864e5){const t=setTimeout(()=>{i(e,e.reminderMinutesBefore||0),d(e.id)},n);l.push({scheduleId:e.id,timeoutId:t})}};var u=r(5582);const m=1e3,p=e=>{var t;return null!==(t={"\uac80\ud1a0\uc911":"draft","\uc2b9\uc778\ub428":"approved","\uac70\ubd80\ub428":"rejected","\uc218\uc815 \uc694\uccad":"sent","\uc791\uc5c5 \uc804\ud658\ub428":"approved"}[e])&&void 0!==t?t:"draft"},g=(0,s.createContext)(void 0),h=()=>{const e=(0,s.useContext)(g);if(!e)throw new Error("useApp must be used within an AppProvider");return e},v={name:"\ud55c\uad6d\uac74\uc124",businessNumber:"123-45-67890",address:"\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \ud14c\ud5e4\ub780\ub85c 123",phone:"02-1234-5678",email:"info@hangeonconstruction.com",representative:"\ud64d\uae38\ub3d9",bankAccount:"\uc2e0\ud55c\uc740\ud589 110-123-456789",accountHolder:"\ud55c\uad6d\uac74\uc124(\uc8fc)"},b=(0,n.FZ)(()=>(0,u.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,u.jsx)("p",{className:"text-gray-600",children:"\ub370\uc774\ud130 \ub85c\ub529 \uc911..."})]})}),{name:"AppProvider_1"}),x=(0,n.FZ)(e=>(0,u.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,u.jsxs)("div",{className:"text-center max-w-md",children:[(0,u.jsx)("div",{className:"text-red-600 text-5xl mb-4",children:"\u26a0\ufe0f"}),(0,u.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"\uc624\ub958 \ubc1c\uc0dd"}),(0,u.jsx)("p",{className:"text-gray-600 mb-4",children:e.v0}),(0,u.jsx)("button",{onClick:e.v1,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\ub2e4\uc2dc \uc2dc\ub3c4"})]})}),{name:"AppProvider_2",portals:["v0"]}),y=(0,n.FZ)(e=>e.v0,{name:"AppProvider_3",portals:["v0"]}),f=e=>{let{children:t}=e;const[n,i]=(0,s.useState)(!0),[l,h]=(0,s.useState)(null),[f,_]=(0,s.useState)(null),[w,S]=(0,s.useState)(!0),[j,k]=(0,s.useState)(v),[N,E]=(0,s.useState)([]),[A,T]=(0,s.useState)([]),[C,R]=(0,s.useState)([]),[I,P]=(0,s.useState)([]),[O,U]=(0,s.useState)([]),[L,D]=(0,s.useState)(["\uc2dd","\u33a1","\uac1c","\ud1a4","m","kg","\ud68c","\uc77c"]),[K,G]=(0,s.useState)(["\ud1a0\ubaa9\uacf5\uc0ac","\uad6c\uc870\uacf5\uc0ac","\ucca0\uac70\uacf5\uc0ac","\ub9c8\uac10\uacf5\uc0ac","\uc124\ube44\uacf5\uc0ac","\ub0b4\ubd80\uacf5\uc0ac","\uae30\ud0c0"]),[M,H]=(0,s.useState)(null);(0,s.useEffect)(()=>{const e="1"==={NODE_ENV:"production",PUBLIC_URL:"https://bluesky78060.github.io/Architecture-Management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ASSET_VER:"1760958895",REACT_APP_USE_HASH_ROUTER:"1"}.REACT_APP_DISABLE_LOGIN||"undefined"!==typeof window&&null!==window.localStorage&&"1"===window.localStorage.getItem("CMS_DISABLE_LOGIN");(async()=>{if(!o.supabase)return h("Supabase\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4"),void i(!1);if(e)return _(null),void i(!1);const{data:{user:t}}=await o.supabase.auth.getUser();_(t?t.id:null),i(!1)})()},[]),(0,s.useEffect)(()=>{let e;const t=async()=>{if(!o.supabase)return;if(!("1"==={NODE_ENV:"production",PUBLIC_URL:"https://bluesky78060.github.io/Architecture-Management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ASSET_VER:"1760958895",REACT_APP_USE_HASH_ROUTER:"1"}.REACT_APP_DISABLE_LOGIN||"undefined"!==typeof window&&null!==window.localStorage&&"1"===window.localStorage.getItem("CMS_DISABLE_LOGIN")))try{await o.supabase.auth.signOut(),_(null),h("\ube44\ud65c\uc131 \uc0c1\ud0dc\ub85c \uc778\ud574 \uc790\ub3d9 \ub85c\uadf8\uc544\uc6c3\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694."),window.location.reload()}catch(e){console.error("Auto logout failed:",e)}},r=()=>{e&&clearTimeout(e),e=setTimeout(t,36e5)},a=["mousedown","mousemove","keypress","scroll","touchstart","click"];return a.forEach(e=>{document.addEventListener(e,r,!0)}),r(),()=>{e&&clearTimeout(e),a.forEach(e=>{document.removeEventListener(e,r,!0)})}},[f]),(0,s.useEffect)(()=>{if(!f||!o.supabase)return;(async()=>{try{i(!0);const{data:e,error:t}=await o.supabase.from("clients").select("*").eq("user_id",f).order("created_at",{ascending:!1});if(t)throw console.error("\u274c Clients \ub85c\ub529 \uc2e4\ud328:",t),t;const n=(e||[]).map(e=>({id:e.client_id,name:e.company_name||"",phone:e.phone||"",mobile:e.mobile||"",email:e.email||"",address:e.address||"",type:e.type||"BUSINESS",business:"BUSINESS"===e.type?{businessName:e.company_name||"",representative:e.representative||"",businessNumber:e.business_number||"",businessType:e.business_type||"",businessItem:e.business_item||"",businessAddress:e.business_address||"",taxEmail:e.tax_email||""}:void 0,workplaces:e.workplaces||[],projects:e.projects||[],totalBilled:e.total_billed||0,outstanding:e.outstanding||0,notes:e.notes||""}));E(n);const{data:s,error:l}=await o.supabase.from("work_items").select("\n            *,\n            clients!client_id (\n              company_name,\n              workplaces\n            )\n          ").eq("user_id",f).order("created_at",{ascending:!1});if(l)throw l;const d=e=>{var t;return null!==(t={planned:"\uc608\uc815",in_progress:"\uc9c4\ud589\uc911",completed:"\uc644\ub8cc",on_hold:"\ubcf4\ub958",cancelled:"\ubcf4\ub958"}[e])&&void 0!==t?t:"\uc608\uc815"},u=(s||[]).map(e=>{var t,r;const a=(null===(t=e.clients)||void 0===t?void 0:t.company_name)||"",n=((null===(r=e.clients)||void 0===r?void 0:r.workplaces)||[]).find(t=>Number(t.id)===Number(e.workplace_id)),s=(null===n||void 0===n?void 0:n.name)||"";return{id:e.work_item_id,clientId:e.client_id,clientName:a,workplaceId:e.workplace_id,workplaceName:s,projectName:e.project_name||"",name:e.name,category:e.category||"",defaultPrice:e.default_price||0,quantity:e.quantity||0,unit:e.unit||"",description:e.description||"",status:d(e.status),date:e.start_date||"",notes:e.notes||"",laborPersons:e.labor_persons||0,laborUnitRate:e.labor_unit_rate||0,laborPersonsGeneral:e.labor_persons_general||0,laborUnitRateGeneral:e.labor_unit_rate_general||0}});T(u);const{data:m,error:p}=await o.supabase.from("estimates").select("\n            *,\n            clients!client_id (\n              client_id,\n              company_name\n            ),\n            estimate_items (*)\n          ").eq("user_id",f).order("created_at",{ascending:!1});if(p)throw p;const g=(m||[]).map(e=>{var t;return{id:e.estimate_number||"EST-".concat(e.estimate_id),clientId:e.client_id,clientName:(null===(t=e.clients)||void 0===t?void 0:t.company_name)||"",workplaceId:e.workplace_id,workplaceName:e.workplace_name||"",projectName:e.project_name||"",title:e.project_name||"",status:e.status||"\uc791\uc131\uc911",validUntil:e.valid_until||"",totalAmount:e.total_amount||0,items:(e.estimate_items||[]).map(e=>({name:e.name,category:e.category||"",quantity:e.quantity||0,unit:e.unit||"",unitPrice:e.unit_price||0,total:e.total||0,description:e.description||"",notes:e.notes||""}))}});P(g);const{data:v,error:b}=await o.supabase.from("invoices").select("\n            *,\n            clients!client_id (\n              client_id,\n              company_name,\n              workplaces\n            ),\n            invoice_items (*)\n          ").eq("user_id",f).order("created_at",{ascending:!1});if(b)throw b;const x=(v||[]).map(e=>{var t,r;const a=((null===(t=e.clients)||void 0===t?void 0:t.workplaces)||[]).find(t=>Number(t.id)===Number(e.workplace_id)),n=(null===a||void 0===a?void 0:a.address)||"";return{id:e.invoice_number||"INV-".concat(e.invoice_id),clientId:e.client_id,client:(null===(r=e.clients)||void 0===r?void 0:r.company_name)||"",workplaceId:e.workplace_id,project:e.title||"",workplaceAddress:n,amount:e.amount||0,status:e.status||"\ubc1c\uc1a1\ub300\uae30",date:e.date||"",workItems:(e.invoice_items||[]).map(e=>({name:e.name,quantity:e.quantity||0,unit:e.unit||"",unitPrice:e.unit_price||0,total:e.total||0,notes:e.notes||"",date:e.date||"",category:e.category||"",description:e.description||"",laborPersons:e.labor_persons||0,laborUnitRate:e.labor_unit_rate||0,laborPersonsGeneral:e.labor_persons_general||0,laborUnitRateGeneral:e.labor_unit_rate_general||0}))}});R(x);const{data:y,error:_}=await o.supabase.from("company_info").select("*").eq("user_id",f).maybeSingle();if(!_&&y){const e=y.stamp_image||"";k({name:y.company_name,businessNumber:y.business_number||"",address:y.address||"",phone:y.phone||"",email:y.email||"",representative:y.representative||"",stampImage:e,bankAccount:y.bank_account||"",accountHolder:y.account_holder||""}),H(e||null),y.units&&Array.isArray(y.units)&&D(y.units),y.categories&&Array.isArray(y.categories)&&G(y.categories)}else{const{loadStampImage:e}=await r.e(288).then(r.bind(r,1288)),t=await e();t&&(H(t),k(e=>(0,a.A)((0,a.A)({},e),{},{stampImage:t})))}const{data:w,error:S}=await o.supabase.from("schedules").select("*").eq("user_id",f).order("start_date",{ascending:!0});if(!S&&w){const e=w.map(e=>({id:e.schedule_id,userId:e.user_id,title:e.title,description:e.description||void 0,scheduleType:e.schedule_type,startDate:e.start_date,startTime:e.start_time||void 0,endDate:e.end_date||void 0,endTime:e.end_time||void 0,allDay:e.all_day||!1,clientId:e.client_id||void 0,clientName:e.client_name||void 0,workplaceId:e.workplace_id||void 0,workplaceName:e.workplace_name||void 0,projectName:e.project_name||void 0,status:e.status||"scheduled",priority:e.priority||"normal",reminderEnabled:e.reminder_enabled||!1,reminderMinutesBefore:e.reminder_minutes_before||void 0,isRecurring:e.is_recurring||!1,recurrenceRule:e.recurrence_rule||void 0,location:e.location||void 0,attendees:e.attendees||void 0,notes:e.notes||void 0,attachments:e.attachments||void 0,createdAt:e.created_at,updatedAt:e.updated_at}));U(e);await(async()=>{if(!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if("granted"===Notification.permission)return!0;if("denied"!==Notification.permission)return"granted"===await Notification.requestPermission();return!1})()&&(e=>{e.forEach(e=>{e.reminderEnabled&&e.reminderMinutesBefore&&c(e)})})(e)}h(null)}catch(e){console.error("\ub370\uc774\ud130 \ub85c\ub529 \uc2e4\ud328:",e),h(e instanceof Error?e.message:"\ub370\uc774\ud130 \ub85c\ub529 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4")}finally{i(!1),setTimeout(()=>S(!1),100)}})()},[f]);(0,s.useEffect)(()=>{if(!f||!o.supabase||n||w)return;const e=setTimeout(async()=>{try{const e={company_name:j.name,business_number:j.businessNumber,address:j.address,phone:j.phone,email:j.email,representative:j.representative,stamp_image:j.stampImage||null,bank_account:j.bankAccount||null,account_holder:j.accountHolder||null,units:L,categories:K},t=(0,a.A)({user_id:f},e),{error:r}=await o.supabase.from("company_info").upsert(t);r&&console.error("\ud68c\uc0ac \uc815\ubcf4 \uc800\uc7a5 \uc2e4\ud328:",r)}catch(e){console.error("\ud68c\uc0ac \uc815\ubcf4 \uc800\uc7a5 \uc2e4\ud328:",e)}},m);return()=>clearTimeout(e)},[j,L,K,f,o.supabase,n,w]),(0,s.useEffect)(()=>{if(!f||!o.supabase||n||w)return;const e=setTimeout(async()=>{try{if(await o.supabase.from("estimate_items").delete().match({user_id:f}),await o.supabase.from("estimates").delete().eq("user_id",f),I.length>0)for(const e of I){const t="number"===typeof e.workplaceId&&e.workplaceId>0&&!isNaN(e.workplaceId)?e.workplaceId:null,{data:r,error:a}=await o.supabase.from("estimates").insert({estimate_number:e.id,user_id:f,client_id:e.clientId,client_name:e.clientName,workplace_id:t,workplace_name:e.workplaceName,project_name:e.projectName,title:e.title||"",date:e.date||(new Date).toISOString().split("T")[0],status:p(e.status),valid_until:e.validUntil||null,notes:e.notes||"",total_amount:e.totalAmount}).select().single();if(a)console.error("\uacac\uc801\uc11c \uc800\uc7a5 \uc624\ub958:",a);else if(r&&e.items.length>0){const t=e.items.map(e=>({user_id:f,estimate_id:r.estimate_id,name:e.name,category:e.category||null,quantity:e.quantity||0,unit:e.unit||null,unit_price:e.unitPrice||0,total:e.total||0,description:e.description||null,notes:e.notes||null})),{error:a}=await o.supabase.from("estimate_items").insert(t);a&&console.error("\uacac\uc801\uc11c \ud56d\ubaa9 \uc800\uc7a5 \uc624\ub958:",a)}}}catch(e){console.error("\uacac\uc801\uc11c \uc800\uc7a5 \uc2e4\ud328:",e)}},m);return()=>clearTimeout(e)},[I,f,n,w]),(0,s.useEffect)(()=>{if(!f||!o.supabase||n||w)return;const e=setTimeout(async()=>{try{await o.supabase.from("invoice_items").delete().match({user_id:f}),await o.supabase.from("invoices").delete().eq("user_id",f);const e=C.filter(e=>{const t=null!==e.clientId&&void 0!==e.clientId&&0!==e.clientId;return t||console.warn("\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uccad\uad6c\uc11c \uc790\ub3d9 \uc0ad\uc81c:",e.id),t});if(e.length!==C.length){const t=C.length-e.length;return console.info("".concat(t,"\uac1c\uc758 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uccad\uad6c\uc11c\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ub2e4\uc74c \uc800\uc7a5 \uc2dc \uc815\ub9ac\ub41c \ub370\uc774\ud130\uac00 \ubc18\uc601\ub429\ub2c8\ub2e4.")),void R(e)}if(e.length>0){const t=e=>{var t;return null!==(t={"\ubc1c\uc1a1\ub300\uae30":"pending","\ubc1c\uc1a1\ub428":"pending","\ubbf8\uacb0\uc81c":"overdue","\uacb0\uc81c\uc644\ub8cc":"paid"}[e])&&void 0!==t?t:"pending"};for(const r of e){const e="number"===typeof r.workplaceId&&r.workplaceId>0&&!isNaN(r.workplaceId)?r.workplaceId:null,a={invoice_number:r.id,user_id:f,client_id:r.clientId,workplace_id:e,title:r.project,amount:r.amount,status:t(r.status),date:r.date},{data:n,error:s}=await o.supabase.from("invoices").insert(a).select().single();if(s)console.error("\uccad\uad6c\uc11c \uc800\uc7a5 \uc624\ub958:",s);else if(n&&r.workItems.length>0){const e=r.workItems.map((e,t)=>{var r,a,s;return{user_id:f,invoice_id:n.invoice_id,category:null!==(r=e.category)&&void 0!==r?r:"",name:e.name,description:null!==(a=e.description)&&void 0!==a?a:"",unit:null!==(s=e.unit)&&void 0!==s?s:"",quantity:e.quantity||0,unit_price:e.unitPrice||0,sort_order:t,date:null!==e.date&&void 0!==e.date&&""!==e.date?e.date:null,notes:null!==e.notes&&void 0!==e.notes&&""!==e.notes?e.notes:null,labor_persons:"number"===typeof e.laborPersons?e.laborPersons:0,labor_unit_rate:"number"===typeof e.laborUnitRate?e.laborUnitRate:0,labor_persons_general:"number"===typeof e.laborPersonsGeneral?e.laborPersonsGeneral:0,labor_unit_rate_general:"number"===typeof e.laborUnitRateGeneral?e.laborUnitRateGeneral:0}}),{error:t}=await o.supabase.from("invoice_items").insert(e);t&&console.error("\uccad\uad6c\uc11c \ud56d\ubaa9 \uc800\uc7a5 \uc624\ub958:",t)}}}}catch(e){console.error("\uccad\uad6c\uc11c \uc800\uc7a5 \uc2e4\ud328:",e)}},m);return()=>clearTimeout(e)},[C,f,n,w]);const B={companyInfo:j,setCompanyInfo:k,clients:N,setClients:E,workItems:A,setWorkItems:T,invoices:C,setInvoices:R,estimates:I,setEstimates:P,schedules:O,setSchedules:U,units:L,setUnits:D,categories:K,setCategories:G,stampImage:M,setStampImage:H,getCompletedWorkItems:()=>A.filter(e=>"\uc644\ub8cc"===e.status),getCompletedWorkItemsByClient:e=>A.filter(t=>t.clientId===e&&"\uc644\ub8cc"===t.status),addWorkItemToInvoice:function(e){var t,r,a,n,s,o,i,l,d,c,u;let m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const g=null!==m?m:null!==(t=e.quantity)&&void 0!==t?t:1,h=null!==(r=null!==p&&void 0!==p?p:e.defaultPrice)&&void 0!==r?r:0,v=parseInt(String(null!==(a=e.laborPersons)&&void 0!==a?a:0),10)||0,b=parseInt(String(null!==(n=e.laborUnitRate)&&void 0!==n?n:0),10)||0,x=parseInt(String(null!==(s=e.laborPersonsGeneral)&&void 0!==s?s:0),10)||0,y=parseInt(String(null!==(o=e.laborUnitRateGeneral)&&void 0!==o?o:0),10)||0,f=v*b+x*y;return{name:e.name,quantity:g,unit:null!==(i=e.unit)&&void 0!==i?i:"",unitPrice:h,total:g*h+f,laborPersons:v,laborUnitRate:b,laborPersonsGeneral:x,laborUnitRateGeneral:y,description:null!==(l=e.description)&&void 0!==l?l:"",category:null!==(d=e.category)&&void 0!==d?d:"",date:null!==(c=e.date)&&void 0!==c?c:"",notes:null!==(u=e.notes)&&void 0!==u?u:""}},convertEstimateToWorkItems:e=>{const t=I.find(t=>t.id===e);if(!t)return[];const r=Math.max(0,...A.map(e=>{const t=Number(e.id);return Number.isFinite(t)?t:0})),n=t.items.map((e,a)=>{var n;return{id:r+a+1,clientId:t.clientId,clientName:t.clientName,workplaceId:t.workplaceId,workplaceName:t.workplaceName,projectName:t.projectName,name:e.name,category:e.category,defaultPrice:"number"===typeof e.unitPrice?e.unitPrice:0,quantity:"number"===typeof e.quantity?e.quantity:0,unit:e.unit,description:e.description,status:"\uc608\uc815",date:(new Date).toISOString().split("T")[0],notes:null!==(n=e.notes)&&void 0!==n?n:""}});return T(e=>[...e,...n]),P(t=>t.map(t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{status:"\uc791\uc5c5 \uc804\ud658\ub428"}):t)),(async()=>{if(f&&o.supabase)try{const c=e=>{var t;return null!==(t={"\uc608\uc815":"planned","\uc9c4\ud589\uc911":"in_progress","\uc644\ub8cc":"completed","\ubcf4\ub958":"on_hold"}[e])&&void 0!==t?t:"planned"};for(const e of n){var t,r,a,s,i,l,d;const n="number"===typeof e.workplaceId&&e.workplaceId>0&&!isNaN(e.workplaceId)?e.workplaceId:null;await o.supabase.from("work_items").insert({user_id:f,client_id:e.clientId,client_name:e.clientName,workplace_id:n,workplace_name:e.workplaceName,project_name:e.projectName,name:e.name,category:null!==(t=e.category)&&void 0!==t?t:"",default_price:null!==(r=e.defaultPrice)&&void 0!==r?r:0,quantity:null!==(a=e.quantity)&&void 0!==a?a:0,unit:null!==(s=e.unit)&&void 0!==s?s:"",description:null!==(i=e.description)&&void 0!==i?i:"",status:c(null!==(l=e.status)&&void 0!==l?l:"\uc608\uc815"),start_date:e.date,notes:null!==(d=e.notes)&&void 0!==d?d:"",labor_persons:0,labor_unit_rate:0,labor_persons_general:0,labor_unit_rate_general:0})}await o.supabase.from("estimates").update({status:p("\uc791\uc5c5 \uc804\ud658\ub428")}).eq("estimate_number",e).eq("user_id",f)}catch(c){console.error("\uacac\uc801\uc11c \u2192 \uc791\uc5c5 \ud56d\ubaa9 \ubcc0\ud658 \uc911 Supabase \uc800\uc7a5 \uc2e4\ud328:",c)}})(),n},saveSchedule:async e=>{if(o.supabase)try{const t={user_id:f||null,title:e.title,description:e.description||null,schedule_type:e.scheduleType,start_date:e.startDate,start_time:e.startTime||null,end_date:e.endDate||null,end_time:e.endTime||null,all_day:e.allDay,client_id:e.clientId||null,client_name:e.clientName||null,workplace_id:e.workplaceId||null,workplace_name:e.workplaceName||null,project_name:e.projectName||null,status:e.status,priority:e.priority,reminder_enabled:e.reminderEnabled,reminder_minutes_before:e.reminderMinutesBefore||null,is_recurring:e.isRecurring||!1,recurrence_rule:e.recurrenceRule||null,location:e.location||null,attendees:e.attendees||null,notes:e.notes||null,attachments:e.attachments||null,updated_at:(new Date).toISOString()};if(e.id){const r=o.supabase.from("schedules").update(t).eq("schedule_id",e.id);f&&r.eq("user_id",f);const{error:n}=await r;if(n)throw n;U(r=>r.map(r=>r.id===e.id?(0,a.A)((0,a.A)({},e),{},{updatedAt:t.updated_at}):r)),c((0,a.A)((0,a.A)({},e),{},{updatedAt:t.updated_at}))}else{const{data:e,error:r}=await o.supabase.from("schedules").insert((0,a.A)((0,a.A)({},t),{},{created_at:(new Date).toISOString()})).select().single();if(r)throw r;const n={id:e.schedule_id,userId:e.user_id,title:e.title,description:e.description||void 0,scheduleType:e.schedule_type,startDate:e.start_date,startTime:e.start_time||void 0,endDate:e.end_date||void 0,endTime:e.end_time||void 0,allDay:e.all_day,clientId:e.client_id||void 0,clientName:e.client_name||void 0,workplaceId:e.workplace_id||void 0,workplaceName:e.workplace_name||void 0,projectName:e.project_name||void 0,status:e.status,priority:e.priority,reminderEnabled:e.reminder_enabled,reminderMinutesBefore:e.reminder_minutes_before||void 0,isRecurring:e.is_recurring||!1,recurrenceRule:e.recurrence_rule||void 0,location:e.location||void 0,attendees:e.attendees||void 0,notes:e.notes||void 0,attachments:e.attachments||void 0,createdAt:e.created_at,updatedAt:e.updated_at};U(e=>[...e,n].sort((e,t)=>e.startDate.localeCompare(t.startDate))),c(n)}}catch(t){throw console.error("\uc77c\uc815 \uc800\uc7a5 \uc2e4\ud328:",t),t}},deleteSchedule:async e=>{if(o.supabase)try{const t=o.supabase.from("schedules").delete().eq("schedule_id",e);f&&t.eq("user_id",f);const{error:r}=await t;if(r)throw r;U(t=>t.filter(t=>t.id!==e)),d(e)}catch(t){throw console.error("\uc77c\uc815 \uc0ad\uc81c \uc2e4\ud328:",t),t}},loading:n,error:l};return n?(0,u.jsx)(b,{}):l?(0,u.jsx)(x,{v0:l,v1:()=>window.location.href="/"}):(0,u.jsx)(y,{v0:(0,u.jsx)(g.Provider,{value:B,children:t})})}}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,r),s.exports}r.m=e,(()=>{var e=[];r.O=(t,a,n,s)=>{if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],n=e[c][1],s=e[c][2];for(var i=!0,l=0;l<a.length;l++)(!1&s||o>=s)&&Object.keys(r.O).every(e=>r.O[e](a[l]))?a.splice(l--,1):(i=!1,s<o&&(o=s));if(i){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,n,s]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(a,n){if(1&n&&(a=this(a)),8&n)return a;if("object"===typeof a&&a){if(4&n&&a.__esModule)return a;if(16&n&&"function"===typeof a.then)return a}var s=Object.create(null);r.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var i=2&n&&a;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>o[e]=()=>a[e]);return o.default=()=>a,r.d(s,o),s}})(),r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,a)=>(r.f[a](e,t),t),[])),r.u=e=>"static/js/"+e+"."+{28:"2bebae8e",93:"75a12726",217:"8e4bba27",288:"62c9b4b6",347:"3b4de98b",355:"9fcb5943",399:"9de48e49",648:"83727047",686:"1d698c08",703:"9dda3489",776:"43b535c8",940:"64d615e5"}[e]+".chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="construction-management-frontend:";r.l=(a,n,s,o)=>{if(e[a])e[a].push(n);else{var i,l;if(void 0!==s)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+s){i=u;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",t+s),i.src=a),e[a]=[n];var m=(t,r)=>{i.onerror=i.onload=null,clearTimeout(p);var n=e[a];if(delete e[a],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach(e=>e(r)),t)return t(r)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),l&&document.head.appendChild(i)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="https://bluesky78060.github.io/Architecture-Management/",(()=>{var e={792:0};r.f.j=(t,a)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var s=new Promise((r,a)=>n=e[t]=[r,a]);a.push(n[2]=s);var o=r.p+r.u(t),i=new Error;r.l(o,a=>{if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",i.name="ChunkLoadError",i.type=s,i.request=o,n[1](i)}},"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,a)=>{var n,s,o=a[0],i=a[1],l=a[2],d=0;if(o.some(t=>0!==e[t])){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(l)var c=l(r)}for(t&&t(a);d<o.length;d++)s=o[d],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(c)},a=self.webpackChunkconstruction_management_frontend=self.webpackChunkconstruction_management_frontend||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=r.O(void 0,[96],()=>r(568));a=r.O(a)})();
//# sourceMappingURL=main.5f430218.js.map