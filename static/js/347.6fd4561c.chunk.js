"use strict";(self.webpackChunkconstruction_management_frontend=self.webpackChunkconstruction_management_frontend||[]).push([[347],{4491:(e,t,a)=>{a.d(t,{_:()=>i});var r=a(9198);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{value:t,onChange:a,closeOnSelect:i=!0}=e,[s,n]=(0,r.useState)(!1),[l,d]=(0,r.useState)(()=>new Date),o=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(null==t||""===t)return;const e=t.split("-").map(e=>parseInt(e,10)),a=e[0],r=e[1];if(Number.isFinite(a)&&Number.isFinite(r)){const e=1;d(new Date(a,r-e,e))}},[t]),(0,r.useEffect)(()=>{const e=e=>{const t=o.current;null===t||t.contains(e.target)||n(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const c=e=>String(e).padStart(2,"0");return{open:s,setOpen:n,month:l,setMonth:d,prevMonth:()=>d(e=>new Date(e.getFullYear(),e.getMonth()-1,1)),nextMonth:()=>d(e=>new Date(e.getFullYear(),e.getMonth()+1,1)),pickDate:e=>{if(null==e||!Number.isFinite(e)||e<=0)return;const t=l.getFullYear(),r=l.getMonth()+1,s="".concat(t,"-").concat(c(r),"-").concat(c(e));null===a||void 0===a||a(s),i&&n(!1)},getCalendarGrid:()=>{const e=new Date(l.getFullYear(),l.getMonth(),1).getDay(),t=new Date(l.getFullYear(),l.getMonth()+1,0).getDate(),a=[];for(let i=0;i<e;i++)a.push(null);for(let i=1;i<=t;i++)a.push(i);const r=[];for(let i=0;i<a.length;i+=7)r.push(a.slice(i,i+7));return r},containerRef:o}}},5568:(e,t,a)=>{a.d(t,{Q9:()=>n,hR:()=>i,hm:()=>s});var r=a(5644);const i={SEOUL_AREA_CODE_LENGTH:2,STANDARD_AREA_CODE_LENGTH:3,MIN_DIGITS_FOR_AREA_CODE:3,MIN_DIGITS_FOR_FIRST_HYPHEN:7,MAX_PHONE_DIGITS:11,SEOUL_DIGITS_THRESHOLD:9,LAST_FOUR_DIGITS:4,SEOUL_MIDDLE_START:2,SEOUL_MIDDLE_END:6,SEOUL_TOTAL_MAX:10,STANDARD_MIDDLE_START:3,STANDARD_MIDDLE_END:7},s={MAX_DIGITS:10,FIRST_PART_LENGTH:3,SECOND_PART_LENGTH:5},n={AUTO_SAVE_DELAY:3*r.G1,SESSION_TIMEOUT:60*r.Rc*r.G1}},6520:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(6601),i=(a(9198),a(5582));const s=(0,r.FZ)(e=>(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 dark:bg-black dark:bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:e.v0}),(0,i.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:e.v1}),(0,i.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,i.jsx)("button",{onClick:e.v2,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:e.v3}),(0,i.jsx)("button",{onClick:e.v4,className:"px-4 py-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded",children:e.v5})]})]})}),{name:"ConfirmDialog_1",portals:["v0","v1","v3","v5"]}),n=e=>{let{open:t,title:a,message:r,confirmText:n="\ud655\uc778",cancelText:l="\ucde8\uc18c",onConfirm:d,onCancel:o}=e;return t?(0,i.jsx)(s,{v0:a,v1:r,v2:o,v3:l,v4:d,v5:n}):null}},7347:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var r=a(2555),i=a(6601),s=a(9198),n=a(4623),l=a(3515),d=a(1129),o=a(3688),c=a(5582);const m=(0,i.FZ)(e=>(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,c.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2",children:"\ucd1d \uacac\uc801\uc11c"}),(0,c.jsxs)("p",{className:"text-base font-bold text-gray-900 dark:text-gray-100",children:[e.v0,"\uac74"]})]}),(0,c.jsx)("div",{className:"bg-indigo-500 dark:bg-indigo-600 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12",children:e.v1})]})}),(0,c.jsx)("div",{className:"bg-green-100 dark:bg-green-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2",children:"\uc2b9\uc778\ub41c \uacac\uc801\uc11c"}),(0,c.jsxs)("p",{className:"text-base font-bold text-gray-900 dark:text-gray-100",children:[e.v2,"\uac74"]})]}),(0,c.jsx)("div",{className:"bg-green-500 dark:bg-green-600 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12",children:e.v3})]})}),(0,c.jsx)("div",{className:"bg-yellow-100 dark:bg-orange-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2",children:"\uac80\ud1a0 \uc911\uc778 \uacac\uc801\uc11c"}),(0,c.jsxs)("p",{className:"text-base font-bold text-gray-900 dark:text-gray-100",children:[e.v4,"\uac74"]})]}),(0,c.jsx)("div",{className:"bg-orange-500 dark:bg-orange-600 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12",children:e.v5})]})}),(0,c.jsx)("div",{className:"bg-purple-100 dark:bg-purple-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2",children:"\ucd1d \uacac\uc801 \uae08\uc561"}),(0,c.jsxs)("p",{className:"text-base font-bold text-gray-900 dark:text-gray-100",children:[e.v6,"\uc6d0"]})]}),(0,c.jsx)("div",{className:"bg-purple-500 dark:bg-purple-600 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12",children:e.v7})]})})]}),{name:"StatsCards_1",portals:["v0","v1","v2","v3","v4","v5","v6","v7"]}),u=function(e){let{items:t,format:a}=e;const r=t.length,i=t.filter(e=>"\uc2b9\uc778\ub428"===e.status).length,s=t.filter(e=>"\uac80\ud1a0\uc911"===e.status).length,u=t.reduce((e,t)=>{const a=Number(t.totalAmount);return e+(Number.isFinite(a)?a:0)},0);return(0,c.jsx)(m,{v0:r,v1:(0,c.jsx)(n.A,{className:"h-6 w-6","aria-hidden":"true"}),v2:i,v3:(0,c.jsx)(l.A,{className:"h-6 w-6","aria-hidden":"true"}),v4:s,v5:(0,c.jsx)(d.A,{className:"h-6 w-6","aria-hidden":"true"}),v6:a(u),v7:(0,c.jsx)(o.A,{className:"h-6 w-6","aria-hidden":"true"})})};var x=a(6520);const g=(0,i.FZ)(e=>(0,c.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-md shadow-sm p-3 mb-4",children:(0,c.jsxs)("div",{className:"flex items-center space-x-3 flex-wrap",children:[(0,c.jsx)("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-300",children:"\ud544\ud130:"}),(0,c.jsx)("div",{className:"relative inline-flex items-center",children:(0,c.jsxs)("select",{id:"estimate-client-filter",name:"estimate-client-filter",value:e.v0,onChange:e.v1,className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 pr-8 py-1.5 bg-white dark:bg-gray-700 text-xs text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-indigo-500 appearance-none cursor-pointer min-w-0",children:[(0,c.jsx)("option",{value:"",children:"\uc804\uccb4 \uac74\ucd95\uc8fc"}),e.v2]})}),(0,c.jsx)("div",{className:"relative inline-flex items-center",children:(0,c.jsxs)("select",{id:"estimate-status-filter",name:"estimate-status-filter",value:e.v3,onChange:e.v4,className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 pr-8 py-1.5 bg-white dark:bg-gray-700 text-xs text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-indigo-500 appearance-none cursor-pointer min-w-0",children:[(0,c.jsx)("option",{value:"",children:"\uc804\uccb4 \uc0c1\ud0dc"}),e.v5]})}),(0,c.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:e.v6}),e.v7]})}),{name:"FilterBar_1",portals:["v2","v5","v6","v7"]}),h=function(e){let{clients:t,statuses:a,selectedClient:r,selectedStatus:i,filteredCount:s,totalCount:n,onChangeClient:l,onChangeStatus:d,onReset:o}=e;const m=""!==String(null!==r&&void 0!==r?r:""),u=""!==(null!==i&&void 0!==i?i:"").trim(),x=m||u;return(0,c.jsx)(g,{v0:null==r?"":String(r),v1:e=>l(e.target.value),v2:t.map(e=>(0,c.jsx)("option",{value:String(e.id),children:e.name},e.id)),v3:i,v4:e=>d(e.target.value),v5:a.map(e=>(0,c.jsx)("option",{value:e,children:e},e)),v6:x?"".concat(s,"\uac1c"):"\ucd1d ".concat(n,"\uac1c"),v7:x&&(0,c.jsx)("button",{onClick:o,className:"text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 underline",children:"\ucd08\uae30\ud654"})})};var p=a(9529);const v=(0,i.FZ)(e=>(0,c.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,c.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-3 py-3 text-center text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:(0,c.jsx)("input",{id:"estimate-select-all",name:"estimate-select-all",type:"checkbox",className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600",checked:e.v0,onChange:e.v1,title:"\uc804\uccb4 \uc120\ud0dd"})}),(0,c.jsx)("th",{className:"px-3 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uacac\uc801\uc11c \ubc88\ud638"}),(0,c.jsx)("th",{className:"px-3 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uac74 \ucd95 \uc8fc"}),(0,c.jsx)("th",{className:"px-3 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\ud504\ub85c\uc81d\ud2b8"}),(0,c.jsx)("th",{className:"px-3 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uc791 \uc5c5 \uc7a5"}),(0,c.jsx)("th",{className:"px-3 py-3 text-center text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uacac\uc801 \uae08\uc561"}),(0,c.jsx)("th",{className:"px-3 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uc0c1\xa0\xa0\xa0\xa0\ud0dc"}),(0,c.jsx)("th",{className:"px-3 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\uc720\ud6a8\uae30\ud55c"}),(0,c.jsx)("th",{className:"px-3 py-3 text-center text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-20",children:"\uc791\xa0\xa0\xa0\xa0\uc5c5"})]})}),(0,c.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.v2})]})}),{name:"EstimatesTable_1",portals:["v2"]}),b=function(e){let{items:t,allSelected:a,onToggleAll:r,onToggleOne:i,format:s,getStatusColor:n,onEdit:l,onPrint:d,onDelete:o,onConvert:m,onStatusChange:u,selectedIds:x,statuses:g}=e;return(0,c.jsx)(v,{v0:a,v1:e=>r(e.target.checked),v2:t.map((e,t)=>{var a;return(0,c.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,c.jsx)("td",{className:"px-3 py-2 text-left w-10",children:(0,c.jsx)("input",{id:"estimate-select-".concat(e.id),name:"estimate-select-".concat(e.id),type:"checkbox",className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600",checked:x.includes(e.id),onChange:t=>i(e.id,t.target.checked),title:"\uc120\ud0dd"})}),(0,c.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 dark:text-gray-100",children:e.id}),(0,c.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 dark:text-gray-100",children:e.clientName}),(0,c.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 dark:text-gray-100",children:e.projectName}),(0,c.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 dark:text-gray-100",children:e.workplaceName}),(0,c.jsxs)("td",{className:"px-3 py-2 text-sm text-gray-900 dark:text-gray-100 text-center",children:[s(e.totalAmount),"\uc6d0"]}),(0,c.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,c.jsx)("select",{id:"estimate-status-".concat(e.id),name:"estimate-status-".concat(e.id),className:"px-2 py-1 text-xs font-semibold rounded-full border-0 ".concat(n(e.status)," focus:outline-none focus:ring-0"),value:e.status,onChange:t=>u(e.id,t.target.value),title:"\uacac\uc801\uc11c \uc0c1\ud0dc \ubcc0\uacbd",children:g.map(e=>(0,c.jsx)("option",{value:e,children:e},e))})}),(0,c.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 dark:text-gray-100",children:null!==(a=e.validUntil)&&void 0!==a?a:"-"}),(0,c.jsx)("td",{className:"px-3 py-2 text-center text-sm font-medium",children:(0,c.jsxs)("div",{className:"flex items-center justify-center",children:[(0,c.jsx)(p.A,{label:"\ud3b8\uc9d1",children:(0,c.jsx)("button",{onClick:()=>l(e),className:"text-blue-600 hover:text-blue-900 mx-2",title:"\uacac\uc801\uc11c \ud3b8\uc9d1",children:"\u270f\ufe0f"})}),(0,c.jsx)(p.A,{label:"\ucd9c\ub825",children:(0,c.jsx)("button",{onClick:()=>d(e),className:"text-green-600 hover:text-green-900 mx-2",title:"\uacac\uc801\uc11c \ucd9c\ub825",children:"\ud83d\udda8\ufe0f"})}),(0,c.jsx)(p.A,{label:"\uc0ad\uc81c",children:(0,c.jsx)("button",{onClick:()=>o(e.id),className:"text-red-600 hover:text-red-900 mx-2",title:"\uacac\uc801\uc11c \uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})}),"\uc2b9\uc778\ub428"===e.status&&(0,c.jsx)(p.A,{label:"\uc791\uc5c5 \ud56d\ubaa9\uc73c\ub85c \ubcc0\ud658",children:(0,c.jsx)("button",{onClick:()=>m(e.id),className:"text-purple-600 hover:text-purple-900 mx-2",title:"\uc791\uc5c5 \ud56d\ubaa9\uc73c\ub85c \ubcc0\ud658",children:"\ud83d\udd04"})})]})})]},"".concat(e.id,"-").concat(t))})})};var y=a(4491),f=a(5826),N=a(109),j=a(8815);const k=e=>{if(0===e)return"\uc601";const t=["","\uc77c","\uc774","\uc0bc","\uc0ac","\uc624","\uc721","\uce60","\ud314","\uad6c"],a=["","\uc2ed","\ubc31","\ucc9c"],r=["","\ub9cc","\uc5b5","\uc870"],i=e=>{let r="";const i=e.toString().split("").map(Number);for(let s=0;s<i.length;s++){const e=i[s],n=i.length-1-s;0!==e&&(1===e&&1===n&&i.length>1?r+=a[n]:r+=t[e]+a[n])}return r};let s="";const n=[];let l=Math.abs(e);for(;l>0;)n.unshift(l%1e4),l=Math.floor(l/1e4);for(let d=0;d<n.length;d++){const e=n[d];if(0===e)continue;s+=i(e)+r[n.length-1-d]}return(e<0?"\ub9c8\uc774\ub108\uc2a4 ":"")+s};var w=a(7875),I=a(8974);var _=a(5568);const A=(0,i.FZ)(e=>(0,c.jsxs)("div",{className:"p-4",children:[(0,c.jsx)("div",{className:"mb-6",children:(0,c.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"\uacac\uc801\uc11c \uad00\ub9ac"}),(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"\uac74\ucd95\uc8fc\ubcc4 \uacac\uc801\uc11c\ub97c \uad00\ub9ac\ud558\uace0 \uc791\uc5c5 \ud56d\ubaa9\uc73c\ub85c \ubcc0\ud658\ud558\uc138\uc694"})]}),(0,c.jsxs)("div",{className:"flex space-x-2",children:[e.v0,(0,c.jsxs)("button",{onClick:e.v1,className:"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm hover:shadow-md transition-shadow duration-300 text-gray-700 dark:text-gray-200 font-medium",children:[(0,c.jsx)("span",{className:"text-gray-500 dark:text-gray-400 mr-2",children:"\ud83d\udcc1"}),(0,c.jsx)("span",{className:"text-xs font-semibold",children:"\ud15c\ud50c\ub9bf \ub2e4\uc6b4\ub85c\ub4dc"})]}),(0,c.jsxs)("button",{onClick:e.v2,className:"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm hover:shadow-md transition-shadow duration-300 text-gray-700 dark:text-gray-200 font-medium",children:[(0,c.jsx)("span",{className:"text-green-500 dark:text-green-400 mr-2",children:"\ud83d\udce5"}),(0,c.jsx)("span",{className:"text-xs font-semibold",children:"Excel \ub0b4\ubcf4\ub0b4\uae30"})]}),(0,c.jsxs)("label",{className:"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm hover:shadow-md transition-shadow duration-300 text-gray-700 dark:text-gray-200 font-medium cursor-pointer",children:[(0,c.jsx)("span",{className:"text-blue-500 dark:text-blue-400 mr-2",children:"\ud83d\udce4"}),(0,c.jsx)("span",{className:"text-xs font-semibold",children:"Excel \uac00\uc838\uc624\uae30"}),(0,c.jsx)("input",{type:"file",accept:".xlsx,.xls",onChange:e.v3,className:"hidden"})]}),(0,c.jsxs)("button",{onClick:e.v4,className:"flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-300 font-bold",children:[(0,c.jsx)("span",{className:"text-yellow-300 mr-2",children:"\u2728"}),(0,c.jsx)("span",{className:"text-xs font-bold",children:"\uc0c8 \uacac\uc801\uc11c"})]})]})]})}),e.v5,e.v6,e.v7,e.v8,e.v9,e.v10,e.v11,(0,c.jsx)("div",{style:e.v12,children:e.v13})]}),{name:"Estimates_1",portals:["v0","v5","v6","v7","v8","v9","v10","v11","v13"]}),C=()=>{var e,t,i,n;const{clients:l,estimates:d,setEstimates:o,convertEstimateToWorkItems:m,companyInfo:g,units:p,categories:v}=(0,f.n)(),C=(0,N.Zp)(),S=(0,s.useRef)(null),{format:E,parse:D}=(0,w.g)(),T=function(){const[e,t]=(0,s.useState)({});return{open:(0,s.useCallback)(e=>t(t=>(0,r.A)((0,r.A)({},t),{},{[e]:!0})),[]),close:(0,s.useCallback)(e=>t(t=>(0,r.A)((0,r.A)({},t),{},{[e]:!1})),[]),toggle:(0,s.useCallback)(e=>t(t=>(0,r.A)((0,r.A)({},t),{},{[e]:!t[e]})),[]),isOpen:(0,s.useCallback)(t=>!!e[t],[e]),reset:(0,s.useCallback)(()=>t({}),[]),set:t}}(),F=(0,I.R)(),[q,U]=(0,s.useState)({selectedIds:[]}),[P,O]=(0,s.useState)({showModal:!1,editingEstimate:null,printEstimate:null,showConfirmDelete:!1,noDueDate:!1}),[M,R]=(0,s.useState)({clientId:"",workplaceId:"",projectName:"",title:"",validUntil:"",category:"",status:"\uac80\ud1a0\uc911",notes:"",items:[{category:"",name:"",description:"",quantity:"",unit:"",unitPrice:"",notes:""}]}),L=(0,s.useRef)(null),Y=(0,y._)({value:M.validUntil,onChange:e=>R(t=>(0,r.A)((0,r.A)({},t),{},{validUntil:e}))});(0,s.useEffect)(()=>{if(!T.isOpen("estimateForm"))return;const e=L.current;null!==e&&void 0!==e&&(e.scrollTop=e.scrollHeight)},[M.items.length,T]);const G=["\uac80\ud1a0\uc911","\uc2b9\uc778\ub428","\uac70\ubd80\ub428","\uc218\uc815 \uc694\uccad","\uc791\uc5c5 \uc804\ud658\ub428"],H=e=>{var t;return null!==(t={"\uac80\ud1a0\uc911":"draft","\uc2b9\uc778\ub428":"approved","\uac70\ubd80\ub428":"rejected","\uc218\uc815 \uc694\uccad":"sent","\uc791\uc5c5 \uc804\ud658\ub428":"approved"}[e])&&void 0!==t?t:"draft"};(0,s.useEffect)(()=>{if(null===P.printEstimate||void 0===P.printEstimate)return;const e=setTimeout(()=>{O(e=>(0,r.A)((0,r.A)({},e),{},{printEstimate:null}))},_.Q9.AUTO_SAVE_DELAY);return()=>clearTimeout(e)},[P.printEstimate]);const z=e=>{var t;const a=l.find(t=>t.id===parseInt(String(e)));return null!==(t=null===a||void 0===a?void 0:a.workplaces)&&void 0!==t?t:[]},Z=d.filter(e=>(""===F.selectedClient||e.clientId===parseInt(F.selectedClient))&&(""===F.selectedStatus||e.status===F.selectedStatus)),Q=Z.map(e=>e.id),W=q.selectedIds.length>0&&q.selectedIds.length===Q.length,X=e=>{const{name:t,value:a}=e.target,i=parseInt(a),s="clientId"===t||"workplaceId"===t?0===i||isNaN(i)?0:i:a;R(e=>{const a=(0,r.A)((0,r.A)({},e),{},{[t]:s});if("clientId"===t&&(a.workplaceId=""),"workplaceId"===t){var i;const t=l.find(t=>t.id===("string"===typeof e.clientId?parseInt(e.clientId):e.clientId)),r=null===t||void 0===t||null===(i=t.workplaces)||void 0===i?void 0:i.find(e=>e.id===("string"===typeof s?parseInt(s):s));""===a.projectName&&null!==(null===r||void 0===r?void 0:r.description)&&void 0!==(null===r||void 0===r?void 0:r.description)&&""!==(null===r||void 0===r?void 0:r.description)&&(a.projectName=r.description)}return a})},J=(e,t,a)=>{const i=[...M.items];if("unitPrice"===t||"quantity"===t){var s,n;const r=String(null!==a&&void 0!==a?a:"").replace(/[^\d-]/g,"");i[e][t]=""===r||"-"===r?"":D(a);const l=parseInt(String(null!==(s=i[e].quantity)&&void 0!==s?s:0),10),d=parseInt(String(null!==(n=i[e].unitPrice)&&void 0!==n?n:0),10),o=0===l||isNaN(l)?0:l,c=0===d||isNaN(d)?0:d;i[e].total=o*c}else"name"!==t&&"description"!==t&&"unit"!==t&&"notes"!==t&&"category"!==t||(i[e][t]=a);R(e=>(0,r.A)((0,r.A)({},e),{},{items:i}))},V=()=>M.items.reduce((e,t)=>{var a,r;const i=parseInt(String(null!==(a=t.quantity)&&void 0!==a?a:0),10),s=parseInt(String(null!==(r=t.unitPrice)&&void 0!==r?r:0),10);return e+(0===i||isNaN(i)?0:i)*(0===s||isNaN(s)?0:s)},0),B=()=>{R({clientId:"",workplaceId:"",projectName:"",title:"",validUntil:"",category:"",status:"\uac80\ud1a0\uc911",notes:"",items:[{category:"",name:"",description:"",quantity:"",unit:"",unitPrice:"",notes:""}]}),O(e=>(0,r.A)((0,r.A)({},e),{},{editingEstimate:null})),T.close("estimateForm")},[$,K]=(0,s.useState)(null),[ee,te]=(0,s.useState)(null);return(0,c.jsx)(A,{v0:q.selectedIds.length>0&&(0,c.jsxs)("button",{onClick:()=>T.open("confirmDelete"),className:"flex items-center justify-center px-4 py-2.5 bg-white border border-red-200 rounded-full shadow-sm hover:shadow-md transition-shadow duration-300 text-gray-700 font-medium",children:[(0,c.jsx)("span",{className:"text-red-600 mr-2",children:"\ud83d\uddd1\ufe0f"}),(0,c.jsxs)("span",{className:"text-xs font-semibold",children:["\uc0ad\uc81c (",q.selectedIds.length,")"]})]}),v1:()=>{j.Xu.estimates()},v2:()=>{j.bJ.estimates(d)},v3:async e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(null!==a&&void 0!==a){try{const e=await j.p5.estimates(a);o(t=>{const a=(null!==e&&void 0!==e?e:[]).map((e,t)=>{var a,r,i,s,n,l,d,o,c;return{id:String(null!==(a=null===e||void 0===e?void 0:e.id)&&void 0!==a?a:"EST-IMP-".concat(Date.now(),"-").concat(t)),clientId:Number(null!==(r=null===e||void 0===e?void 0:e.clientId)&&void 0!==r?r:0),clientName:null!==(i=null===e||void 0===e?void 0:e.clientName)&&void 0!==i?i:"",workplaceId:null!==(null===e||void 0===e?void 0:e.workplaceId)&&void 0!==(null===e||void 0===e?void 0:e.workplaceId)?Number(e.workplaceId):void 0,workplaceName:null!==(s=null===e||void 0===e?void 0:e.workplaceName)&&void 0!==s?s:"",workplaceAddress:null!==(n=null===e||void 0===e?void 0:e.workplaceAddress)&&void 0!==n?n:"",projectName:null!==(l=null===e||void 0===e?void 0:e.projectName)&&void 0!==l?l:"",title:null!==(null===e||void 0===e?void 0:e.title)&&void 0!==(null===e||void 0===e?void 0:e.title)&&""!==(null===e||void 0===e?void 0:e.title)?e.title:null!==(null===e||void 0===e?void 0:e.projectName)&&void 0!==(null===e||void 0===e?void 0:e.projectName)&&""!==(null===e||void 0===e?void 0:e.projectName)?e.projectName:"\uacac\uc801",date:null===e||void 0===e?void 0:e.date,validUntil:null===e||void 0===e?void 0:e.validUntil,status:null!==(d=null===e||void 0===e?void 0:e.status)&&void 0!==d?d:"\uc784\uc2dc\uc800\uc7a5",totalAmount:Number(null!==(o=null===e||void 0===e?void 0:e.totalAmount)&&void 0!==o?o:0),notes:null!==(c=null===e||void 0===e?void 0:e.notes)&&void 0!==c?c:"",items:Array.isArray(null===e||void 0===e?void 0:e.items)?e.items.map(e=>{var t;return{category:null===e||void 0===e?void 0:e.category,name:String(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:""),description:null===e||void 0===e?void 0:e.description,quantity:"number"===typeof(null===e||void 0===e?void 0:e.quantity)||""===(null===e||void 0===e?void 0:e.quantity)?e.quantity:0,unit:null===e||void 0===e?void 0:e.unit,unitPrice:"number"===typeof(null===e||void 0===e?void 0:e.unitPrice)||""===(null===e||void 0===e?void 0:e.unitPrice)?e.unitPrice:0,total:"number"===typeof(null===e||void 0===e?void 0:e.total)?e.total:void 0,notes:null===e||void 0===e?void 0:e.notes}}):[]}});return[...t,...a]}),alert("".concat(e.length,"\uac1c\uc758 \uacac\uc801\uc11c\ub97c \uc131\uacf5\uc801\uc73c\ub85c \uac00\uc838\uc654\uc2b5\ub2c8\ub2e4."))}catch(r){alert("\ud30c\uc77c\uc744 \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}e.target.value=""}},v4:()=>{O(e=>(0,r.A)((0,r.A)({},e),{},{editingEstimate:null})),T.open("estimateForm")},v5:(0,c.jsx)(u,{items:Z,format:E}),v6:(0,c.jsx)(h,{clients:l,statuses:G,selectedClient:F.selectedClient,selectedStatus:F.selectedStatus,filteredCount:Z.length,totalCount:d.length,onChangeClient:e=>F.setSelectedClient(e),onChangeStatus:e=>F.setSelectedStatus(e),onReset:()=>{F.reset(),U({selectedIds:[]})}}),v7:(0,c.jsx)(b,{items:Z,allSelected:W,onToggleAll:e=>U(t=>(0,r.A)((0,r.A)({},t),{},{selectedIds:e?Q:[]})),onToggleOne:(e,t)=>U(a=>{var i,s;return(0,r.A)((0,r.A)({},a),{},{selectedIds:t?Array.from(new Set([...null!==(i=a.selectedIds)&&void 0!==i?i:[],e])):(null!==(s=a.selectedIds)&&void 0!==s?s:[]).filter(t=>t!==e)})}),format:E,getStatusColor:e=>{const t={"\uac80\ud1a0\uc911":"bg-yellow-100 text-yellow-800","\uc2b9\uc778\ub428":"bg-green-100 text-green-800","\uac70\ubd80\ub428":"bg-red-100 text-red-800","\uc218\uc815 \uc694\uccad":"bg-blue-100 text-blue-800","\uc791\uc5c5 \uc804\ud658\ub428":"bg-purple-100 text-purple-800"};return null!==t[e]&&void 0!==t[e]&&""!==t[e]?t[e]:"bg-gray-100 text-gray-800"},onEdit:e=>{var t;R({clientId:e.clientId,workplaceId:null===e.workplaceId||void 0===e.workplaceId||0===e.workplaceId||isNaN(e.workplaceId)?"":e.workplaceId,projectName:null!==e.projectName&&void 0!==e.projectName&&""!==e.projectName?e.projectName:"",title:null!==e.title&&void 0!==e.title&&""!==e.title?e.title:"",validUntil:null!==(t=e.validUntil)&&void 0!==t?t:"",category:"",status:e.status,notes:null!==e.notes&&void 0!==e.notes&&""!==e.notes?e.notes:"",items:e.items.map(e=>({category:e.category,name:e.name,description:e.description,quantity:e.quantity,unit:e.unit,unitPrice:e.unitPrice,notes:null!==e.notes&&void 0!==e.notes&&""!==e.notes?e.notes:""}))}),O(t=>(0,r.A)((0,r.A)({},t),{},{editingEstimate:e,noDueDate:""===e.validUntil||null===e.validUntil||void 0===e.validUntil})),T.open("estimateForm")},onPrint:e=>{try{const a={estimate:e,companyInfo:g};try{localStorage.setItem("quotationPrintData",JSON.stringify(a))}catch(t){}const r=JSON.stringify(a),i="".concat((()=>{const e="https://bluesky78060.github.io/Architecture-Management";if(""!==e.trim())try{let t=new URL(e,window.location.origin).pathname;return t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1)),"".concat(window.location.origin).concat(t)}catch(t){let a=e.trim();return a.startsWith("/")||(a="/".concat(a)),a.length>1&&a.endsWith("/")&&(a=a.slice(0,-1)),"".concat(window.location.origin).concat(a)}return window.location.origin})(),"/quotation-output.html?id=").concat(e.id,"&data=").concat(encodeURIComponent(r)),s=window.open(i,"_blank","width=1200,height=800,scrollbars=yes,resizable=yes"),n=500;if(null===s||void 0===s)return void alert("\ud31d\uc5c5\uc774 \ucc28\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ube0c\ub77c\uc6b0\uc800 \uc124\uc815\uc5d0\uc11c \ud31d\uc5c5\uc744 \ud5c8\uc6a9\ud574\uc8fc\uc138\uc694.");setTimeout(()=>{try{s.focus()}catch(t){}},n)}catch(t){alert("\ucd9c\ub825 \ud654\uba74\uc744 \uc5ec\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},onDelete:e=>{K(e)},onConvert:e=>{te(e)},onStatusChange:(e,t)=>{o(a=>a.map(a=>a.id===e?(0,r.A)((0,r.A)({},a),{},{status:t}):a))},selectedIds:q.selectedIds,statuses:G}),v8:T.isOpen("confirmDelete")&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"\uc120\ud0dd \uc0ad\uc81c"}),(0,c.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["\uc120\ud0dd\ub41c ",q.selectedIds.length,"\uac1c\uc758 \uacac\uc801\uc11c\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."]}),(0,c.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,c.jsx)("button",{className:"btn-secondary",onClick:()=>T.close("confirmDelete"),children:"\ucde8\uc18c"}),(0,c.jsx)("button",{className:"btn-primary bg-red-600 hover:bg-red-700",onClick:async()=>{if(0!==q.selectedIds.length){o(e=>e.filter(e=>!q.selectedIds.includes(e.id))),U(e=>(0,r.A)((0,r.A)({},e),{},{selectedIds:[]})),O(e=>(0,r.A)((0,r.A)({},e),{},{showConfirmDelete:!1}));try{const{supabase:e}=await Promise.resolve().then(a.bind(a,2930));if(null===e||void 0===e)return;const{error:t}=await e.from("estimates").delete().in("estimate_number",q.selectedIds)}catch(e){}}},children:"\uc0ad\uc81c"})]})]})}),v9:(0,c.jsx)(x.A,{open:null!=$,title:"\uacac\uc801\uc11c \uc0ad\uc81c",message:"\uc774 \uacac\uc801\uc11c\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",confirmText:"\uc0ad\uc81c",cancelText:"\ucde8\uc18c",onConfirm:async()=>{if(null!=$){o(e=>e.filter(e=>e.id!==String($))),K(null);try{const{supabase:e}=await Promise.resolve().then(a.bind(a,2930));if(null===e||void 0===e)return;const{error:t}=await e.from("estimates").delete().eq("estimate_number",$)}catch(e){}}},onCancel:()=>K(null)}),v10:(0,c.jsx)(x.A,{open:null!=ee,title:"\uc791\uc5c5 \ud56d\ubaa9\uc73c\ub85c \ubcc0\ud658",message:"\uc774 \uacac\uc801\uc11c\ub97c \uc791\uc5c5 \ud56d\ubaa9\uc73c\ub85c \ubcc0\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",confirmText:"\ubcc0\ud658",cancelText:"\ucde8\uc18c",onConfirm:()=>{if(null==ee)return;const e=m(String(ee));te(null),alert("".concat(e.length,"\uac1c\uc758 \uc791\uc5c5 \ud56d\ubaa9\uc774 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),C("/work-items")},onCancel:()=>te(null)}),v11:T.isOpen("estimateForm")&&(0,c.jsx)("div",{className:"fixed inset-0 bg-gray-800/50 backdrop-blur-sm overflow-y-auto h-full w-full z-50",children:(0,c.jsxs)("div",{className:"relative top-6 mx-auto w-[1100px] max-w-[96vw] shadow-2xl rounded-2xl bg-white/80 dark:bg-gray-800/80 ring-1 ring-black/5 mb-8",children:[(0,c.jsxs)("div",{className:"rounded-t-2xl bg-gradient-to-br from-indigo-50 via-purple-50 to-white dark:bg-gradient-to-br dark:from-gray-800 dark:via-gray-700 dark:to-gray-800 px-8 pt-8 pb-6 text-center",children:[(0,c.jsx)("h3",{className:"text-2xl font-extrabold tracking-tight text-indigo-600 dark:text-indigo-400",children:null!==P.editingEstimate&&void 0!==P.editingEstimate?"\uacac\uc801\uc11c \ud3b8\uc9d1":"\uc0c8 \uacac\uc801\uc11c \uc791\uc131"}),(0,c.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-300",children:"\uacac\uc801 \uae30\ubcf8\uc815\ubcf4\uc640 \ud56d\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),(0,c.jsx)("div",{className:"px-6 pb-6",children:(0,c.jsxs)("form",{id:"estimate-form",onSubmit:async e=>{var t,i,s;if(e.preventDefault(),!P.noDueDate&&(""===M.validUntil||!/^\d{4}-\d{2}-\d{2}$/.test(String(M.validUntil))))return void alert("\uc720\ud6a8\uae30\ud55c\uc744 YYYY-MM-DD \ud615\uc2dd\uc73c\ub85c \uc785\ub825\ud558\uc138\uc694.");for(let a=0;a<M.items.length;a++){var n,c;const e=M.items[a],t=""===e.quantity?0:Number(null!==(n=e.quantity)&&void 0!==n?n:0),r=""===e.unitPrice?0:Number(null!==(c=e.unitPrice)&&void 0!==c?c:0);if(0===t||isNaN(t)||t<=0)return void alert("\ud56d\ubaa9 #".concat(a+1,": \uc218\ub7c9\uc744 \uc785\ub825\ud558\uc138\uc694."));if(0===r||isNaN(r)||r<=0)return void alert("\ud56d\ubaa9 #".concat(a+1,": \ub2e8\uac00\ub97c \uc785\ub825\ud558\uc138\uc694."))}const m=l.find(e=>e.id===M.clientId),u=z(M.clientId).find(e=>e.id===M.workplaceId),x={id:null!==P.editingEstimate&&void 0!==P.editingEstimate?P.editingEstimate.id:"EST-".concat((new Date).getFullYear(),"-").concat(String(d.length+1).padStart(3,"0")),clientId:Number(M.clientId),workplaceId:Number(M.workplaceId),clientName:null!==(t=null===m||void 0===m?void 0:m.name)&&void 0!==t?t:"",workplaceName:null!==(i=null===u||void 0===u?void 0:u.name)&&void 0!==i?i:"",workplaceAddress:null!==(s=null===u||void 0===u?void 0:u.address)&&void 0!==s?s:"",date:null!==P.editingEstimate&&void 0!==P.editingEstimate?P.editingEstimate.date:(new Date).toISOString().split("T")[0],totalAmount:V(),projectName:M.projectName,title:M.title,validUntil:M.validUntil,status:M.status,notes:M.notes,items:M.items.map((e,t)=>{const a=Number(e.unitPrice),i=Number(e.quantity),s=0===a||isNaN(a)?0:a,n=0===i||isNaN(i)?1:i;return(0,r.A)((0,r.A)({},e),{},{id:t+1,total:s*n})})};if(null!==P.editingEstimate&&void 0!==P.editingEstimate){const e=d;o(e=>e.map(e=>{var t;return e.id===(null===(t=P.editingEstimate)||void 0===t?void 0:t.id)?x:e}));try{var g,h,p,v,b,y;const{supabase:t}=await Promise.resolve().then(a.bind(a,2930));if(null===t||void 0===t)return o(e),void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");const r="number"===typeof x.workplaceId&&x.workplaceId>0&&!isNaN(x.workplaceId)?x.workplaceId:null,{data:i,error:s}=await t.from("estimates").update({client_id:x.clientId,client_name:null!==(g=x.clientName)&&void 0!==g?g:"",workplace_id:r,workplace_name:null!==(h=x.workplaceName)&&void 0!==h?h:"",project_name:null!==(p=x.projectName)&&void 0!==p?p:"",title:null!==(v=x.title)&&void 0!==v?v:"",date:x.date,valid_until:null!==(b=x.validUntil)&&void 0!==b?b:null,status:H(x.status),notes:null!==(y=x.notes)&&void 0!==y?y:"",total_amount:x.totalAmount}).eq("estimate_number",x.id).select("estimate_id").single();if(null!==s&&void 0!==s)return o(e),console.error("\uacac\uc801\uc11c \uc218\uc815 \uc624\ub958 \uc0c1\uc138:",{message:s.message,details:s.details,hint:s.hint,code:s.code,"\uc804\uc1a1\ub370\uc774\ud130":{estimate_number:x.id,client_id:x.clientId,client_name:x.clientName,workplace_id:r,workplace_name:x.workplaceName,project_name:x.projectName,title:x.title,date:x.date,valid_until:x.validUntil,status:x.status,notes:x.notes,total_amount:x.totalAmount}}),void alert("\uacac\uc801\uc11c \uc218\uc815 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(s.message,"\n\n\ucf58\uc194(F12)\uc744 \uc5f4\uc5b4 \uc0c1\uc138 \uc815\ubcf4\ub97c \ud655\uc778\ud558\uc138\uc694."));if(null===i||void 0===i)return o(e),void alert("\uacac\uc801\uc11c \uc218\uc815 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");await t.from("estimate_items").delete().eq("estimate_id",i.estimate_id);const n=1,l=x.items.map((e,t)=>{var a,r,s,l,d,o,c;return{estimate_id:i.estimate_id,item_id:t+n,category:null!==(a=e.category)&&void 0!==a?a:"",name:e.name,description:null!==(r=e.description)&&void 0!==r?r:"",quantity:null!==(s=e.quantity)&&void 0!==s?s:0,unit:null!==(l=e.unit)&&void 0!==l?l:"",unit_price:null!==(d=e.unitPrice)&&void 0!==d?d:0,total:null!==(o=e.total)&&void 0!==o?o:0,notes:null!==(c=e.notes)&&void 0!==c?c:""}}),{error:d}=await t.from("estimate_items").insert(l);if(null!==d&&void 0!==d)return o(e),void alert("\uacac\uc801\uc11c \ud56d\ubaa9 \uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(d.message))}catch(_){return o(e),void alert("\uacac\uc801\uc11c \uc218\uc815 \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}else{const e=d;o(e=>[...e,x]);try{var f,N,j,k,w,I;const{supabase:t}=await Promise.resolve().then(a.bind(a,2930));if(null===t||void 0===t)return o(e),void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");const{getCurrentUserId:r}=await Promise.resolve().then(a.bind(a,2930)),i=await r(),s="number"===typeof x.workplaceId&&x.workplaceId>0&&!isNaN(x.workplaceId)?x.workplaceId:null,{data:n,error:l}=await t.from("estimates").insert({estimate_number:x.id,user_id:i,client_id:x.clientId,client_name:null!==(f=x.clientName)&&void 0!==f?f:"",workplace_id:s,workplace_name:null!==(N=x.workplaceName)&&void 0!==N?N:"",project_name:null!==(j=x.projectName)&&void 0!==j?j:"",title:null!==(k=x.title)&&void 0!==k?k:"",date:x.date,valid_until:null!==(w=x.validUntil)&&void 0!==w?w:null,status:H(x.status),notes:null!==(I=x.notes)&&void 0!==I?I:"",total_amount:x.totalAmount}).select("estimate_id").single();if(null!==l&&void 0!==l)return o(e),console.error("\uacac\uc801\uc11c \uc0dd\uc131 \uc624\ub958 \uc0c1\uc138:",{message:l.message,details:l.details,hint:l.hint,code:l.code,"\uc804\uc1a1\ub370\uc774\ud130":{estimate_number:x.id,user_id:i,client_id:x.clientId,client_name:x.clientName,workplace_id:s,workplace_name:x.workplaceName,project_name:x.projectName,title:x.title,date:x.date,valid_until:x.validUntil,status:x.status,notes:x.notes,total_amount:x.totalAmount}}),void alert("\uacac\uc801\uc11c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(l.message,"\n\n\ucf58\uc194(F12)\uc744 \uc5f4\uc5b4 \uc0c1\uc138 \uc815\ubcf4\ub97c \ud655\uc778\ud558\uc138\uc694."));if(null===n||void 0===n)return o(e),void alert("\uacac\uc801\uc11c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");const d=1,c=x.items.map((e,t)=>{var a,r,i,s,l,o,c;return{estimate_id:n.estimate_id,item_id:t+d,category:null!==(a=e.category)&&void 0!==a?a:"",name:e.name,description:null!==(r=e.description)&&void 0!==r?r:"",quantity:null!==(i=e.quantity)&&void 0!==i?i:0,unit:null!==(s=e.unit)&&void 0!==s?s:"",unit_price:null!==(l=e.unitPrice)&&void 0!==l?l:0,total:null!==(o=e.total)&&void 0!==o?o:0,notes:null!==(c=e.notes)&&void 0!==c?c:""}}),{error:m}=await t.from("estimate_items").insert(c);if(null!==m&&void 0!==m)return o(e),void alert("\uacac\uc801\uc11c \ud56d\ubaa9 \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(m.message))}catch(_){return o(e),void alert("\uacac\uc801\uc11c \uc0dd\uc131 \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}B()},className:"space-y-3",children:[(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 p-4",children:[(0,c.jsxs)("div",{className:"flex items-center mb-3 gap-3",children:[(0,c.jsx)("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400",children:"\ud83d\udcc4"}),(0,c.jsx)("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"\uae30\ubcf8 \uc815\ubcf4"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"estimate-client",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uac74\ucd95\uc8fc"}),(0,c.jsxs)("select",{id:"estimate-client",name:"clientId",value:M.clientId,onChange:X,className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,c.jsx)("option",{value:"",children:"\uac74\ucd95\uc8fc \uc120\ud0dd"}),l.map(e=>(0,c.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"estimate-workplace",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc791\uc5c5\uc7a5"}),(0,c.jsxs)("select",{id:"estimate-workplace",name:"workplaceId",value:M.workplaceId,onChange:X,className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,disabled:"string"===typeof M.clientId?""===M.clientId:0===M.clientId||isNaN(M.clientId),children:[(0,c.jsx)("option",{value:"",children:("string"===typeof M.clientId?""===M.clientId:0===M.clientId||isNaN(M.clientId))?"\uc791\uc5c5\uc7a5 \uc120\ud0dd(\uba3c\uc800 \uac74\ucd95\uc8fc\ub97c \uc120\ud0dd\ud558\uc138\uc694)":"\uc791\uc5c5\uc7a5 \uc120\ud0dd"}),("string"===typeof M.clientId?""!==M.clientId:0!==M.clientId&&!isNaN(M.clientId))&&z(M.clientId).map(e=>(0,c.jsxs)("option",{value:e.id,children:[e.name," - ",e.address]},e.id))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"estimate-project",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ud504\ub85c\uc81d\ud2b8\uba85"}),(0,c.jsx)("input",{id:"estimate-project",type:"text",name:"projectName",value:M.projectName,onChange:X,className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"estimate-title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uacac\uc801\uc11c \uc81c\ubaa9"}),(0,c.jsx)("input",{id:"estimate-title",type:"text",name:"title",value:M.title,onChange:X,className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"estimate-valid-until",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc720\ud6a8\uae30\ud55c"}),(0,c.jsxs)("div",{className:"mt-1 relative inline-block",ref:Y.containerRef,children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("input",{id:"estimate-valid-until",type:"text",name:"validUntil",value:M.validUntil,onChange:X,placeholder:"YYYY-MM-DD",inputMode:"numeric",className:"block w-full border border-gray-200 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder-gray-400",onFocus:()=>!P.noDueDate&&Y.setOpen(!0),disabled:P.noDueDate,required:!P.noDueDate}),(0,c.jsx)("button",{type:"button",className:"px-2 py-2 text-gray-600 hover:text-gray-800",onClick:()=>!P.noDueDate&&Y.setOpen(e=>!e),title:"\ub2ec\ub825 \uc5f4\uae30",disabled:P.noDueDate,children:"\ud83d\udcc5"}),(0,c.jsxs)("label",{htmlFor:"estimate-no-due-date",className:"flex items-center gap-1 text-xs text-gray-600 select-none",children:[(0,c.jsx)("input",{id:"estimate-no-due-date",name:"estimate-no-due-date",type:"checkbox",checked:P.noDueDate,onChange:e=>{const t=e.target.checked;O(e=>(0,r.A)((0,r.A)({},e),{},{noDueDate:t})),t&&(Y.setOpen(!1),R(e=>(0,r.A)((0,r.A)({},e),{},{validUntil:""})))}}),"\uc720\ud6a8\uae30\uac04 \uc120\ud0dd \uc548\ud568"]}),P.noDueDate&&(0,c.jsx)("div",{className:"text-[11px] text-gray-500 mt-1",children:"\uc720\ud6a8\uae30\ud55c \uc5c6\uc774 \ubc1c\ud589\ub429\ub2c8\ub2e4. \uacac\uc801 \uc870\uac74\uc744 \ube44\uace0\uc5d0 \uba85\uc2dc\ud558\uc138\uc694."})]}),Y.open&&(0,c.jsxs)("div",{className:"absolute z-50 bg-white border border-gray-300 rounded-md shadow-lg mt-2 p-3",style:{transform:"scale(1)",transformOrigin:"top left"},children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,c.jsx)("button",{type:"button",className:"px-2 py-1 text-sm border rounded",onClick:Y.prevMonth,children:"\u25c0"}),(0,c.jsxs)("div",{className:"text-sm font-medium",children:[Y.month.getFullYear(),"\ub144 ",Y.month.getMonth()+1,"\uc6d4"]}),(0,c.jsx)("button",{type:"button",className:"px-2 py-1 text-sm border rounded",onClick:Y.nextMonth,children:"\u25b6"})]}),(0,c.jsxs)("table",{className:"text-xs select-none",children:[(0,c.jsx)("thead",{children:(0,c.jsx)("tr",{className:"text-left text-gray-600",children:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"].map((e,t)=>(0,c.jsx)("th",{className:"px-2 py-1 ".concat(0===t?"text-red-600":6===t?"text-blue-600":""),children:e},e))})}),(0,c.jsx)("tbody",{children:Y.getCalendarGrid().map((e,t)=>(0,c.jsx)("tr",{className:"text-left",children:e.map((e,t)=>{const a=0===t?"text-red-600":6===t?"text-blue-600":"",r="number"===typeof e&&0!==e&&!Number.isNaN(e);return(0,c.jsx)("td",{className:"px-2 py-1 ".concat(a," ").concat(r?"cursor-pointer hover:bg-gray-100 rounded":""),onClick:()=>{r&&Y.pickDate(e)},children:r?e:""},t)})},t))})]})]})]})]}),(0,c.jsxs)("div",{className:"col-span-2",children:[(0,c.jsx)("label",{htmlFor:"estimate-status-hidden",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"\uc0c1\ud0dc"}),(0,c.jsx)("input",{id:"estimate-status-hidden",name:"estimate-status-hidden",type:"hidden",value:M.status,readOnly:!0}),(0,c.jsx)("div",{className:"flex flex-wrap gap-1.5",children:G.map(e=>{const t=M.status===e,a=t?"bg-indigo-600 dark:bg-indigo-500 text-white border-transparent shadow":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600";return(0,c.jsx)("button",{type:"button",onClick:()=>R(t=>(0,r.A)((0,r.A)({},t),{},{status:e})),className:"px-3 py-1.5 rounded-full text-sm transition ".concat(a),"aria-pressed":t,children:e},e)})})]})]})]}),(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 p-4",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-green-50 dark:bg-green-900 text-green-600 dark:text-green-400",children:"\ud83d\uddc2\ufe0f"}),(0,c.jsx)("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"\uacac\uc801 \ud56d\ubaa9"})]}),(0,c.jsx)("button",{type:"button",onClick:()=>{R(e=>(0,r.A)((0,r.A)({},e),{},{items:[...e.items,{category:"",name:"",description:"",quantity:"",unit:"",unitPrice:"",notes:""}]}))},className:"text-indigo-600 hover:text-indigo-800 text-sm",children:"+ \ud56d\ubaa9 \ucd94\uac00"})]}),(0,c.jsx)("div",{ref:L,className:"space-y-3 max-h-96 overflow-y-auto pr-1",children:M.items.map((e,t)=>(0,c.jsxs)("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-3 bg-gray-50 dark:bg-gray-800",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,c.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["\ud56d\ubaa9 #",t+1]}),M.items.length>1&&(0,c.jsx)("button",{type:"button",onClick:()=>(e=>{M.items.length>1&&R(t=>(0,r.A)((0,r.A)({},t),{},{items:t.items.filter((t,a)=>a!==e)}))})(t),className:"text-red-600 hover:text-red-800 text-sm",children:"\uc0ad\uc81c"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"estimate-item-category-".concat(t),className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\uce74\ud14c\uace0\ub9ac"}),(0,c.jsxs)("select",{id:"estimate-item-category-".concat(t),name:"estimate-item-category-".concat(t),value:e.category,onChange:e=>J(t,"category",e.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,c.jsx)("option",{value:"",children:"\uce74\ud14c\uace0\ub9ac \uc120\ud0dd"}),v.map(e=>(0,c.jsx)("option",{value:e,children:e},e))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"estimate-item-name-".concat(t),className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\ub0b4\uc6a9"}),(0,c.jsx)("input",{id:"estimate-item-name-".concat(t),name:"estimate-item-name-".concat(t),type:"text",value:e.name,onChange:e=>J(t,"name",e.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"estimate-item-description-".concat(t),className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\uc124\uba85"}),(0,c.jsx)("input",{id:"estimate-item-description-".concat(t),name:"estimate-item-description-".concat(t),type:"text",value:e.description,onChange:e=>J(t,"description",e.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-4 gap-2 mb-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"estimate-item-quantity-".concat(t),className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\uc218\ub7c9"}),(0,c.jsx)("input",{id:"estimate-item-quantity-".concat(t),name:"estimate-item-quantity-".concat(t),type:"text",value:""===e.quantity?"":E(Number(e.quantity)),onChange:e=>J(t,"quantity",e.target.value),onFocus:e=>e.target.select(),placeholder:"0",className:"w-full border border-gray-200 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"estimate-item-unitprice-".concat(t),className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\ub2e8\uac00"}),(0,c.jsx)("input",{id:"estimate-item-unitprice-".concat(t),name:"estimate-item-unitprice-".concat(t),type:"text",value:"number"!==typeof e.unitPrice||0===e.unitPrice||isNaN(e.unitPrice)?"":E(Number(e.unitPrice)),onChange:e=>J(t,"unitPrice",e.target.value),onFocus:e=>e.target.select(),placeholder:"0",className:"w-full border border-gray-200 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"estimate-item-unit-".concat(t),className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\ub2e8\uc704"}),(0,c.jsxs)("select",{id:"estimate-item-unit-".concat(t),name:"estimate-item-unit-".concat(t),value:e.unit,onChange:e=>J(t,"unit",e.target.value),className:"w-full border border-gray-200 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,c.jsx)("option",{value:"",children:"\ub2e8\uc704 \uc120\ud0dd"}),p.map(e=>(0,c.jsx)("option",{value:e,children:e},e))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\ud569\uacc4"}),(0,c.jsxs)("div",{className:"w-full bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded px-2 py-1 text-sm",children:[(()=>{const t=Number(e.unitPrice),a=Number(e.quantity),r=0===t||isNaN(t)?0:t,i=0===a||isNaN(a)?1:a;return E(r*i)})(),"\uc6d0"]})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"estimate-item-notes-".concat(t),className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"\ube44\uace0"}),(0,c.jsx)("textarea",{id:"estimate-item-notes-".concat(t),name:"estimate-item-notes-".concat(t),value:e.notes,onChange:e=>J(t,"notes",e.target.value),rows:2,className:"w-full border border-gray-200 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]},t))}),(0,c.jsx)("div",{className:"mt-3 p-3 bg-gray-100 dark:bg-gray-900 rounded",children:(0,c.jsx)("div",{className:"text-right",children:(0,c.jsxs)("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:["\ucd1d \uacac\uc801 \uae08\uc561: ",E(V()),"\uc6d0"]})})})]}),(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 p-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ud2b9\uc774\uc0ac\ud56d \ubc0f \uc870\uac74"}),(0,c.jsx)("textarea",{name:"notes",value:M.notes,onChange:X,rows:3,className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"\ubd80\uac00\uc138 \ubcc4\ub3c4, \uc124\uacc4 \ubcc0\uacbd \uc2dc \ucd94\uac00 \uacac\uc801 \ub4f1..."})]})]})}),(0,c.jsx)("div",{className:"sticky bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700 px-6 py-4 rounded-b-2xl shadow-lg",children:(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,c.jsx)("button",{type:"button",onClick:B,className:"px-6 py-2.5 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition font-medium",children:"\ucde8\uc18c"}),(0,c.jsx)("button",{type:"submit",form:"estimate-form",className:"px-6 py-2.5 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-md transition font-bold",children:null!==P.editingEstimate&&void 0!==P.editingEstimate?"\uc218\uc815":"\uc791\uc131"})]})})]})}),v12:{display:"none"},v13:null!==P.printEstimate&&void 0!==P.printEstimate&&(0,c.jsx)("div",{ref:S,className:"max-w-4xl mx-auto p-6 text-gray-800",children:(0,c.jsxs)("div",{className:"bg-white shadow-xl rounded-xl",children:[(0,c.jsxs)("header",{className:"p-6 border-b border-gray-200 relative overflow-hidden",children:[(0,c.jsx)("div",{className:"absolute -top-16 -left-16 w-40 h-40 bg-blue-500/10 rounded-full","aria-hidden":"true"}),(0,c.jsx)("div",{className:"absolute -bottom-24 -right-12 w-40 h-40 bg-blue-500/10 rounded-full rotate-45","aria-hidden":"true"}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsx)("h2",{className:"text-3xl font-extrabold text-blue-600",children:"\uacac\uc801\uc11c (Quotation)"}),(0,c.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Quotation ID: ",P.printEstimate.id]}),(0,c.jsxs)("p",{className:"text-sm text-gray-500",children:["Date: ",P.printEstimate.date]})]})]}),(0,c.jsxs)("section",{className:"grid md:grid-cols-2 gap-4 p-6",children:[(0,c.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,c.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2 border-b-2 border-blue-500 pb-1",children:"\ubc1c\uc8fc\ucc98 \uc815\ubcf4 (Client)"}),(0,c.jsxs)("div",{className:"space-y-1 text-sm leading-5",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uac74\ucd95\uc8fc\uba85:"})," ",(ae=String(null!==(e=P.printEstimate.clientName)&&void 0!==e?e:""),""!==ae?ae.replace(/\u00A0/g," ").replace(/\s{2,}/g," ").trim():ae)]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\ud504\ub85c\uc81d\ud2b8\uba85:"})," ",null!==(t=P.printEstimate.projectName)&&void 0!==t?t:"-"]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uc791\uc5c5\uc7a5 \uc8fc\uc18c:"})," ",null!==(i=P.printEstimate.workplaceAddress)&&void 0!==i?i:"-"]}),null!==P.printEstimate.validUntil&&void 0!==P.printEstimate.validUntil&&""!==P.printEstimate.validUntil&&(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uc720\ud6a8\uae30\ud55c:"})," ",P.printEstimate.validUntil]})]})]}),(0,c.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,c.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2 border-b-2 border-blue-500 pb-1",children:"\uc2dc\uacf5\uc5c5\uccb4 \uc815\ubcf4 (Contractor)"}),(0,c.jsxs)("div",{className:"space-y-1 text-sm leading-5",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uc5c5\uccb4\uba85:"})," ",g.name]}),null!==g.representative&&void 0!==g.representative&&""!==g.representative&&(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\ub300\ud45c\uc790:"})," ",g.representative]}),null!==g.phone&&void 0!==g.phone&&""!==g.phone&&(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uc5f0\ub77d\ucc98:"})," ",g.phone]}),null!==g.address&&void 0!==g.address&&""!==g.address&&(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uc8fc\uc18c:"})," ",g.address]}),null!==g.businessNumber&&void 0!==g.businessNumber&&""!==g.businessNumber&&(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uc0ac\uc5c5\uc790\ubc88\ud638:"})," ",g.businessNumber]})]})]})]}),(0,c.jsxs)("section",{className:"p-6 pt-0",children:[(0,c.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"\uacac\uc801 \ub0b4\uc5ed (Quotation Details)"}),(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,c.jsx)("thead",{className:"bg-gray-100",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"p-3 font-semibold text-gray-700",children:"\uc21c\ubc88"}),(0,c.jsx)("th",{className:"p-3 font-semibold text-gray-700",children:"\uad6c\ubd84"}),(0,c.jsx)("th",{className:"p-3 font-semibold text-gray-700 w-1/3",children:"\uacf5\uc885 \ubc0f \ub0b4\uc6a9"}),(0,c.jsx)("th",{className:"p-3 font-semibold text-gray-700",children:"\uc218\ub7c9"}),(0,c.jsx)("th",{className:"p-3 font-semibold text-gray-700",children:"\ub2e8\uc704"}),(0,c.jsx)("th",{className:"p-3 font-semibold text-gray-700 text-right",children:"\ub2e8\uac00"}),(0,c.jsx)("th",{className:"p-3 font-semibold text-gray-700 text-right",children:"\uae08\uc561"}),(0,c.jsx)("th",{className:"p-3 font-semibold text-gray-700",children:"\ube44\uace0"})]})}),(0,c.jsx)("tbody",{className:"divide-y divide-gray-200",children:(null!==(n=P.printEstimate.items)&&void 0!==n?n:[]).map((e,t)=>{var a,r,i;const s=Number(e.quantity),n=Number(e.unitPrice),l=0===s||isNaN(s)?0:s,d=0===n||isNaN(n)?0:n,o=l*d;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"p-3",children:t+1}),(0,c.jsx)("td",{className:"p-3",children:null!==(a=e.category)&&void 0!==a?a:"-"}),(0,c.jsxs)("td",{className:"p-3",children:[(0,c.jsx)("div",{className:"font-medium",children:e.name}),null!==e.description&&void 0!==e.description&&""!==e.description&&(0,c.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]}),(0,c.jsx)("td",{className:"p-3",children:l}),(0,c.jsx)("td",{className:"p-3",children:null!==(r=e.unit)&&void 0!==r?r:"-"}),(0,c.jsxs)("td",{className:"p-3 text-right",children:[E(d),"\uc6d0"]}),(0,c.jsxs)("td",{className:"p-3 text-right",children:[E(o),"\uc6d0"]}),(0,c.jsx)("td",{className:"p-3",children:null!==(i=e.notes)&&void 0!==i?i:""})]},t)})}),(0,c.jsx)("tfoot",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"p-3 text-right font-bold",colSpan:6,children:"\ucd1d \ud569\uacc4"}),(0,c.jsxs)("td",{className:"p-3 text-right font-bold",children:[E(V()),"\uc6d0"]}),(0,c.jsx)("td",{})]})})]})})]}),(0,c.jsxs)("section",{className:"px-6 pb-6",children:[(0,c.jsxs)("div",{className:"mt-3 text-sm text-gray-700 font-semibold",children:["\ucd1d \uacac\uc801\uae08\uc561 : \uae08 ",k(P.printEstimate.totalAmount)," \uc6d0\uc815"]}),null!==P.printEstimate.notes&&void 0!==P.printEstimate.notes&&""!==P.printEstimate.notes&&(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsx)("h4",{className:"text-sm font-semibold mb-1",children:"\ud2b9\uc774\uc0ac\ud56d \ubc0f \uc870\uac74"}),(0,c.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:P.printEstimate.notes})]})]})]})})});var ae};function S(){return(0,c.jsx)(C,{})}},7875:(e,t,a)=>{function r(){return{format:e=>{if(null===e||void 0===e||""===e)return"";const t=String(e).replace(/[^\d-]/g,"");if(""===t||"-"===t)return"";const a=Number(t);return Number.isNaN(a)?"":a.toLocaleString()},parse:e=>{const t=String(null!==e&&void 0!==e?e:"").replace(/[^\d-]/g,"");if(""===t||"-"===t)return 0;const a=parseInt(t,10);return Number.isNaN(a)?0:a}}}a.d(t,{g:()=>r})},8974:(e,t,a)=>{a.d(t,{R:()=>i});var r=a(9198);function i(e){var t,a;const[i,s]=(0,r.useState)(null!==(t=null===e||void 0===e?void 0:e.selectedClient)&&void 0!==t?t:""),[n,l]=(0,r.useState)(null!==(a=null===e||void 0===e?void 0:e.selectedStatus)&&void 0!==a?a:""),d=(0,r.useMemo)(()=>""!==i.trim()||""!==n.trim(),[i,n]);return{selectedClient:i,selectedStatus:n,setSelectedClient:s,setSelectedStatus:l,reset:()=>{s(""),l("")},isActive:d,countLabel:(e,t)=>d?"".concat(t,"\uac1c"):"\ucd1d ".concat(e,"\uac1c")}}}}]);
//# sourceMappingURL=347.6fd4561c.chunk.js.map