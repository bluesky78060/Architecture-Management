"use strict";(self.webpackChunkconstruction_management_frontend=self.webpackChunkconstruction_management_frontend||[]).push([[355],{4491:(e,r,t)=>{t.d(r,{_:()=>n});var a=t(9198);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{value:r,onChange:t,closeOnSelect:n=!0}=e,[l,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(()=>new Date),s=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(null==r||""===r)return;const e=r.split("-").map(e=>parseInt(e,10)),t=e[0],a=e[1];if(Number.isFinite(t)&&Number.isFinite(a)){const e=1;d(new Date(t,a-e,e))}},[r]),(0,a.useEffect)(()=>{const e=e=>{const r=s.current;null===r||r.contains(e.target)||i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const c=e=>String(e).padStart(2,"0");return{open:l,setOpen:i,month:o,setMonth:d,prevMonth:()=>d(e=>new Date(e.getFullYear(),e.getMonth()-1,1)),nextMonth:()=>d(e=>new Date(e.getFullYear(),e.getMonth()+1,1)),pickDate:e=>{if(null==e||!Number.isFinite(e)||e<=0)return;const r=o.getFullYear(),a=o.getMonth()+1,l="".concat(r,"-").concat(c(a),"-").concat(c(e));null===t||void 0===t||t(l),n&&i(!1)},getCalendarGrid:()=>{const e=new Date(o.getFullYear(),o.getMonth(),1).getDay(),r=new Date(o.getFullYear(),o.getMonth()+1,0).getDate(),t=[];for(let n=0;n<e;n++)t.push(null);for(let n=1;n<=r;n++)t.push(n);const a=[];for(let n=0;n<t.length;n+=7)a.push(t.slice(n,n+7));return a},containerRef:s}}},6520:(e,r,t)=>{t.d(r,{A:()=>i});var a=t(6601),n=(t(9198),t(5582));const l=(0,a.FZ)(e=>(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 dark:bg-black dark:bg-opacity-50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:e.v0}),(0,n.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:e.v1}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)("button",{onClick:e.v2,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:e.v3}),(0,n.jsx)("button",{onClick:e.v4,className:"px-4 py-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded",children:e.v5})]})]})}),{name:"ConfirmDialog_1",portals:["v0","v1","v3","v5"]}),i=e=>{let{open:r,title:t,message:a,confirmText:i="\ud655\uc778",cancelText:o="\ucde8\uc18c",onConfirm:d,onCancel:s}=e;return r?(0,n.jsx)(l,{v0:t,v1:a,v2:s,v3:o,v4:d,v5:i}):null}},7355:(e,r,t)=>{t.r(r),t.d(r,{default:()=>F});var a=t(2555),n=t(6601),l=t(9198),i=t(5826),o=t(7875),d=t(7467);function s(){const{clients:e}=(0,i.n)();return{getClientWorkplaces:r=>{if(null==r||"string"===typeof r&&""===r.trim())return[];const t="string"===typeof r?parseInt(r,10):r,a=Number.isFinite(t)?t:null;if(null===a)return[];const n=e.find(e=>e.id===a);return void 0!==n&&Array.isArray(n.workplaces)?n.workplaces:[]}}}var c=t(9022),u=t(3515),g=t(6786),m=t(3688),x=t(5582);const b=(0,n.FZ)(e=>(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-4",children:[(0,x.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2",children:"\ucd1d \uc791\uc5c5 \ud56d\ubaa9"}),(0,x.jsxs)("p",{className:"text-base font-bold text-gray-900 dark:text-gray-100",children:[e.v0,"\uac74"]})]}),(0,x.jsx)("div",{className:"bg-blue-500 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12",children:e.v1})]})}),(0,x.jsx)("div",{className:"bg-green-100 dark:bg-green-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2",children:"\uc644\ub8cc\ub41c \uc791\uc5c5"}),(0,x.jsxs)("p",{className:"text-base font-bold text-gray-900 dark:text-gray-100",children:[e.v2,"\uac74"]})]}),(0,x.jsx)("div",{className:"bg-green-500 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12",children:e.v3})]})}),(0,x.jsx)("div",{className:"bg-purple-100 dark:bg-purple-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2",children:"\uc9c4\ud589 \uc911\uc778 \uc791\uc5c5"}),(0,x.jsxs)("p",{className:"text-base font-bold text-gray-900 dark:text-gray-100",children:[e.v4,"\uac74"]})]}),(0,x.jsx)("div",{className:"bg-purple-500 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12",children:e.v5})]})}),(0,x.jsx)("div",{className:"bg-orange-100 dark:bg-orange-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2",children:"\ucd1d \uc791\uc5c5 \uae08\uc561"}),(0,x.jsxs)("p",{className:"text-base font-bold text-gray-900 dark:text-gray-100",children:[e.v6,"\uc6d0"]})]}),(0,x.jsx)("div",{className:"bg-orange-500 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12",children:e.v7})]})})]}),{name:"StatsCards_1",portals:["v0","v1","v2","v3","v4","v5","v6","v7"]}),p=function(e){let{filteredWorkItems:r,format:t,getLaborCost:a}=e;const n=r.length,l=r.filter(e=>"\uc644\ub8cc"===e.status).length,i=r.filter(e=>"\uc9c4\ud589\uc911"===e.status).length,o=r.reduce((e,r)=>{const t=Number(r.defaultPrice),n=Number(r.quantity);return e+(Number.isFinite(t)?t:0)*(Number.isFinite(n)?n:1)+a(r)},0);return(0,x.jsx)(b,{v0:n,v1:(0,x.jsx)(c.A,{className:"h-6 w-6","aria-hidden":"true"}),v2:l,v3:(0,x.jsx)(u.A,{className:"h-6 w-6","aria-hidden":"true"}),v4:i,v5:(0,x.jsx)(g.A,{className:"h-6 w-6","aria-hidden":"true"}),v6:t(o),v7:(0,x.jsx)(m.A,{className:"h-6 w-6","aria-hidden":"true"})})},v=e=>(e=>"number"===typeof e&&Number.isFinite(e))(e)&&e>0,y=(0,n.FZ)(e=>(0,x.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-md shadow-sm p-2 mb-4",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3 flex-wrap",children:[(0,x.jsx)("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"\ud544\ud130:"}),(0,x.jsx)("div",{className:"relative inline-flex items-center",children:(0,x.jsxs)("select",{value:e.v0,onChange:e.v1,className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 pr-8 py-1.5 bg-white dark:bg-gray-700 text-xs text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-indigo-500 appearance-none cursor-pointer min-w-0",children:[(0,x.jsx)("option",{value:"",children:"\uc804\uccb4 \uac74\ucd95\uc8fc"}),e.v2]})}),(0,x.jsx)("div",{className:"relative inline-flex items-center",children:(0,x.jsxs)("select",{value:e.v3,onChange:e.v4,className:e.v5,disabled:e.v6,children:[(0,x.jsx)("option",{value:"",children:e.v7}),e.v8]})}),(0,x.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.v9}),e.v10,e.v11]}),(0,x.jsx)("div",{className:"flex items-center space-x-2",children:e.v12})]})}),{name:"FilterBar_1",portals:["v2","v7","v8","v9","v10","v11","v12"]}),h=function(e){let{clients:r,selectedClient:t,selectedProject:a,filteredCount:n,totalCount:l,selectionCount:i,bulkStatus:o,statuses:d,getClientProjects:s,onChangeClient:c,onChangeProject:u,onResetFilters:g,onBulkStatusChange:m,onApplyBulkStatus:b,onCreateBulkInvoice:p,onBulkDelete:h}=e;const k=""!==String(null!==t&&void 0!==t?t:""),f=""!==(null!==a&&void 0!==a?a:"").trim(),N=k||f,j=v(i);return(0,x.jsx)(y,{v0:null==t?"":String(t),v1:e=>c(e.target.value),v2:r.map(e=>(0,x.jsx)("option",{value:String(e.id),children:e.name},e.id)),v3:a,v4:e=>u(e.target.value),v5:"border border-gray-300 dark:border-gray-600 rounded-md px-3 pr-8 py-1.5 bg-white dark:bg-gray-700 text-xs hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-indigo-500 appearance-none cursor-pointer min-w-0 ".concat(k?"text-gray-700 dark:text-gray-300":"text-gray-400 cursor-not-allowed"),v6:!k,v7:k?"\uc804\uccb4 \ud504\ub85c\uc81d\ud2b8":"\uac74\ucd95\uc8fc \uc120\ud0dd \ud6c4",v8:k&&s(t).map(e=>(0,x.jsx)("option",{value:e,children:e},e)),v9:N?"".concat(n,"\uac1c"):"\ucd1d ".concat(l,"\uac1c"),v10:j&&(0,x.jsxs)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-700",children:["\uc120\ud0dd ",i]}),v11:N&&(0,x.jsx)("button",{onClick:g,className:"text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 underline",children:"\ucd08\uae30\ud654"}),v12:j&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2 mr-2",children:[(0,x.jsx)("label",{className:"text-xs text-gray-600 dark:text-gray-300",children:"\uc0c1\ud0dc \uc77c\uad04 \ubcc0\uacbd"}),(0,x.jsxs)("select",{value:o,onChange:e=>m(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1 text-xs bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,x.jsx)("option",{value:"",children:"\uc0c1\ud0dc \uc120\ud0dd"}),d.map(e=>(0,x.jsx)("option",{value:e,children:e},e))]}),(0,x.jsx)("button",{onClick:b,className:"bg-purple-600 hover:bg-purple-700 text-white font-medium py-1 px-2 rounded flex items-center text-xs leading-none",children:"\uc801\uc6a9"})]}),(0,x.jsxs)("button",{onClick:p,className:"flex items-center justify-center px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm hover:shadow-md transition-shadow duration-300 text-gray-700 dark:text-gray-300 text-xs leading-none",children:[(0,x.jsx)("span",{className:"text-green-600 mr-1.5",children:"\ud83d\udcc8"}),(0,x.jsxs)("span",{className:"font-semibold",children:["\uccad\uad6c\uc11c \uc0dd\uc131 (",i,")"]})]}),(0,x.jsxs)("button",{onClick:h,className:"flex items-center justify-center px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm hover:shadow-md transition-shadow duration-300 text-gray-700 dark:text-gray-300 text-xs leading-none",children:[(0,x.jsx)("span",{className:"text-red-600 mr-1.5",children:"\ud83d\uddd1\ufe0f"}),(0,x.jsxs)("span",{className:"font-semibold",children:["\uc0ad\uc81c (",i,")"]})]})]})})};var k=t(9529);const f=(0,n.FZ)(e=>(0,x.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:(0,x.jsx)("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,x.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"px-3 py-3 text-center text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:(0,x.jsx)("input",{type:"checkbox",onChange:e.v0,checked:e.v1,className:"w-4 h-4 rounded border-gray-300",title:"\uc804\uccb4 \uc120\ud0dd"})}),(0,x.jsx)("th",{className:"px-2 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-24",children:"\uac74 \ucd95 \uc8fc"}),(0,x.jsx)("th",{className:"px-2 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-52",children:"\ub0b4\xa0\xa0\xa0\xa0\uc6a9"}),(0,x.jsx)("th",{className:"px-3 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-24",children:"\uc791 \uc5c5 \uc7a5"}),(0,x.jsx)("th",{className:"px-3 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-28",children:"\ud504\ub85c\uc81d\ud2b8"}),(0,x.jsx)("th",{className:"px-3 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-20 whitespace-nowrap",children:"\uce74\ud14c\uace0\ub9ac"}),(0,x.jsx)("th",{className:"px-3 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-32 whitespace-nowrap",children:"\ub2e8\uac00/\uc218\ub7c9"}),(0,x.jsx)("th",{className:"px-3 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-16",children:"\uc0c1\xa0\xa0\xa0\xa0\ud0dc"}),(0,x.jsx)("th",{className:"px-3 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-24",children:"\ub0a0\xa0\xa0\xa0\xa0\uc9dc"}),(0,x.jsx)("th",{className:"px-3 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uc791\xa0\xa0\xa0\xa0\uc5c5"})]})}),(0,x.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.v2})]})})}),{name:"WorkItemsTable_1",portals:["v2"]}),N=function(e){let{items:r,selection:t,format:a,getLaborCost:n,getCategoryColor:l,onEdit:i,onDelete:o,onCreateInvoice:d}=e;return(0,x.jsx)(f,{v0:e=>t.toggleAll(e.target.checked),v1:t.selected.length>0&&t.selected.length===r.length,v2:r.map((e,r)=>(0,x.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,x.jsx)("td",{className:"px-3 py-4 whitespace-nowrap",children:(0,x.jsx)("input",{type:"checkbox",checked:t.selected.includes(e.id),onChange:r=>t.toggleOne(e.id,r.target.checked),className:"w-4 h-4 rounded border-gray-300",title:"\ud56d\ubaa9 \uc120\ud0dd"})}),(0,x.jsx)("td",{className:"px-2 py-3 whitespace-nowrap",children:(0,x.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate w-16",children:e.clientName})}),(0,x.jsxs)("td",{className:"px-2 py-3 w-52",children:[(0,x.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:e.name}),(0,x.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.description})]}),(0,x.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,x.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100 truncate w-24",children:e.workplaceName})}),(0,x.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,x.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100 truncate w-28",children:e.projectName})}),(0,x.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,x.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(l(e.category)),children:e.category})}),(0,x.jsx)("td",{className:"px-3 py-3 whitespace-nowrap w-32 text-right",children:(()=>{const r=Number(e.defaultPrice),t=Number(e.quantity),l=Number.isFinite(r)?r:0,i=Number.isFinite(t)?t:1,o=n(e),d=l*i+o;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[a(l),"\uc6d0"]}),(0,x.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["\xd7 ",i," ",e.unit]}),o>0&&(0,x.jsxs)("div",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:["+ \uc778\uac74\ube44 ",a(o),"\uc6d0"]}),(0,x.jsxs)("div",{className:"text-xs text-gray-700 dark:text-gray-200 font-medium",children:[a(d),"\uc6d0"]})]})})()}),(0,x.jsx)("td",{className:"px-3 py-3 whitespace-nowrap w-16",children:(0,x.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("\uc644\ub8cc"===e.status?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":"\uc9c4\ud589\uc911"===e.status?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400":"\ubcf4\ub958"===e.status?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400"),children:e.status})}),(0,x.jsx)("td",{className:"px-3 py-3 whitespace-nowrap w-24",children:(0,x.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100",children:e.date})}),(0,x.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-medium w-24",children:(0,x.jsxs)("div",{className:"flex",children:[(0,x.jsx)(k.A,{label:"\ud3b8\uc9d1",children:(0,x.jsx)("button",{onClick:()=>i(e),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mx-2",title:"\uc791\uc5c5 \ud56d\ubaa9 \ud3b8\uc9d1",children:"\u270f\ufe0f"})}),(0,x.jsx)(k.A,{label:"\uc0ad\uc81c",children:(0,x.jsx)("button",{onClick:()=>o(e.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 mx-2",title:"\uc791\uc5c5 \ud56d\ubaa9 \uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})}),"\uc644\ub8cc"===e.status&&(0,x.jsx)(k.A,{label:"\uccad\uad6c\uc11c \uc0dd\uc131",children:(0,x.jsx)("button",{onClick:()=>d(e),className:"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 mx-2",title:"\uccad\uad6c\uc11c \uc0dd\uc131",children:"\ud83e\uddfe"})})]})})]},"".concat(e.id,"-").concat(r)))})};var j=t(4491);function w(e){var r,t,a,n,i,d,c,u,g,m;let{open:b,editingItem:p,newItem:v,clients:y,units:h,categories:k,statuses:f,onChangeField:N,onCancel:w,onSubmit:_}=e;const{getClientWorkplaces:I}=s(),{format:C}=(0,o.g)(),S=(0,j._)({value:null!==(r=null===v||void 0===v?void 0:v.date)&&void 0!==r?r:"",onChange:e=>N("date",e)}),P=(0,l.useRef)(null);return!0!==b?null:(0,x.jsx)("div",{className:"fixed inset-0 bg-gray-800/50 dark:bg-gray-900/70 backdrop-blur-sm overflow-y-auto h-full w-full z-50",children:(0,x.jsxs)("div",{className:"relative top-8 mx-auto w-[980px] max-w-[95vw] shadow-2xl rounded-2xl bg-white/80 dark:bg-gray-800/90 ring-1 ring-black/5 dark:ring-white/10 mb-8",children:[(0,x.jsx)("div",{className:"rounded-t-2xl bg-gradient-to-br from-indigo-50 via-purple-50 to-white dark:from-indigo-900/30 dark:via-purple-900/30 dark:to-gray-800 px-8 pt-5 pb-3",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("h3",{className:"text-2xl font-extrabold tracking-tight text-indigo-600 dark:text-indigo-400",children:null!==p?"\uc791\uc5c5 \ud56d\ubaa9 \ud3b8\uc9d1":"\uc0c8 \uc791\uc5c5 \ud56d\ubaa9 \ucd94\uac00"}),(0,x.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"\uc0c8\ub85c\uc6b4 \uac74\uc124 \uc791\uc5c5 \ud56d\ubaa9\uc744 \ub4f1\ub85d\ud558\uace0 \uad00\ub9ac\ud558\uc138\uc694"})]})}),(0,x.jsx)("div",{className:"px-6 pb-6 pt-3",children:(0,x.jsxs)("form",{id:"work-item-form",onSubmit:_,className:"space-y-4",children:[(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4",children:[(0,x.jsxs)("div",{className:"flex items-center mb-3 gap-3",children:[(0,x.jsx)("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400",children:"\ud83c\udfd7\ufe0f"}),(0,x.jsx)("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"\uae30\ubcf8 \uc815\ubcf4"})]}),(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-300",children:"\uac74\ucd95\uc8fc"}),(0,x.jsxs)("select",{name:"clientId",value:String(null!==(t=v.clientId)&&void 0!==t?t:""),onChange:e=>N(e.target.name,e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,x.jsx)("option",{value:"",children:"\uac74\ucd95\uc8fc \uc120\ud0dd"}),y.map(e=>(0,x.jsx)("option",{value:String(e.id),children:e.name},e.id))]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-300",children:"\uc791\uc5c5\uc7a5"}),((e,r)=>{const t=""!==String(null!==(e=v.clientId)&&void 0!==e?e:"");return(0,x.jsxs)("select",{name:"workplaceId",value:String(null!==(r=v.workplaceId)&&void 0!==r?r:""),onChange:e=>N(e.target.name,e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",required:!0,disabled:!t,children:[(0,x.jsx)("option",{value:"",children:t?"\uc791\uc5c5\uc7a5 \uc120\ud0dd":"\uc791\uc5c5\uc7a5 \uc120\ud0dd(\uba3c\uc800 \uac74\ucd95\uc8fc\ub97c \uc120\ud0dd\ud558\uc138\uc694)"}),t&&I(v.clientId).map(e=>(0,x.jsxs)("option",{value:String(e.id),children:[e.name," - ",e.address]},e.id))]})})()]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-300",children:"\ud504\ub85c\uc81d\ud2b8\uba85"}),((e,r)=>{const t=y.find(e=>String(e.id)===String(v.clientId)),a=void 0!==t&&Array.isArray(t.projects)?t.projects:[];return Array.isArray(a)&&a.length>0?(0,x.jsxs)("select",{name:"projectName",value:null!==(e=v.projectName)&&void 0!==e?e:"",onChange:e=>N(e.target.name,e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,x.jsx)("option",{value:"",children:"\ud504\ub85c\uc81d\ud2b8 \uc120\ud0dd"}),a.map(e=>(0,x.jsx)("option",{value:e,children:e},e))]}):(0,x.jsx)("input",{type:"text",name:"projectName",value:null!==(r=v.projectName)&&void 0!==r?r:"",onChange:e=>N(e.target.name,e.target.value),placeholder:"\ud504\ub85c\uc81d\ud2b8\uba85 \uc785\ub825",className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})})()]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-300",children:"\uce74\ud14c\uace0\ub9ac"}),(0,x.jsxs)("select",{name:"category",value:null!==(a=v.category)&&void 0!==a?a:"",onChange:e=>N(e.target.name,e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,x.jsx)("option",{value:"",children:"\uce74\ud14c\uace0\ub9ac \uc120\ud0dd"}),k.map(e=>(0,x.jsx)("option",{value:e,children:e},e))]})]})]})]}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4",children:[(0,x.jsxs)("div",{className:"flex items-center mb-3 gap-3",children:[(0,x.jsx)("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400",children:"\ud83d\udee0\ufe0f"}),(0,x.jsx)("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"\uc791\uc5c5 \uc815\ubcf4"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc791\uc5c5\uc77c\uc790"}),(0,x.jsxs)("div",{className:"mt-1 relative inline-block",ref:P,children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("input",{type:"text",name:"date",value:null!==(n=null===v||void 0===v?void 0:v.date)&&void 0!==n?n:"",onChange:e=>N(e.target.name,e.target.value),placeholder:"YYYY-MM-DD",inputMode:"numeric",className:"block w-full border border-gray-200 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder-gray-400",onFocus:()=>S.setOpen(!0),required:!0}),(0,x.jsx)("button",{type:"button",className:"px-2 py-2 text-gray-600 hover:text-gray-800",onClick:()=>S.setOpen(e=>!e),title:"\ub2ec\ub825 \uc5f4\uae30",children:"\ud83d\udcc5"})]}),S.open&&(0,x.jsxs)("div",{className:"absolute z-50 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg mt-2 p-3",style:{transform:"scale(1)",transformOrigin:"top left"},children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,x.jsx)("button",{type:"button",className:"px-2 py-1 text-sm border dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:S.prevMonth,children:"\u25c0"}),(0,x.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[S.month.getFullYear(),"\ub144 ",S.month.getMonth()+1,"\uc6d4"]}),(0,x.jsx)("button",{type:"button",className:"px-2 py-1 text-sm border dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:S.nextMonth,children:"\u25b6"})]}),(0,x.jsxs)("table",{className:"text-xs select-none",children:[(0,x.jsx)("thead",{children:(0,x.jsx)("tr",{className:"text-left text-gray-600 dark:text-gray-400",children:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"].map((e,r)=>(0,x.jsx)("th",{className:"px-2 py-1 ".concat(0===r?"text-red-600":6===r?"text-blue-600":""),children:e},e))})}),(0,x.jsx)("tbody",{children:S.getCalendarGrid().map((e,r)=>(0,x.jsx)("tr",{className:"text-left",children:e.map((e,r)=>{const t="number"===typeof e&&0!==e&&!Number.isNaN(e),a=0===r?"text-red-600":6===r?"text-blue-600":"";return(0,x.jsx)("td",{className:"px-2 py-1 ".concat(a," ").concat(t?"cursor-pointer hover:bg-gray-100 rounded":""),onClick:()=>{t&&S.pickDate(e)},children:t?e:""},r)})},r))})]})]})]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ub0b4\uc6a9"}),(0,x.jsx)("input",{type:"text",name:"name",value:null!==(i=v.name)&&void 0!==i?i:"",onChange:e=>N(e.target.name,e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc138\ubd80 \uc791\uc5c5"}),(0,x.jsx)("input",{type:"text",name:"description",value:null!==(d=v.description)&&void 0!==d?d:"",onChange:e=>N(e.target.name,e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-4 gap-3 mt-3",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc218\ub7c9"}),(0,x.jsx)("input",{type:"text",name:"quantity",value:null!==(c=v.quantity)&&void 0!==c?c:"",onChange:e=>N(e.target.name,e.target.value),onFocus:e=>e.target.select(),placeholder:"\uc608: 1",className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ub2e8\uc704"}),(0,x.jsxs)("select",{name:"unit",value:null!==(u=v.unit)&&void 0!==u?u:"",onChange:e=>N(e.target.name,e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,x.jsx)("option",{value:"",children:"\ub2e8\uc704 \uc120\ud0dd"}),h.map(e=>(0,x.jsx)("option",{value:e,children:e},e))]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ub2e8\uac00"}),(0,x.jsx)("input",{type:"text",name:"defaultPrice",value:(()=>{const e=v.defaultPrice;if(null===e||void 0===e)return"";const r=Number(e);return Number.isFinite(r)?C(r):String(e)})(),onChange:e=>N(e.target.name,e.target.value),onFocus:e=>e.target.select(),placeholder:"\uc608: 200,000",className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ud569\uacc4"}),(0,x.jsx)("div",{className:"mt-1 w-full bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded px-3 py-2 text-sm font-semibold text-green-900 dark:text-green-300",children:(()=>{const e=v.defaultPrice,r=v.quantity,t=Number(e),a=Number(r),n=Number.isFinite(t)?t:0,l=Number.isFinite(a)?a:1;return"".concat(C(n*l),"\uc6d0")})()})]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-3 gap-3 mt-3",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc778\ubd80 \uc778\uc6d0"}),(0,x.jsx)("input",{type:"text",name:"laborPersons",value:String(null!==(g=v.laborPersons)&&void 0!==g?g:""),onChange:e=>N(e.target.name,e.target.value),onFocus:e=>e.target.select(),placeholder:"\uc608: 3",className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc778\ubd80 \ub2e8\uac00"}),(0,x.jsx)("input",{type:"text",name:"laborUnitRate",value:"number"===typeof v.laborUnitRate?C(v.laborUnitRate):"",onChange:e=>N(e.target.name,e.target.value),onFocus:e=>e.target.select(),placeholder:"\uc608: 250,000",className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc778\ubd80\uc784 \ud569\uacc4"}),(0,x.jsx)("div",{className:"mt-1 w-full bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 rounded px-3 py-2 text-sm font-semibold text-indigo-900 dark:text-indigo-300",children:((e,r)=>{const t=Number(null!==(e=v.laborPersons)&&void 0!==e?e:0),a=Number(null!==(r=v.laborUnitRate)&&void 0!==r?r:0),n=Number.isFinite(t)?t:0,l=Number.isFinite(a)?a:0;return"".concat(C(n*l),"\uc6d0")})()})]})]}),(0,x.jsxs)("div",{className:"mt-3",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ube44\uace0"}),(0,x.jsx)("input",{type:"text",name:"notes",value:null!==(m=v.notes)&&void 0!==m?m:"",onChange:e=>N(e.target.name,e.target.value),placeholder:"\ucd94\uac00 \uba54\ubaa8\ub098 \ud2b9\uc774\uc0ac\ud56d\uc744 \uc785\ub825\ud558\uc138\uc694",className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,x.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4",children:(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc0c1\ud0dc"}),(0,x.jsx)("div",{className:"flex flex-wrap gap-1.5",children:f.map(e=>{const r=v.status===e,t=r?"bg-indigo-600 dark:bg-indigo-500 text-white border-transparent shadow":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600";return(0,x.jsx)("button",{type:"button",onClick:()=>N("status",e),className:"px-3 py-1.5 rounded-full text-sm transition ".concat(t),"aria-pressed":r,children:e},e)})})]}),(0,x.jsxs)("div",{className:"ml-4",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-right",children:"\ucd1d\ud569\uacc4 \uae08\uc561"}),(0,x.jsx)("div",{className:"bg-blue-600 dark:bg-blue-700 text-white rounded-lg px-4 py-2 text-base font-bold shadow-md",children:((e,r)=>{const t=v.defaultPrice,a=v.quantity,n=Number(t),l=Number(a),i=Number.isFinite(n)?n:0,o=Number.isFinite(l)?l:1,d=Number(null!==(e=v.laborPersons)&&void 0!==e?e:0),s=Number(null!==(r=v.laborUnitRate)&&void 0!==r?r:0),c=Number.isFinite(d)?d:0,u=Number.isFinite(s)?s:0;return"".concat(C(i*o+c*u),"\uc6d0")})()})]})]})})]})}),(0,x.jsx)("div",{className:"sticky bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700 px-6 py-4 rounded-b-2xl shadow-lg",children:(0,x.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,x.jsx)("button",{type:"button",onClick:w,className:"px-6 py-2.5 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition font-medium",children:"\ucde8\uc18c"}),(0,x.jsx)("button",{type:"submit",form:"work-item-form",className:"px-6 py-2.5 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-md transition font-bold",children:null!==p?"\uc218\uc815":"\ucd94\uac00"})]})})]})})}function _(e){var r,t,a,n;let{open:d,clients:c,categories:u,units:g,bulkItems:m,bulkBaseInfo:b,showBulkCustomProject:p,statuses:v,onBaseInfoChangeField:y,onItemChange:h,onAddItem:k,onRemoveItem:f,onCancel:N,onSubmit:w}=e;const{getClientWorkplaces:_}=s(),{getClientProjects:I}=function(){const{workItems:e,clients:r}=(0,i.n)();return{getClientProjects:t=>{if(null==t||"string"===typeof t&&""===t.trim())return[];const a="string"===typeof t?parseInt(t,10):t,n=Number.isFinite(a)?a:null;if(null===n)return[];const l=e.filter(e=>e.clientId===n).map(e=>e.projectName).filter(e=>"string"===typeof e&&""!==e.trim()),i=r.find(e=>e.id===n),o=void 0!==i&&Array.isArray(i.projects)?i.projects:[],d=void 0!==i&&Array.isArray(i.workplaces)?i.workplaces:[],s=o.filter(e=>"string"===typeof e&&""!==e.trim()),c=d.map(e=>e.description).filter(e=>"string"===typeof e&&""!==e.trim());return Array.from(new Set([...l,...s,...c]))},getAllProjects:()=>Array.from(new Set(e.map(e=>e.projectName).filter(e=>"string"===typeof e&&""!==e.trim()))).sort()}}(),{format:C}=(0,o.g)(),S=(0,j._)({value:null!==(r=null===b||void 0===b?void 0:b.date)&&void 0!==r?r:"",onChange:e=>y("date",e)}),P=(0,l.useRef)(null);return!0!==d?null:(0,x.jsx)("div",{className:"fixed inset-0 bg-gray-800/50 dark:bg-gray-900/70 backdrop-blur-sm overflow-y-auto h-full w-full z-50",children:(0,x.jsxs)("div",{className:"relative top-6 mx-auto w-[1100px] max-w-[96vw] shadow-2xl rounded-2xl bg-white/80 dark:bg-gray-800/90 ring-1 ring-black/5 dark:ring-white/10 mb-8",children:[(0,x.jsxs)("div",{className:"rounded-t-2xl bg-gradient-to-br from-indigo-50 via-purple-50 to-white dark:from-indigo-900/30 dark:via-purple-900/30 dark:to-gray-800 px-8 pt-8 pb-6 text-center",children:[(0,x.jsx)("h3",{className:"text-2xl font-extrabold tracking-tight text-indigo-600 dark:text-indigo-400",children:"\uc77c\uad04 \uc791\uc5c5 \ud56d\ubaa9 \ucd94\uac00"}),(0,x.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"\uc5ec\ub7ec \uc791\uc5c5\uc744 \ud55c \ubc88\uc5d0 \ub4f1\ub85d\ud569\ub2c8\ub2e4"})]}),(0,x.jsx)("div",{className:"px-6 pb-6",children:(0,x.jsxs)("form",{id:"bulk-work-item-form",onSubmit:w,className:"space-y-4",children:[(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4",children:[(0,x.jsxs)("div",{className:"flex items-center mb-3 gap-3",children:[(0,x.jsx)("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400",children:"\ud83d\udccb"}),(0,x.jsx)("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"\uacf5\ud1b5 \uc815\ubcf4"})]}),(0,x.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-3",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uac74\ucd95\uc8fc"}),(0,x.jsxs)("select",{name:"clientId",value:String(null!==(t=b.clientId)&&void 0!==t?t:""),onChange:e=>y(e.target.name,e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,x.jsx)("option",{value:"",children:"\uac74\ucd95\uc8fc \uc120\ud0dd"}),c.map(e=>(0,x.jsx)("option",{value:String(e.id),children:e.name},e.id))]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc791\uc5c5\uc7a5"}),((e,r)=>{const t=""!==String(null!==(e=b.clientId)&&void 0!==e?e:"");return(0,x.jsxs)("select",{name:"workplaceId",value:String(null!==(r=b.workplaceId)&&void 0!==r?r:""),onChange:e=>y(e.target.name,e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,disabled:!t,children:[(0,x.jsx)("option",{value:"",children:t?"\uc791\uc5c5\uc7a5 \uc120\ud0dd":"\uc791\uc5c5\uc7a5 \uc120\ud0dd(\uba3c\uc800 \uac74\ucd95\uc8fc\ub97c \uc120\ud0dd\ud558\uc138\uc694)"}),t&&_(b.clientId).map(e=>(0,x.jsxs)("option",{value:String(e.id),children:[e.name," - ",e.address]},e.id))]})})()]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ud504\ub85c\uc81d\ud2b8\uba85"}),!0!==p?(e=>{const r=""!==String(null!==(e=b.clientId)&&void 0!==e?e:"");return(0,x.jsxs)("select",{name:"projectName",value:b.projectName,onChange:e=>y(e.target.name,e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,disabled:!r,children:[(0,x.jsx)("option",{value:"",children:"\ud504\ub85c\uc81d\ud2b8 \uc120\ud0dd"}),r&&I(b.clientId).map(e=>(0,x.jsx)("option",{value:e,children:e},e)),(0,x.jsx)("option",{value:"custom",children:"+ \uc0c8 \ud504\ub85c\uc81d\ud2b8 \uc785\ub825"})]})})():(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsx)("input",{type:"text",name:"projectName",value:b.projectName,onChange:e=>y(e.target.name,e.target.value),placeholder:"\uc0c8 \ud504\ub85c\uc81d\ud2b8\uba85 \uc785\ub825",className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0}),(0,x.jsx)("button",{type:"button",onClick:()=>y("projectName",""),className:"mt-1 px-2 py-2 text-gray-400 hover:text-gray-600",title:"\uae30\uc874 \ud504\ub85c\uc81d\ud2b8 \uc120\ud0dd\uc73c\ub85c \ub3cc\uc544\uac00\uae30",children:"\u21a9"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc791\uc5c5\uc77c\uc790"}),(0,x.jsxs)("div",{className:"mt-1 relative inline-block",ref:P,children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("input",{type:"text",name:"date",value:null!==(a=null===b||void 0===b?void 0:b.date)&&void 0!==a?a:"",onChange:e=>y(e.target.name,e.target.value),placeholder:"YYYY-MM-DD",inputMode:"numeric",className:"block w-full border border-gray-200 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder-gray-400",onFocus:()=>S.setOpen(!0),required:!0}),(0,x.jsx)("button",{type:"button",className:"px-2 py-2 text-gray-600 hover:text-gray-800",onClick:()=>S.setOpen(e=>!e),title:"\ub2ec\ub825 \uc5f4\uae30",children:"\ud83d\udcc5"})]}),S.open&&(0,x.jsxs)("div",{className:"absolute z-50 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg mt-2 p-3",style:{transform:"scale(1)",transformOrigin:"top left"},children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,x.jsx)("button",{type:"button",className:"px-2 py-1 text-sm border dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:S.prevMonth,children:"\u25c0"}),(0,x.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[S.month.getFullYear(),"\ub144 ",S.month.getMonth()+1,"\uc6d4"]}),(0,x.jsx)("button",{type:"button",className:"px-2 py-1 text-sm border dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:S.nextMonth,children:"\u25b6"})]}),(0,x.jsxs)("table",{className:"text-xs select-none",children:[(0,x.jsx)("thead",{children:(0,x.jsx)("tr",{className:"text-left text-gray-600 dark:text-gray-400",children:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"].map((e,r)=>(0,x.jsx)("th",{className:"px-2 py-1 ".concat(0===r?"text-red-600":6===r?"text-blue-600":""),children:e},e))})}),(0,x.jsx)("tbody",{children:S.getCalendarGrid().map((e,r)=>(0,x.jsx)("tr",{className:"text-left",children:e.map((e,r)=>{const t="number"===typeof e&&0!==e&&!Number.isNaN(e),a=0===r?"text-red-600":6===r?"text-blue-600":"";return(0,x.jsx)("td",{className:"px-2 py-1 ".concat(a," ").concat(t?"cursor-pointer hover:bg-gray-100 rounded":""),onClick:()=>{t&&S.pickDate(e)},children:t?e:""},r)})},r))})]})]})]})]})]}),(0,x.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:(0,x.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc778\ubd80 \uc778\uc6d0"}),(0,x.jsx)("input",{type:"text",name:"bulkLaborPersons",value:null!==(n=b.bulkLaborPersons)&&void 0!==n?n:"",onChange:e=>y(e.target.name,e.target.value),onFocus:e=>e.target.select(),placeholder:"\uc608: 3",className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc778\ubd80 \ub2e8\uac00"}),(0,x.jsx)("input",{type:"text",name:"bulkLaborUnitRate",value:(()=>{const e=b.bulkLaborUnitRate;if(null===e||void 0===e||""===e)return"";const r=Number(e);return Number.isFinite(r)?C(r):String(e)})(),onChange:e=>y(e.target.name,e.target.value),onFocus:e=>e.target.select(),placeholder:"\uc608: 250,000",className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc778\ubd80\uc784 \ud569\uacc4"}),(0,x.jsx)("div",{className:"mt-1 w-full bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 rounded px-3 py-2 text-sm font-semibold text-indigo-900 dark:text-indigo-300",children:(()=>{const e=Number(b.bulkLaborPersons),r=Number(b.bulkLaborUnitRate),t=Number.isFinite(e)?e:0,a=Number.isFinite(r)?r:0;return"".concat(C(t*a),"\uc6d0")})()})]})]})})]}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,x.jsxs)("div",{className:"flex items-center gap-3",children:[(0,x.jsx)("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400",children:"\ud83d\uddc2\ufe0f"}),(0,x.jsx)("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"\uc791\uc5c5 \ud56d\ubaa9\ub4e4"})]}),(0,x.jsx)("button",{type:"button",onClick:k,className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 text-sm",children:"+ \ud56d\ubaa9 \ucd94\uac00"})]}),(0,x.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:m.map((e,r)=>{var t,a,n,l,i,o;return(0,x.jsxs)("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,x.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["\uc791\uc5c5 \ud56d\ubaa9 #",r+1]}),m.length>1&&(0,x.jsx)("button",{type:"button",onClick:()=>f(r),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 text-sm",children:"\uc0ad\uc81c"})]}),(0,x.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-2",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ub0b4\uc6a9"}),(0,x.jsx)("input",{type:"text",value:null!==(t=e.name)&&void 0!==t?t:"",onChange:e=>h(r,"name",e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uce74\ud14c\uace0\ub9ac"}),(0,x.jsxs)("select",{value:null!==(a=e.category)&&void 0!==a?a:"",onChange:e=>h(r,"category",e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,x.jsx)("option",{value:"",children:"\uce74\ud14c\uace0\ub9ac \uc120\ud0dd"}),u.map(e=>(0,x.jsx)("option",{value:e,children:e},e))]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc138\ubd80 \uc791\uc5c5"}),(0,x.jsx)("input",{type:"text",value:null!==(n=e.description)&&void 0!==n?n:"",onChange:e=>h(r,"description",e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-2",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc218\ub7c9"}),(0,x.jsx)("input",{type:"text",value:null!==(l=e.quantity)&&void 0!==l?l:"",onChange:e=>h(r,"quantity",e.target.value),onFocus:e=>e.target.select(),placeholder:"\uc608: 1",className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ub2e8\uc704"}),(0,x.jsxs)("select",{value:null!==(i=e.unit)&&void 0!==i?i:"",onChange:e=>h(r,"unit",e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,x.jsx)("option",{value:"",children:"\ub2e8\uc704 \uc120\ud0dd"}),g.map(e=>(0,x.jsx)("option",{value:e,children:e},e))]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ub2e8\uac00"}),(0,x.jsx)("input",{type:"text",value:(()=>{const r=e.defaultPrice;if(null===r||void 0===r)return"";const t=Number(r);return Number.isFinite(t)?C(t):String(r)})(),onChange:e=>h(r,"defaultPrice",e.target.value),onFocus:e=>e.target.select(),placeholder:"\uc608: 200,000",className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ud569\uacc4"}),(0,x.jsx)("div",{className:"mt-1 w-full bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded px-3 py-2 text-sm font-semibold text-green-900 dark:text-green-300",children:(()=>{const r=e.defaultPrice,t=e.quantity,a=Number(r),n=Number(t),l=Number.isFinite(a)?a:0,i=Number.isFinite(n)?n:1;return"".concat(C(l*i),"\uc6d0")})()})]})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ube44\uace0"}),(0,x.jsx)("input",{type:"text",value:null!==(o=e.notes)&&void 0!==o?o:"",onChange:e=>h(r,"notes",e.target.value),className:"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"\uc0c1\ud0dc"}),(0,x.jsx)("div",{className:"flex flex-wrap gap-1.5",children:v.map(t=>{const a=e.status===t,n=a?"bg-indigo-600 dark:bg-indigo-500 text-white border-transparent shadow":"bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-500 hover:bg-gray-200 dark:hover:bg-gray-500";return(0,x.jsx)("button",{type:"button",onClick:()=>h(r,"status",t),className:"px-2.5 py-1 rounded-full text-xs transition ".concat(n),"aria-pressed":a,children:t},t)})})]}),(0,x.jsxs)("div",{className:"ml-4",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 text-right",children:"\ucd1d\ud569\uacc4 \uae08\uc561"}),(0,x.jsx)("div",{className:"bg-blue-600 dark:bg-blue-700 text-white rounded-lg px-4 py-2 text-base font-bold shadow-md",children:(()=>{const r=e.defaultPrice,t=e.quantity,a=Number(r),n=Number(t),l=Number.isFinite(a)?a:0,i=Number.isFinite(n)?n:1,o=Number(b.bulkLaborPersons),d=Number(b.bulkLaborUnitRate),s=Number.isFinite(o)?o:0,c=Number.isFinite(d)?d:0;return"".concat(C(l*i+s*c),"\uc6d0")})()})]})]})]},r)})})]})]})}),(0,x.jsx)("div",{className:"sticky bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700 px-6 py-4 rounded-b-2xl shadow-lg",children:(0,x.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,x.jsx)("button",{type:"button",onClick:N,className:"px-6 py-2.5 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition font-medium",children:"\ucde8\uc18c"}),(0,x.jsxs)("button",{type:"submit",form:"bulk-work-item-form",className:"px-6 py-2.5 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-md transition font-bold",children:[m.length,"\uac1c \ud56d\ubaa9 \uc77c\uad04 \ucd94\uac00"]})]})})]})})}var I=t(6520),C=t(8815);const S=(0,n.FZ)(e=>(0,x.jsxs)("div",{className:"p-2 md:p-3",children:[(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"\uc791\uc5c5 \ud56d\ubaa9 \uad00\ub9ac"}),(0,x.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"\uc791\uc5c5 \ud56d\ubaa9\uc744 \uad00\ub9ac\ud558\uace0 \uc9c4\ud589\uc744 \ud655\uc778\ud558\uc138\uc694"})]}),(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsxs)("button",{onClick:e.v0,className:"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm text-gray-700 dark:text-gray-300",children:[(0,x.jsx)("span",{className:"text-gray-500 dark:text-gray-400 mr-2",children:"\ud83d\udcc1"}),(0,x.jsx)("span",{className:"text-xs font-semibold",children:"\ud15c\ud50c\ub9bf \ub2e4\uc6b4\ub85c\ub4dc"})]}),(0,x.jsxs)("button",{onClick:e.v1,className:"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm text-gray-700 dark:text-gray-300",children:[(0,x.jsx)("span",{className:"text-blue-500 mr-2",children:"\ud83d\udce4"}),(0,x.jsx)("span",{className:"text-xs font-semibold",children:"Excel \uac00\uc838\uc624\uae30"})]}),(0,x.jsxs)("button",{onClick:e.v2,className:"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm text-gray-700 dark:text-gray-300",children:[(0,x.jsx)("span",{className:"text-green-500 mr-2",children:"\ud83d\udce5"}),(0,x.jsx)("span",{className:"text-xs font-semibold",children:"Excel \ub0b4\ubcf4\ub0b4\uae30"})]}),(0,x.jsxs)("button",{onClick:e.v3,className:"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm text-gray-700 dark:text-gray-300",children:[(0,x.jsx)("span",{className:"text-purple-500 mr-2",children:"\ud83d\udccb"}),(0,x.jsx)("span",{className:"text-xs font-semibold",children:"\uc77c\uad04 \uc791\uc5c5 \ud56d\ubaa9 \ucd94\uac00"})]}),(0,x.jsxs)("button",{onClick:e.v4,className:"flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-full shadow-lg",children:[(0,x.jsx)("span",{className:"text-yellow-300 mr-2",children:"\u2728"}),(0,x.jsx)("span",{className:"text-xs font-bold",children:"\uc0c8 \uc791\uc5c5 \ud56d\ubaa9"})]})]})]}),e.v5]}),e.v6,e.v7,e.v8,e.v9,e.v10,e.v11,e.v12]}),{name:"WorkItems_1",portals:["v5","v6","v7","v8","v9","v10","v11","v12"]}),P=["\uc608\uc815","\uc9c4\ud589\uc911","\uc644\ub8cc","\ubcf4\ub958"],R=function(){const{clients:e,setClients:r,workItems:n,setWorkItems:c,invoices:u,setInvoices:g,units:m,categories:b}=(0,i.n)(),{format:v,parse:y}=(0,o.g)(),{getClientWorkplaces:k}=s(),[f,j]=(0,l.useState)(""),[R,F]=(0,l.useState)(""),[U,q]=(0,l.useState)(""),[A,G]=(0,l.useState)(!1),[D,L]=(0,l.useState)(null),[M,O]=(0,l.useState)(!1),[T,Y]=(0,l.useState)(null),[B,E]=(0,l.useState)(!1),[W,z]=(0,l.useState)(!1),[Z,V]=(0,l.useState)([{name:"",category:"",defaultPrice:"",quantity:"",unit:"",description:"",status:"\uc608\uc815",notes:"",laborPersons:"",laborUnitRate:""}]),[J,X]=(0,l.useState)({clientId:"",workplaceId:"",projectName:"",date:(new Date).toISOString().split("T")[0],bulkLaborPersons:"",bulkLaborUnitRate:""}),H={id:0,clientId:"",clientName:"",workplaceId:"",workplaceName:"",projectName:"",name:"",category:"",defaultPrice:"",quantity:"",unit:"",description:"",status:"\uc608\uc815",notes:"",date:(new Date).toISOString().split("T")[0],laborPersons:"",laborUnitRate:"",laborPersonsGeneral:"",laborUnitRateGeneral:""},[K,Q]=(0,l.useState)(H),$=(0,l.useRef)(null),ee=(0,l.useMemo)(()=>n.filter(e=>(""===f||e.clientId===parseInt(f))&&(""===R||e.projectName===R)),[n,f,R]),re=(0,l.useMemo)(()=>ee.map(e=>e.id),[ee]),te=(0,d.C)(re),ae=e=>{var r,t,a,n;const l=parseInt(String(null!==(r=null===e||void 0===e?void 0:e.laborPersons)&&void 0!==r?r:0),10),i=parseInt(String(null!==(t=null===e||void 0===e?void 0:e.laborUnitRate)&&void 0!==t?t:0),10),o=parseInt(String(null!==(a=null===e||void 0===e?void 0:e.laborPersonsGeneral)&&void 0!==a?a:0),10),d=parseInt(String(null!==(n=null===e||void 0===e?void 0:e.laborUnitRateGeneral)&&void 0!==n?n:0),10);return(Number.isFinite(l)&&0!==l?l*i:0)+(Number.isFinite(o)&&0!==o?o*d:0)},ne=e=>{var r,t,a,n,l,i,o,d,s,c,u,g;const m="number"===typeof e.quantity&&e.quantity>0?e.quantity:1,x="number"===typeof e.defaultPrice?e.defaultPrice:0,b=parseInt(String(null!==(r=e.laborPersons)&&void 0!==r?r:0),10),p=parseInt(String(null!==(t=e.laborUnitRate)&&void 0!==t?t:0),10),v=(Number.isFinite(b)&&!isNaN(b)?b:0)*(Number.isFinite(p)&&!isNaN(p)?p:0),y=parseInt(String(null!==(a=e.laborPersonsGeneral)&&void 0!==a?a:0),10),h=parseInt(String(null!==(n=e.laborUnitRateGeneral)&&void 0!==n?n:0),10),k=v+(Number.isFinite(y)&&!isNaN(y)?y:0)*(Number.isFinite(h)&&!isNaN(h)?h:0);return{name:e.name,quantity:m,unit:e.unit,unitPrice:x,total:m*x+k,notes:null!==(l=e.notes)&&void 0!==l?l:"",date:null!==(i=e.date)&&void 0!==i?i:"",category:null!==(o=e.category)&&void 0!==o?o:"",description:null!==(d=e.description)&&void 0!==d?d:"",laborPersons:null!==(s=e.laborPersons)&&void 0!==s?s:"",laborUnitRate:null!==(c=e.laborUnitRate)&&void 0!==c?c:"",laborPersonsGeneral:null!==(u=e.laborPersonsGeneral)&&void 0!==u?u:"",laborUnitRateGeneral:null!==(g=e.laborUnitRateGeneral)&&void 0!==g?g:""}};return(0,x.jsx)(S,{v0:()=>C.Xu.workItems(),v1:()=>{var e;return null===(e=$.current)||void 0===e?void 0:e.click()},v2:()=>C.bJ.workItems(ee),v3:()=>E(!0),v4:()=>O(!0),v5:(0,x.jsx)("input",{type:"file",ref:$,onChange:async r=>{const a=r.target.files,l=null!==a&&a.length>0?a[0]:null;if(null===l)return;const i=n;try{const a=await C.p5.workItems(l),d=n.length>0?Math.max(...n.map(e=>{var r;return null!==(r=Number(e.id))&&void 0!==r?r:0})):0,s=[],u=[],g=[],m=(null!==a&&void 0!==a?a:[]).map((r,t)=>{var a,n,l,i,o,c,m,x,b,p,v,y,h,k;let f;var N,j;(null!==(null===r||void 0===r?void 0:r.clientName)&&void 0!==(null===r||void 0===r?void 0:r.clientName)&&""!==r.clientName&&(f=e.find(e=>e.name===r.clientName),null!==f&&void 0!==f||s.push(r.clientName)),null===(null===r||void 0===r?void 0:r.workplaceName)||void 0===(null===r||void 0===r?void 0:r.workplaceName)||""===r.workplaceName.trim())&&g.push("".concat(null!==(N=null===r||void 0===r?void 0:r.clientName)&&void 0!==N?N:"(\uac74\ucd95\uc8fc \uc5c6\uc74c)"," - ").concat(null!==(j=null===r||void 0===r?void 0:r.name)&&void 0!==j?j:"(\ud56d\ubaa9\uba85 \uc5c6\uc74c)"));let w="";if(null!==f&&void 0!==f&&null!==(null===r||void 0===r?void 0:r.workplaceName)&&void 0!==(null===r||void 0===r?void 0:r.workplaceName)&&""!==r.workplaceName){var _;const e=null===(_=f.workplaces)||void 0===_?void 0:_.find(e=>e.name===r.workplaceName);null!==e&&void 0!==e?w="number"===typeof e.id?e.id:Number(e.id):u.push("".concat(r.clientName," - ").concat(r.workplaceName))}return{id:d+t+1,clientId:null!==f&&void 0!==f?"number"===typeof f.id?f.id:Number(f.id):0,clientName:null!==(a=null===r||void 0===r?void 0:r.clientName)&&void 0!==a?a:"",workplaceId:w,workplaceName:null!==(n=null===r||void 0===r?void 0:r.workplaceName)&&void 0!==n?n:"",projectName:null!==(l=null===r||void 0===r?void 0:r.projectName)&&void 0!==l?l:"",name:String(null!==(i=null===r||void 0===r?void 0:r.name)&&void 0!==i?i:""),category:null!==(o=null===r||void 0===r?void 0:r.category)&&void 0!==o?o:"",unit:null!==(c=null===r||void 0===r?void 0:r.unit)&&void 0!==c?c:"",quantity:"number"===typeof(null===r||void 0===r?void 0:r.quantity)?r.quantity:0,defaultPrice:"number"===typeof(null===r||void 0===r?void 0:r.defaultPrice)?r.defaultPrice:0,description:null!==(m=null===r||void 0===r?void 0:r.description)&&void 0!==m?m:"",notes:null!==(x=null===r||void 0===r?void 0:r.notes)&&void 0!==x?x:"",status:null!==(b=null===r||void 0===r?void 0:r.status)&&void 0!==b?b:"\uc608\uc815",date:null!==(p=null===r||void 0===r?void 0:r.date)&&void 0!==p?p:(new Date).toISOString().split("T")[0],laborPersons:null!==(v=null===r||void 0===r?void 0:r.laborPersons)&&void 0!==v?v:"",laborUnitRate:null!==(y=null===r||void 0===r?void 0:r.laborUnitRate)&&void 0!==y?y:"",laborPersonsGeneral:null!==(h=null===r||void 0===r?void 0:r.laborPersonsGeneral)&&void 0!==h?h:"",laborUnitRateGeneral:null!==(k=null===r||void 0===r?void 0:r.laborUnitRateGeneral)&&void 0!==k?k:""}}),x=5,b=[];if(s.length>0){const e=Array.from(new Set(s));b.push("\u274c \ub4f1\ub85d\ub418\uc9c0 \uc54a\uc740 \uac74\ucd95\uc8fc:\n   ".concat(e.join(", ")))}if(g.length>0&&b.push("\u274c \uc791\uc5c5\uc7a5 \uc815\ubcf4\uac00 \ub204\ub77d\ub41c \ud56d\ubaa9:\n   ".concat(g.slice(0,x).join("\n   ")).concat(g.length>x?"\n   ... \uc678 ".concat(g.length-x,"\uac1c"):"")),u.length>0){const e=Array.from(new Set(u));b.push("\u274c \ub4f1\ub85d\ub418\uc9c0 \uc54a\uc740 \uc791\uc5c5\uc7a5:\n   ".concat(e.slice(0,x).join("\n   ")).concat(e.length>x?"\n   ... \uc678 ".concat(e.length-x,"\uac1c"):""))}if(b.length>0)return c(i),alert("\uc5d1\uc140 \uac00\uc838\uc624\uae30 \uc2e4\ud328\n\n".concat(b.join("\n\n"),'\n\n\ud574\uacb0 \ubc29\ubc95:\n1. \uac74\ucd95\uc8fc \uad00\ub9ac\uc5d0\uc11c \uac74\ucd95\uc8fc\ub97c \uba3c\uc800 \ub4f1\ub85d\n2. \uac74\ucd95\uc8fc\uc758 \uc791\uc5c5\uc7a5\uc744 \ub4f1\ub85d\n3. \uc5d1\uc140 \ud30c\uc77c\uc758 "\uac74\ucd95\uc8fc"\uc640 "\uc791\uc5c5\uc7a5" \uceec\ub7fc\uc744 \uc815\ud655\ud788 \uc785\ub825')),void(r.target.value="");c(e=>[...e,...m]);try{const{supabase:e}=await Promise.resolve().then(t.bind(t,2930));if(null===e||void 0===e)return c(i),void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");const{getCurrentUserId:r}=await Promise.resolve().then(t.bind(t,2930)),a=await r(),n=e=>{if(null===e||void 0===e||""===e)return null;const r=Number(e);return isNaN(r)?null:r},l=e=>{var r;if(null===e||void 0===e||""===e)return"planned";return null!==(r={"\uc608\uc815":"planned","\uc9c4\ud589\uc911":"in_progress","\uc644\ub8cc":"completed","\ubcf4\ub958":"on_hold"}[e])&&void 0!==r?r:"planned"},o=m.map(e=>{var r,t,i,o,d,s,c,u,g,m,x,b,p,v;return{user_id:a,client_id:n(e.clientId),client_name:null!==(r=e.clientName)&&void 0!==r?r:"",workplace_id:n(e.workplaceId),workplace_name:null!==(t=e.workplaceName)&&void 0!==t?t:"",project_name:null!==(i=e.projectName)&&void 0!==i?i:"",name:e.name,description:null!==(o=e.description)&&void 0!==o?o:"",category:null!==(d=e.category)&&void 0!==d?d:"",quantity:null!==(s=n(e.quantity))&&void 0!==s?s:0,unit:null!==(c=e.unit)&&void 0!==c?c:"",default_price:null!==(u=n(e.defaultPrice))&&void 0!==u?u:0,status:l(e.status),start_date:null!==(g=e.date)&&void 0!==g?g:null,notes:null!==(m=e.notes)&&void 0!==m?m:"",labor_persons:null!==(x=n(e.laborPersons))&&void 0!==x?x:0,labor_unit_rate:null!==(b=n(e.laborUnitRate))&&void 0!==b?b:0,labor_persons_general:null!==(p=n(e.laborPersonsGeneral))&&void 0!==p?p:0,labor_unit_rate_general:null!==(v=n(e.laborUnitRateGeneral))&&void 0!==v?v:0}}),{data:d,error:s}=await e.from("work_items").insert(o).select();if(null!==s&&void 0!==s)return c(i),console.error("\uc5d1\uc140 \uac00\uc838\uc624\uae30 Supabase \uc800\uc7a5 \uc624\ub958 \uc0c1\uc138:",{message:s.message,details:s.details,hint:s.hint,code:s.code,"\ub370\uc774\ud130\uac1c\uc218":o.length,"\uccab\ubc88\uc9f8\ud56d\ubaa9":o[0]}),void alert("Supabase \uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(s.message,"\n\n\ucf58\uc194(F12)\uc744 \uc5f4\uc5b4 \uc0c1\uc138 \uc815\ubcf4\ub97c \ud655\uc778\ud558\uc138\uc694."));if(null!==d&&void 0!==d){const e=d.map(e=>{var r,t,a,n,l,i,o,d,s,c,u,g,m,x;const b=e.client_id,p=e.workplace_id,v=null!==p&&void 0!==p?p:"";return{id:e.work_item_id,clientId:b,clientName:null!==(r=e.client_name)&&void 0!==r?r:"",workplaceId:v,workplaceName:null!==(t=e.workplace_name)&&void 0!==t?t:"",projectName:null!==(a=e.project_name)&&void 0!==a?a:"",name:e.name,category:null!==(n=e.category)&&void 0!==n?n:"",defaultPrice:null!==(l=e.default_price)&&void 0!==l?l:0,quantity:null!==(i=e.quantity)&&void 0!==i?i:0,unit:null!==(o=e.unit)&&void 0!==o?o:"",description:null!==(d=e.description)&&void 0!==d?d:"",status:(e=>{var r;return null!==(r={planned:"\uc608\uc815",in_progress:"\uc9c4\ud589\uc911",completed:"\uc644\ub8cc",on_hold:"\ubcf4\ub958"}[e])&&void 0!==r?r:"\uc608\uc815"})(e.status),date:null!==(s=e.start_date)&&void 0!==s?s:"",notes:null!==(c=e.notes)&&void 0!==c?c:"",laborPersons:null!==(u=e.labor_persons)&&void 0!==u?u:0,laborUnitRate:null!==(g=e.labor_unit_rate)&&void 0!==g?g:0,laborPersonsGeneral:null!==(m=e.labor_persons_general)&&void 0!==m?m:0,laborUnitRateGeneral:null!==(x=e.labor_unit_rate_general)&&void 0!==x?x:0}});c(r=>[...r.filter(e=>!m.some(r=>r.id===e.id)),...e])}}catch(o){return c(i),void alert("\uc791\uc5c5 \ud56d\ubaa9 \uc800\uc7a5 \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}alert("".concat(a.length,"\uac1c\uc758 \uc791\uc5c5 \ud56d\ubaa9\uc744 \uac00\uc838\uc654\uc2b5\ub2c8\ub2e4."))}catch(o){alert("Excel \ud30c\uc77c\uc744 \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}r.target.value=""},accept:".xlsx,.xls",style:{display:"none"}}),v6:(0,x.jsx)(p,{filteredWorkItems:ee,format:v,getLaborCost:ae}),v7:(0,x.jsx)(h,{clients:e,selectedClient:f,selectedProject:R,filteredCount:ee.length,totalCount:n.length,selectionCount:te.selected.length,bulkStatus:U,statuses:P,getClientProjects:r=>{var t,a;if(void 0===r||null===r||""===r)return[];const l=parseInt(String(r)),i=n.filter(e=>e.clientId===l).map(e=>{var r;return null!==(r=e.projectName)&&void 0!==r?r:""}).filter(e=>""!==e),o=e.find(e=>Number(e.id)===l),d=(null!==(t=null===o||void 0===o?void 0:o.projects)&&void 0!==t?t:[]).filter(e=>""!==e&&null!==e&&void 0!==e),s=(null!==(a=null===o||void 0===o?void 0:o.workplaces)&&void 0!==a?a:[]).map(e=>{var r;return null!==(r=e.description)&&void 0!==r?r:""}).filter(e=>""!==e);return Array.from(new Set([...i,...d,...s]))},onChangeClient:e=>{j(e),F("")},onChangeProject:e=>F(e),onResetFilters:()=>{j(""),F("")},onBulkStatusChange:e=>q(e),onApplyBulkStatus:async()=>{if(!(""!==U&&null!==U&&void 0!==U))return void alert("\ubcc0\uacbd\ud560 \uc0c1\ud0dc\ub97c \uc120\ud0dd\ud558\uc138\uc694.");const e=n;c(e=>e.map(e=>te.selected.includes(e.id)?(0,a.A)((0,a.A)({},e),{},{status:U}):e)),q("");try{const{supabase:r}=await Promise.resolve().then(t.bind(t,2930));if(null===r||void 0===r)return c(e),void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");const a=(e=>{var r;if(null===e||void 0===e||""===e)return"planned";return null!==(r={"\uc608\uc815":"planned","\uc9c4\ud589\uc911":"in_progress","\uc644\ub8cc":"completed","\ubcf4\ub958":"on_hold"}[e])&&void 0!==r?r:"planned"})(U),{error:n}=await r.from("work_items").update({status:a}).in("work_item_id",te.selected);if(null!==n&&void 0!==n)return c(e),void alert("\uc0c1\ud0dc \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(n.message))}catch(r){c(e),alert("\uc0c1\ud0dc \ubcc0\uacbd \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},onCreateBulkInvoice:()=>{var r,t,a,l;if(0===te.selected.length)return void alert("\ud56d\ubaa9\uc744 \uc120\ud0dd\ud558\uc138\uc694.");const i=n.filter(e=>te.selected.includes(e.id)&&"\uc644\ub8cc"===e.status);if(0===i.length)return void alert("\uc644\ub8cc\ub41c \ud56d\ubaa9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=i[0];if(null===o.clientId||void 0===o.clientId||0===o.clientId)return void alert("\uc720\ud6a8\ud55c \uac74\ucd95\uc8fc \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uc791\uc5c5 \ud56d\ubaa9\uc5d0 \uac74\ucd95\uc8fc\ub97c \uba3c\uc800 \uc124\uc815\ud574\uc8fc\uc138\uc694.");if(i.some(e=>e.clientId!==o.clientId||Number(e.workplaceId)!==Number(o.workplaceId)||e.projectName!==o.projectName))return void alert("\uc120\ud0dd\ud55c \ud56d\ubaa9\ub4e4\uc740 \ubaa8\ub450 \uac19\uc740 \uac74\ucd95\uc8fc, \uc791\uc5c5\uc7a5, \ud504\ub85c\uc81d\ud2b8\uc5ec\uc57c \ud569\ub2c8\ub2e4.");const d=e.find(e=>Number(e.id)===o.clientId),s=null===d||void 0===d||null===(r=d.workplaces)||void 0===r?void 0:r.find(e=>Number(e.id)===Number(o.workplaceId)),c="INV-".concat((new Date).getFullYear(),"-").concat(String(u.length+1).padStart(3,"0")),m=i.map(ne),x=m.reduce((e,r)=>e+(0!==r.total?r.total:0),0),b=Date.now()+12096e5,p={id:c,clientId:o.clientId,client:null!==(t=o.clientName)&&void 0!==t?t:"",workplaceId:"number"===typeof o.workplaceId?o.workplaceId:void 0,project:null!==(a=o.projectName)&&void 0!==a?a:"",workplaceAddress:null!==(l=null===s||void 0===s?void 0:s.address)&&void 0!==l?l:"",amount:x,status:"\ubc1c\uc1a1\ub300\uae30",date:(new Date).toISOString().split("T")[0],dueDate:new Date(b).toISOString().split("T")[0],workItems:m};g(e=>[...e,p]),te.clear(),alert("\uccad\uad6c\uc11c ".concat(c,"\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4! (").concat(i.length,"\uac1c \ud56d\ubaa9)"))},onBulkDelete:()=>{0!==te.selected.length?G(!0):alert("\uc0ad\uc81c\ud560 \ud56d\ubaa9\uc744 \uc120\ud0dd\ud558\uc138\uc694.")}}),v8:(0,x.jsx)(N,{items:ee,selection:te,format:v,getLaborCost:ae,getCategoryColor:e=>{var r;return void 0!==e&&null!==e&&""!==e&&null!==(r={"\ud1a0\ubaa9\uacf5\uc0ac":"bg-brown-100 text-brown-800 dark:bg-brown-900/30 dark:text-brown-300","\uad6c\uc870\uacf5\uc0ac":"bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300","\ucca0\uac70\uacf5\uc0ac":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300","\ub9c8\uac10\uacf5\uc0ac":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300","\uc124\ube44\uacf5\uc0ac":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300","\ub0b4\ubd80\uacf5\uc0ac":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300","\uae30\ud0c0":"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300"}[e])&&void 0!==r?r:"bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300"},onEdit:e=>{Y(e),Q((0,a.A)({},e)),O(!0)},onDelete:e=>L(e),onCreateInvoice:async r=>{var l,i,o,d;if(null===r.clientId||void 0===r.clientId||0===r.clientId)return void alert("\uc720\ud6a8\ud55c \uac74\ucd95\uc8fc \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uc791\uc5c5 \ud56d\ubaa9\uc5d0 \uac74\ucd95\uc8fc\ub97c \uba3c\uc800 \uc124\uc815\ud574\uc8fc\uc138\uc694.");const s=n.filter(e=>e.clientId===r.clientId&&Number(e.workplaceId)===Number(r.workplaceId)&&e.projectName===r.projectName&&"\uc644\ub8cc"===e.status);if(0===s.length)return void alert("\uccad\uad6c \uac00\ub2a5\ud55c \uc644\ub8cc\ub41c \uc791\uc5c5 \ud56d\ubaa9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const c=e.find(e=>Number(e.id)===r.clientId),m=null===c||void 0===c||null===(l=c.workplaces)||void 0===l?void 0:l.find(e=>Number(e.id)===Number(r.workplaceId)),x="INV-".concat((new Date).getFullYear(),"-").concat(String(u.length+1).padStart(3,"0")),b=s.map(ne),p=b.reduce((e,r)=>e+(0!==r.total?r.total:0),0),v=Date.now()+12096e5,y={id:x,clientId:r.clientId,client:null!==(i=r.clientName)&&void 0!==i?i:"",workplaceId:"number"===typeof r.workplaceId?r.workplaceId:void 0,project:null!==(o=r.projectName)&&void 0!==o?o:"",workplaceAddress:null!==(d=null===m||void 0===m?void 0:m.address)&&void 0!==d?d:"",amount:p,status:"\ubc1c\uc1a1\ub300\uae30",date:(new Date).toISOString().split("T")[0],dueDate:new Date(v).toISOString().split("T")[0],workItems:b},h=[...u],k=(0,a.A)((0,a.A)({},y),{},{id:"TEMP-".concat(Date.now())});g(e=>[...e,k]);try{const{supabase:e,getCurrentUserId:n}=await Promise.resolve().then(t.bind(t,2930));if(null!==e&&void 0!==e){var f;const t=await n(),l=e=>{var r;return null!==(r={"\ubc1c\uc1a1\ub300\uae30":"pending","\ubc1c\uc1a1\ub428":"pending","\ubbf8\uacb0\uc81c":"overdue","\uacb0\uc81c\uc644\ub8cc":"paid"}[e])&&void 0!==r?r:"pending"},{data:i,error:o}=await e.from("invoices").insert({user_id:t,invoice_number:x,client_id:r.clientId,workplace_id:r.workplaceId,title:null!==(f=r.projectName)&&void 0!==f?f:"",date:y.date,due_date:y.dueDate,status:l(y.status),amount:p,notes:""}).select("invoice_id").single();if(null!==o&&void 0!==o)return alert("\uccad\uad6c\uc11c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(o.message)),void g(h);if(null!==i&&void 0!==i&&b.length>0){const r=b.map((e,r)=>{var a,n,l;return{user_id:t,invoice_id:i.invoice_id,category:null!==(a=e.category)&&void 0!==a?a:"",name:e.name,description:null!==(n=e.description)&&void 0!==n?n:"",unit:null!==(l=e.unit)&&void 0!==l?l:"",quantity:e.quantity,unit_price:e.unitPrice,sort_order:r,date:null!==e.date&&void 0!==e.date&&""!==e.date?e.date:null,notes:null!==e.notes&&void 0!==e.notes&&""!==e.notes?e.notes:null,labor_persons:"number"===typeof e.laborPersons?e.laborPersons:"string"===typeof e.laborPersons&&""!==e.laborPersons?Number(e.laborPersons):0,labor_unit_rate:"number"===typeof e.laborUnitRate?e.laborUnitRate:"string"===typeof e.laborUnitRate&&""!==e.laborUnitRate?Number(e.laborUnitRate):0,labor_persons_general:"number"===typeof e.laborPersonsGeneral?e.laborPersonsGeneral:"string"===typeof e.laborPersonsGeneral&&""!==e.laborPersonsGeneral?Number(e.laborPersonsGeneral):0,labor_unit_rate_general:"number"===typeof e.laborUnitRateGeneral?e.laborUnitRateGeneral:"string"===typeof e.laborUnitRateGeneral&&""!==e.laborUnitRateGeneral?Number(e.laborUnitRateGeneral):0}}),{error:a}=await e.from("invoice_items").insert(r);null!==a&&void 0!==a&&alert("\uccad\uad6c\uc11c \ud56d\ubaa9 \uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(a.message))}g(e=>e.map(e=>e.id===k.id?(0,a.A)((0,a.A)({},y),{},{id:x}):e)),alert("\uccad\uad6c\uc11c ".concat(x,"\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}}catch(N){alert("\uccad\uad6c\uc11c \uc0dd\uc131 \uc2e4\ud328: ".concat(String(N))),g(h)}}}),v9:(0,x.jsx)(w,{open:M,editingItem:T,newItem:K,clients:e,units:m,categories:b,statuses:P,onChangeField:(e,r)=>{let t=r;if(["defaultPrice","quantity","laborPersons","laborUnitRate","laborPersonsGeneral","laborUnitRateGeneral"].includes(e)){const e=String(r).replace(/[^\d-]/g,"");t=""===e||"-"===e?"":y(e)}else if(["clientId","workplaceId"].includes(e)){const e=parseInt(String(r));t=0!==e?e:0}Q(r=>(0,a.A)((0,a.A)({},r),{},{[e]:t}))},onCancel:()=>{O(!1),Y(null),Q(H)},onSubmit:async l=>{l.preventDefault();const i=e.find(e=>Number(e.id)===Number(K.clientId)),o=k(K.clientId).find(e=>e.id===K.workplaceId);if(null!==T){var d,s;const e=n,r=(0,a.A)((0,a.A)((0,a.A)({},T),K),{},{clientName:null!==(d=null===i||void 0===i?void 0:i.name)&&void 0!==d?d:T.clientName,workplaceName:null!==(s=null===o||void 0===o?void 0:o.name)&&void 0!==s?s:T.workplaceName});c(e=>e.map(e=>e.id===T.id?r:e));try{var u,g,m,x,b,p,v,y,h,f,N,j;const{supabase:a}=await Promise.resolve().then(t.bind(t,2930));if(null===a||void 0===a)return c(e),void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");const n=e=>{if(null===e||void 0===e||""===e)return null;const r=Number(e);return isNaN(r)?null:r},l=e=>{var r;if(null===e||void 0===e||""===e)return"planned";return null!==(r={"\uc608\uc815":"planned","\uc9c4\ud589\uc911":"in_progress","\uc644\ub8cc":"completed","\ubcf4\ub958":"on_hold"}[e])&&void 0!==r?r:"planned"},{error:i}=await a.from("work_items").update({client_id:n(r.clientId),workplace_id:n(r.workplaceId),project_name:null!==(u=r.projectName)&&void 0!==u?u:"",name:r.name,description:null!==(g=r.description)&&void 0!==g?g:"",category:null!==(m=r.category)&&void 0!==m?m:"",quantity:null!==(x=n(r.quantity))&&void 0!==x?x:0,unit:null!==(b=r.unit)&&void 0!==b?b:"",default_price:null!==(p=n(r.defaultPrice))&&void 0!==p?p:0,status:l(r.status),start_date:null!==(v=r.date)&&void 0!==v?v:null,notes:null!==(y=r.notes)&&void 0!==y?y:"",labor_persons:null!==(h=n(r.laborPersons))&&void 0!==h?h:0,labor_unit_rate:null!==(f=n(r.laborUnitRate))&&void 0!==f?f:0,labor_persons_general:null!==(N=n(r.laborPersonsGeneral))&&void 0!==N?N:0,labor_unit_rate_general:null!==(j=n(r.laborUnitRateGeneral))&&void 0!==j?j:0}).eq("work_item_id",r.id);if(null!==i&&void 0!==i)return c(e),void alert("\uc791\uc5c5 \ud56d\ubaa9 \uc218\uc815 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(i.message))}catch(B){return c(e),void alert("\uc791\uc5c5 \ud56d\ubaa9 \uc218\uc815 \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}else{var w,_,I;const l=n,d=e,s=(n.length>0?Math.max(...n.map(e=>{var r;return null!==(r=Number(e.id))&&void 0!==r?r:0})):0)+1,u=(0,a.A)((0,a.A)({},K),{},{id:s,clientName:null!==(w=null===i||void 0===i?void 0:i.name)&&void 0!==w?w:"",workplaceName:null!==(_=null===o||void 0===o?void 0:o.name)&&void 0!==_?_:"",date:null!==(I=K.date)&&void 0!==I?I:(new Date).toISOString().split("T")[0]});c(e=>[...e,u]);void 0!==K.projectName&&null!==K.projectName&&""!==K.projectName&&r(e=>e.map(e=>{var r;return Number(e.id)===Number(K.clientId)?(0,a.A)((0,a.A)({},e),{},{projects:Array.from(new Set([...null!==(r=e.projects)&&void 0!==r?r:[],K.projectName]))}):e}));try{var C,S,P,R,F,U,q,A,G,D,L,M;const{supabase:e}=await Promise.resolve().then(t.bind(t,2930));if(null===e||void 0===e)return c(l),r(d),void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");const{getCurrentUserId:a}=await Promise.resolve().then(t.bind(t,2930)),n=await a(),i=e=>{if(null===e||void 0===e||""===e)return null;const r=Number(e);return isNaN(r)?null:r},o=(e=>{var r;if(null===e||void 0===e||""===e)return"planned";return null!==(r={"\uc608\uc815":"planned","\uc9c4\ud589\uc911":"in_progress","\uc644\ub8cc":"completed","\ubcf4\ub958":"on_hold"}[e])&&void 0!==r?r:"planned"})(u.status),s=i(u.clientId),g=i(u.workplaceId);if(null===s)return alert("\uac74\ucd95\uc8fc\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694."),c(l),void r(d);const{error:m}=await e.from("work_items").insert({user_id:n,client_id:s,workplace_id:g,project_name:null!==(C=u.projectName)&&void 0!==C?C:"",name:u.name,description:null!==(S=u.description)&&void 0!==S?S:"",category:null!==(P=u.category)&&void 0!==P?P:"",quantity:null!==(R=i(u.quantity))&&void 0!==R?R:0,unit:null!==(F=u.unit)&&void 0!==F?F:"",default_price:null!==(U=i(u.defaultPrice))&&void 0!==U?U:0,status:o,start_date:null!==(q=u.date)&&void 0!==q?q:null,notes:null!==(A=u.notes)&&void 0!==A?A:"",labor_persons:null!==(G=i(u.laborPersons))&&void 0!==G?G:0,labor_unit_rate:null!==(D=i(u.laborUnitRate))&&void 0!==D?D:0,labor_persons_general:null!==(L=i(u.laborPersonsGeneral))&&void 0!==L?L:0,labor_unit_rate_general:null!==(M=i(u.laborUnitRateGeneral))&&void 0!==M?M:0});if(null!==m&&void 0!==m)return c(l),r(d),void alert("\uc791\uc5c5 \ud56d\ubaa9 \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(m.message))}catch(B){return c(l),r(d),void alert("\uc791\uc5c5 \ud56d\ubaa9 \uc0dd\uc131 \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}O(!1),Y(null),Q(H)}}),v10:(0,x.jsx)(_,{open:B,clients:e,categories:b,units:m,bulkItems:Z,bulkBaseInfo:J,showBulkCustomProject:W,statuses:P,onBaseInfoChangeField:(e,r)=>{let t=r;if("clientId"===e||"workplaceId"===e){const e=parseInt(String(r));t=0!==e?e:""}else if("bulkLaborPersons"===e||"bulkLaborUnitRate"===e){const e=String(r).replace(/[^\d-]/g,"");t=""===e||"-"===e?"":y(e)}X(n=>{const l=(0,a.A)((0,a.A)({},n),{},{[e]:t});if("clientId"===e&&(l.workplaceId="",z(!1)),"workplaceId"===e){var i;const e=k(l.clientId).find(e=>e.id===Number(t)),r=""!==l.projectName&&null!==l.projectName&&void 0!==l.projectName,a=void 0!==(null===e||void 0===e?void 0:e.description)&&null!==(null===e||void 0===e?void 0:e.description)&&""!==(null===e||void 0===e?void 0:e.description);!r&&a&&(l.projectName=null!==(i=e.description)&&void 0!==i?i:"")}return"projectName"===e&&("custom"===r?(z(!0),l.projectName=""):z(!1)),l})},onItemChange:(e,r,t)=>{V(n=>{const l=[...n];let i=t;if(["defaultPrice","quantity","laborPersons","laborUnitRate"].includes(r)){const e=String(t).replace(/[^\d-]/g,"");i=""===e||"-"===e?"":y(e)}const o=l[e];return void 0!==o&&(l[e]=(0,a.A)((0,a.A)({},o),{},{[r]:i})),l})},onAddItem:()=>{V(e=>[...e,{name:"",category:"",defaultPrice:"",quantity:"",unit:"",description:"",status:"\uc608\uc815",notes:"",laborPersons:"",laborUnitRate:""}])},onRemoveItem:e=>{V(r=>r.length<=1?r:r.filter((r,t)=>t!==e))},onCancel:()=>{E(!1)},onSubmit:async l=>{var i,o;l.preventDefault();const d=[],s=""!==J.clientId&&null!==J.clientId&&void 0!==J.clientId,u=""!==J.workplaceId&&null!==J.workplaceId&&void 0!==J.workplaceId,g=""!==J.projectName&&null!==J.projectName&&void 0!==J.projectName;if(s||d.push("\uac74\ucd95\uc8fc\ub97c \uc120\ud0dd\ud558\uc138\uc694."),u||d.push("\uc791\uc5c5\uc7a5\uc744 \uc120\ud0dd\ud558\uc138\uc694."),g||d.push("\ud504\ub85c\uc81d\ud2b8\uba85\uc744 \uc785\ub825\ud558\uc138\uc694."),Z.forEach((e,r)=>{void 0!==e.name&&null!==e.name&&""!==String(e.name).trim()||d.push("\ud56d\ubaa9 #".concat(r+1,": \ub0b4\uc6a9\uc740 \ud544\uc218\uc785\ub2c8\ub2e4."))}),d.length>0)return void alert(d.join("\n"));const m=e.find(e=>Number(e.id)===Number(J.clientId)),x=k(J.clientId).find(e=>e.id===Number(J.workplaceId)),b=n.length>0?Math.max(...n.map(e=>{var r;return null!==(r=Number(e.id))&&void 0!==r?r:0})):0,p="number"===typeof J.bulkLaborPersons?J.bulkLaborPersons:""===String(J.bulkLaborPersons).trim()?"":null!==(i=parseInt(String(J.bulkLaborPersons),10))&&void 0!==i?i:0,v="number"===typeof J.bulkLaborUnitRate?J.bulkLaborUnitRate:""===String(J.bulkLaborUnitRate).trim()?"":null!==(o=parseInt(String(J.bulkLaborUnitRate),10))&&void 0!==o?o:0,y=Z.map((e,r)=>{var t,a,n,l,i,o,d,s,c,u,g;return{id:b+r+1,clientId:Number(J.clientId),clientName:null!==(t=null===m||void 0===m?void 0:m.name)&&void 0!==t?t:"",workplaceId:Number(J.workplaceId),workplaceName:null!==(a=null===x||void 0===x?void 0:x.name)&&void 0!==a?a:"",projectName:J.projectName,date:null!==(n=J.date)&&void 0!==n?n:(new Date).toISOString().split("T")[0],name:null!==(l=e.name)&&void 0!==l?l:"",category:null!==(i=e.category)&&void 0!==i?i:"",defaultPrice:"number"===typeof e.defaultPrice&&0!==e.defaultPrice?e.defaultPrice:""===e.defaultPrice?"":0,quantity:"number"===typeof e.quantity&&0!==e.quantity?e.quantity:""===e.quantity?"":1,unit:null!==(o=e.unit)&&void 0!==o?o:"",description:null!==(d=e.description)&&void 0!==d?d:"",status:null!==(s=e.status)&&void 0!==s?s:"\uc608\uc815",notes:null!==(c=e.notes)&&void 0!==c?c:"",laborPersonsGeneral:p,laborUnitRateGeneral:v,laborPersons:null!==(u=e.laborPersons)&&void 0!==u?u:"",laborUnitRate:null!==(g=e.laborUnitRate)&&void 0!==g?g:""}}),h=n,f=e;c(e=>[...e,...y]);""!==J.projectName&&null!==J.projectName&&void 0!==J.projectName&&r(e=>e.map(e=>{var r;return Number(e.id)===Number(J.clientId)?(0,a.A)((0,a.A)({},e),{},{projects:Array.from(new Set([...null!==(r=e.projects)&&void 0!==r?r:[],J.projectName]))}):e}));try{const{supabase:e}=await Promise.resolve().then(t.bind(t,2930));if(null===e||void 0===e)return c(h),r(f),void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");const{getCurrentUserId:a}=await Promise.resolve().then(t.bind(t,2930)),n=await a(),l=e=>{if(null===e||void 0===e||""===e)return null;const r=Number(e);return isNaN(r)?null:r},i=e=>{var r;if(null===e||void 0===e||""===e)return"planned";return null!==(r={"\uc608\uc815":"planned","\uc9c4\ud589\uc911":"in_progress","\uc644\ub8cc":"completed","\ubcf4\ub958":"on_hold"}[e])&&void 0!==r?r:"planned"},o=y.map(e=>{var r,t,a,o,d,s,c,u,g,m,x,b;return{user_id:n,client_id:l(e.clientId),workplace_id:l(e.workplaceId),project_name:null!==(r=e.projectName)&&void 0!==r?r:"",name:e.name,description:null!==(t=e.description)&&void 0!==t?t:"",category:null!==(a=e.category)&&void 0!==a?a:"",quantity:null!==(o=l(e.quantity))&&void 0!==o?o:0,unit:null!==(d=e.unit)&&void 0!==d?d:"",default_price:null!==(s=l(e.defaultPrice))&&void 0!==s?s:0,status:i(e.status),start_date:null!==(c=e.date)&&void 0!==c?c:null,notes:null!==(u=e.notes)&&void 0!==u?u:"",labor_persons:null!==(g=l(e.laborPersons))&&void 0!==g?g:0,labor_unit_rate:null!==(m=l(e.laborUnitRate))&&void 0!==m?m:0,labor_persons_general:null!==(x=l(e.laborPersonsGeneral))&&void 0!==x?x:0,labor_unit_rate_general:null!==(b=l(e.laborUnitRateGeneral))&&void 0!==b?b:0}}),{data:d,error:s}=await e.from("work_items").insert(o).select("\n          *,\n          clients!client_id (\n            company_name,\n            workplaces\n          )\n        ");if(null!==s&&void 0!==s)return c(h),r(f),void alert("\uc791\uc5c5 \ud56d\ubaa9 \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(s.message));if(null!==d&&void 0!==d&&d.length>0){const e=e=>{var r;return null!==(r={planned:"\uc608\uc815",in_progress:"\uc9c4\ud589\uc911",completed:"\uc644\ub8cc",on_hold:"\ubcf4\ub958",cancelled:"\ubcf4\ub958"}[e])&&void 0!==r?r:"\uc608\uc815"},r=d.map(r=>{const t=r.clients,a=null!==(null===t||void 0===t?void 0:t.company_name)&&void 0!==(null===t||void 0===t?void 0:t.company_name)?String(t.company_name):"",n=(null!==(null===t||void 0===t?void 0:t.workplaces)&&void 0!==(null===t||void 0===t?void 0:t.workplaces)?t.workplaces:[]).find(e=>null!==e.id&&void 0!==e.id&&e.id===r.workplace_id),l=null!==(null===n||void 0===n?void 0:n.name)&&void 0!==(null===n||void 0===n?void 0:n.name)?String(n.name):"",i=r.workplace_id,o=null!==i&&void 0!==i?i:"";return{id:r.work_item_id,clientId:r.client_id,clientName:a,workplaceId:o,workplaceName:l,projectName:null!==r.project_name&&void 0!==r.project_name?String(r.project_name):"",name:r.name,category:null!==r.category&&void 0!==r.category?String(r.category):"",defaultPrice:null!==r.default_price&&void 0!==r.default_price?Number(r.default_price):0,quantity:null!==r.quantity&&void 0!==r.quantity?Number(r.quantity):0,unit:null!==r.unit&&void 0!==r.unit?String(r.unit):"",description:null!==r.description&&void 0!==r.description?String(r.description):"",status:e(r.status),date:null!==r.start_date&&void 0!==r.start_date?String(r.start_date):"",notes:null!==r.notes&&void 0!==r.notes?String(r.notes):"",laborPersons:null!==r.labor_persons&&void 0!==r.labor_persons?Number(r.labor_persons):0,laborUnitRate:null!==r.labor_unit_rate&&void 0!==r.labor_unit_rate?Number(r.labor_unit_rate):0,laborPersonsGeneral:null!==r.labor_persons_general&&void 0!==r.labor_persons_general?Number(r.labor_persons_general):0,laborUnitRateGeneral:null!==r.labor_unit_rate_general&&void 0!==r.labor_unit_rate_general?Number(r.labor_unit_rate_general):0}});c(e=>[...e.filter(e=>!y.some(r=>r.id===e.id)),...r])}}catch(N){return c(h),r(f),void alert("\uc791\uc5c5 \ud56d\ubaa9 \uc0dd\uc131 \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}E(!1),z(!1),V([{name:"",category:"",defaultPrice:"",quantity:"",unit:"",description:"",status:"\uc608\uc815",notes:"",laborPersons:"",laborUnitRate:""}]),X({clientId:"",workplaceId:"",projectName:"",date:(new Date).toISOString().split("T")[0],bulkLaborPersons:"",bulkLaborUnitRate:""}),alert("".concat(y.length,"\uac1c\uc758 \uc791\uc5c5 \ud56d\ubaa9\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}}),v11:(0,x.jsx)(I.A,{open:A,title:"\uc120\ud0dd \uc0ad\uc81c",message:"\uc120\ud0dd\ub41c ".concat(te.selected.length,"\uac1c\uc758 \uc791\uc5c5 \ud56d\ubaa9\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),confirmText:"\uc0ad\uc81c",cancelText:"\ucde8\uc18c",onConfirm:async()=>{const e=te.selected.length;c(e=>e.filter(e=>!te.selected.includes(e.id))),te.clear(),G(!1),alert("".concat(e,"\uac1c\uc758 \uc791\uc5c5 \ud56d\ubaa9\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."));try{const{supabase:e}=await Promise.resolve().then(t.bind(t,2930));if(null===e||void 0===e)return;const{error:r}=await e.from("work_items").delete().in("work_item_id",te.selected)}catch(r){}},onCancel:()=>G(!1)}),v12:(0,x.jsx)(I.A,{open:null!=D,title:"\uc791\uc5c5 \ud56d\ubaa9 \uc0ad\uc81c",message:"\uc774 \uc791\uc5c5 \ud56d\ubaa9\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",confirmText:"\uc0ad\uc81c",cancelText:"\ucde8\uc18c",onConfirm:async()=>{if(null!=D){c(e=>e.filter(e=>e.id!==D)),L(null);try{const{supabase:e}=await Promise.resolve().then(t.bind(t,2930));if(null===e||void 0===e)return;const{error:r}=await e.from("work_items").delete().eq("work_item_id",D)}catch(e){}}},onCancel:()=>L(null)})})};function F(){return(0,x.jsx)(R,{})}},7467:(e,r,t)=>{t.d(r,{C:()=>n});var a=t(9198);function n(e){const[r,t]=(0,a.useState)([]);(0,a.useEffect)(()=>{t(r=>{const t=r.filter(r=>e.includes(r));return t.length===r.length&&t.every((e,t)=>e===r[t])?r:t})},[e]);const n=(0,a.useMemo)(()=>e.length>0&&r.length===e.length,[e.length,r.length]);return{selected:r,setSelected:t,allSelected:n,toggleOne:(e,r)=>{t(t=>r?Array.from(new Set([...t,e])):t.filter(r=>r!==e))},toggleAll:r=>{t(r?[...e]:[])},clear:()=>t([])}}},7875:(e,r,t)=>{function a(){return{format:e=>{if(null===e||void 0===e||""===e)return"";const r=String(e).replace(/[^\d-]/g,"");if(""===r||"-"===r)return"";const t=Number(r);return Number.isNaN(t)?"":t.toLocaleString()},parse:e=>{const r=String(null!==e&&void 0!==e?e:"").replace(/[^\d-]/g,"");if(""===r||"-"===r)return 0;const t=parseInt(r,10);return Number.isNaN(t)?0:t}}}t.d(r,{g:()=>a})}}]);
//# sourceMappingURL=355.91977f4e.chunk.js.map