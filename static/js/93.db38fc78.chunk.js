"use strict";(self.webpackChunkconstruction_management_frontend=self.webpackChunkconstruction_management_frontend||[]).push([[93],{7093:(e,r,a)=>{a.r(r),a.d(r,{default:()=>h});var s=a(6601),t=a(9198),d=a(109),l=a(8458),n=a(3515),o=a(5345),i=a(1182),c=a(7542),m=a(1415),u=a(2930),x=a(6696),g=a(5582);const b=(0,s.FZ)(e=>(0,g.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"\uc124\uc815"}),(0,g.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"\uacc4\uc815 \uc815\ubcf4\ub97c \uad00\ub9ac\ud558\uc138\uc694"})]}),(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[(0,g.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[e.v0,"\ud604\uc7ac \ub85c\uadf8\uc778 \uc815\ubcf4"]}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300 w-32",children:"\ub85c\uadf8\uc778 \ubc29\uc2dd:"}),(0,g.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:e.v1})]}),(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300 w-32",children:"\uc774\ub984:"}),(0,g.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:e.v2})]}),(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300 w-32",children:"\uc774\uba54\uc77c:"}),(0,g.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:e.v3})]}),e.v4]})]}),(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,g.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[e.v5,"\uc774\ub984 \ubcc0\uacbd"]}),(0,g.jsxs)("form",{onSubmit:e.v6,className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"newName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc0c8 \uc774\ub984"}),(0,g.jsx)("input",{id:"newName",type:"text",value:e.v7,onChange:e.v8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"\uc0c8 \uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),e.v9,e.v10,(0,g.jsx)("button",{type:"submit",disabled:e.v11,className:"w-full bg-blue-600 text-white py-2.5 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.v12})]})]}),e.v13,e.v14,(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,g.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[e.v15,"\ub85c\uadf8\uc544\uc6c3"]}),(0,g.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"\ubaa8\ub4e0 \uae30\uae30\uc5d0\uc11c \ub85c\uadf8\uc544\uc6c3\ub429\ub2c8\ub2e4."}),(0,g.jsx)("button",{type:"button",onClick:e.v16,className:"w-full bg-red-600 text-white py-2.5 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors",children:"\ub85c\uadf8\uc544\uc6c3"})]})]})]}),{name:"Settings_1",portals:["v0","v1","v2","v3","v4","v5","v9","v10","v12","v13","v14","v15"]}),h=()=>{const e=(0,d.Zp)(),{currentUser:r,logout:a}=(0,x.Jd)(),[s,h]=(0,t.useState)(""),[v,p]=(0,t.useState)(""),[y,k]=(0,t.useState)(null),[f,j]=(0,t.useState)(""),[N,w]=(0,t.useState)(!1),[S,E]=(0,t.useState)(""),[U,A]=(0,t.useState)(""),[D,G]=(0,t.useState)(""),[_,B]=(0,t.useState)(!1),[C,F]=(0,t.useState)(""),[P,Z]=(0,t.useState)(""),[I,J]=(0,t.useState)(""),[K,q]=(0,t.useState)(""),[z,H]=(0,t.useState)(!1),[L,M]=(0,t.useState)(""),[O,Q]=(0,t.useState)("");(0,t.useEffect)(()=>{(async()=>{if(null!==r&&void 0!==r&&(h(null!==r.username&&void 0!==r.username?r.username:""),p(null!==r.name&&void 0!==r.name?r.name:""),j(null!==r.name&&void 0!==r.name?r.name:""),G(null!==r.username&&void 0!==r.username?r.username:"")),null!==u.supabase)try{var e,a;const{data:{session:r}}=await u.supabase.auth.getSession();console.log("\ud83d\udd0d DEBUG: Full session object:",r),console.log("\ud83d\udd0d DEBUG: session.user.app_metadata:",null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e.app_metadata),console.log("\ud83d\udd0d DEBUG: session.user.identities:",null===r||void 0===r||null===(a=r.user)||void 0===a?void 0:a.identities);let t="email";if(null!==r&&void 0!==r&&r.user){var s;const e=r.user,a=null===(s=e.app_metadata)||void 0===s?void 0:s.provider;if(console.log("\ud83d\udd0d DEBUG: session provider:",a),e.identities&&e.identities.length>0){const r=e.identities.find(r=>r.user_id===e.id);if(console.log("\ud83d\udd0d DEBUG: Current session identity:",r),r){const e=r.provider;console.log("\ud83d\udd0d DEBUG: Identity provider:",e),"google"===e?t="google":"kakao"===e?t="kakao":"email"===e&&(t="email")}else a&&("google"===a?t="google":"kakao"===a?t="kakao":"email"===a&&(t="email"))}else a&&("google"===a?t="google":"kakao"===a?t="kakao":"email"===a&&(t="email"));console.log("\u2705 DEBUG: Final detectedProvider:",t),k(t)}}catch(t){console.error("\u274c DEBUG: Error getting session:",t),k("email")}})()},[r]);const R=e=>"google"===e?"Google \ub85c\uadf8\uc778":"kakao"===e?"Kakao \ub85c\uadf8\uc778":"email"===e?"\uc774\uba54\uc77c \ub85c\uadf8\uc778":"\uc54c \uc218 \uc5c6\uc74c",T="google"===y||"kakao"===y;return(0,g.jsx)(b,{v0:(0,g.jsx)(c.A,{className:"w-6 h-6 mr-2 text-blue-600 dark:text-blue-400"}),v1:R(y),v2:""!==v&&null!==v?v:"(\uc5c6\uc74c)",v3:s,v4:T&&(0,g.jsx)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:(0,g.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["SNS \ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790\ub294 ",R(y)," \uacc4\uc815\uc5d0\uc11c \uc815\ubcf4\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4."]})}),v5:(0,g.jsx)(c.A,{className:"w-6 h-6 mr-2 text-blue-600 dark:text-blue-400"}),v6:async e=>{if(e.preventDefault(),null!==u.supabase&&void 0!==u.supabase){if(w(!0),A(""),E(""),""===f.trim())return A("\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."),void w(!1);try{const{error:e}=await u.supabase.auth.updateUser({data:{name:f}});null!==e&&void 0!==e?A(e.message):(E("\uc774\ub984\uc774 \uc131\uacf5\uc801\uc73c\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),p(f))}catch(r){A("\uc774\ub984 \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{w(!1)}}},v7:f,v8:e=>j(e.target.value),v9:""!==U&&(0,g.jsxs)("div",{className:"flex items-center p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[(0,g.jsx)(m.A,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),(0,g.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:U})]}),v10:""!==S&&(0,g.jsxs)("div",{className:"flex items-center p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:[(0,g.jsx)(n.A,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),(0,g.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm",children:S})]}),v11:N,v12:N?"\ubcc0\uacbd \uc911...":"\uc774\ub984 \ubcc0\uacbd",v13:!T&&(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,g.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[(0,g.jsx)(o.A,{className:"w-6 h-6 mr-2 text-blue-600 dark:text-blue-400"}),"\uc774\uba54\uc77c \ubcc0\uacbd"]}),(0,g.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==u.supabase&&void 0!==u.supabase){if(B(!0),Z(""),F(""),""===D.trim()||!D.includes("@"))return Z("\uc720\ud6a8\ud55c \uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."),void B(!1);if(D===s)return Z("\ud604\uc7ac \uc774\uba54\uc77c\uacfc \ub3d9\uc77c\ud569\ub2c8\ub2e4."),void B(!1);try{const{error:e}=await u.supabase.auth.updateUser({email:D});null!==e&&void 0!==e?Z(e.message):F("\uc774\uba54\uc77c \ubcc0\uacbd \ud655\uc778 \uba54\uc77c\uc774 \ubc1c\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc0c8 \uc774\uba54\uc77c\uc5d0\uc11c \ud655\uc778\ud574\uc8fc\uc138\uc694.")}catch(r){Z("\uc774\uba54\uc77c \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{B(!1)}}},className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"newEmail",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc0c8 \uc774\uba54\uc77c"}),(0,g.jsx)("input",{id:"newEmail",type:"email",value:D,onChange:e=>G(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"\uc0c8 \uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),""!==P&&(0,g.jsxs)("div",{className:"flex items-center p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[(0,g.jsx)(m.A,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),(0,g.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:P})]}),""!==C&&(0,g.jsxs)("div",{className:"flex items-center p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:[(0,g.jsx)(n.A,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),(0,g.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm",children:C})]}),(0,g.jsx)("button",{type:"submit",disabled:_,className:"w-full bg-blue-600 text-white py-2.5 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:_?"\ubcc0\uacbd \uc911...":"\uc774\uba54\uc77c \ubcc0\uacbd"}),(0,g.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"* \uc774\uba54\uc77c \ubcc0\uacbd \uc2dc \uc0c8 \uc774\uba54\uc77c\ub85c \ud655\uc778 \uba54\uc77c\uc774 \ubc1c\uc1a1\ub429\ub2c8\ub2e4."})]})]}),v14:!T&&(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,g.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[(0,g.jsx)(i.A,{className:"w-6 h-6 mr-2 text-blue-600 dark:text-blue-400"}),"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"]}),(0,g.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==u.supabase&&void 0!==u.supabase){if(H(!0),Q(""),M(""),I.length<6)return Q("\uc0c8 \ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."),void H(!1);if(I!==K)return Q("\uc0c8 \ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),void H(!1);try{const{error:e}=await u.supabase.auth.updateUser({password:I});null!==e&&void 0!==e?Q(e.message):(M("\ube44\ubc00\ubc88\ud638\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),J(""),q(""))}catch(r){Q("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{H(!1)}}},className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc0c8 \ube44\ubc00\ubc88\ud638"}),(0,g.jsx)("input",{id:"newPassword",type:"password",value:I,onChange:e=>J(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638 (\ucd5c\uc18c 6\uc790)"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc0c8 \ube44\ubc00\ubc88\ud638 \ud655\uc778"}),(0,g.jsx)("input",{id:"confirmPassword",type:"password",value:K,onChange:e=>q(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638 \ud655\uc778"})]}),""!==O&&(0,g.jsxs)("div",{className:"flex items-center p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[(0,g.jsx)(m.A,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),(0,g.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:O})]}),""!==L&&(0,g.jsxs)("div",{className:"flex items-center p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:[(0,g.jsx)(n.A,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),(0,g.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm",children:L})]}),(0,g.jsx)("button",{type:"submit",disabled:z,className:"w-full bg-blue-600 text-white py-2.5 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:z?"\ubcc0\uacbd \uc911...":"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"})]})]}),v15:(0,g.jsx)(l.A,{className:"w-6 h-6 mr-2 text-red-600 dark:text-red-400"}),v16:async()=>{window.confirm("\ub85c\uadf8\uc544\uc6c3 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(a(),e("/"))}})}}}]);
//# sourceMappingURL=93.db38fc78.chunk.js.map