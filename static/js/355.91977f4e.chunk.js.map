{"version":3,"file":"static/js/355.91977f4e.chunk.js","mappings":"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","sources":["hooks/useCalendar.ts","components/ConfirmDialog.tsx","hooks/useClientWorkplaces.ts","components/work-items/StatsCards.tsx","utils/guards.ts","components/work-items/FilterBar.tsx","components/work-items/WorkItemsTable.tsx","components/work-items/ItemFormModal.tsx","components/work-items/BulkFormModal.tsx","hooks/useProjects.ts","components/WorkItems.tsx","pages/WorkItemsPage.tsx","hooks/useSelection.ts","hooks/useNumberFormat.ts"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\nexport type UseCalendarOptions = {\n  value?: string | null;\n  onChange?: (date: string) => void;\n  closeOnSelect?: boolean;\n};\n\nexport function useCalendar(options: UseCalendarOptions = {}) {\n  const { value, onChange, closeOnSelect = true } = options;\n  const [open, setOpen] = useState(false);\n  const [month, setMonth] = useState<Date>(() => new Date());\n  const containerRef = useRef<HTMLDivElement | null>(null);\n\n  // Sync month with external value\n  useEffect(() => {\n    if (value == null || value === '') return;\n    const parts = value.split('-').map((x) => parseInt(x, 10));\n    const y = parts[0];\n    const m = parts[1];\n    if (Number.isFinite(y) && Number.isFinite(m)) {\n      const ONE = 1; // eslint-disable-line no-magic-numbers\n      setMonth(new Date(y, m - ONE, ONE));\n    }\n  }, [value]);\n\n  // Close when clicking outside\n  useEffect(() => {\n    const onDoc = (e: MouseEvent) => {\n      const el = containerRef.current;\n      if (el !== null && !el.contains(e.target as Node)) setOpen(false);\n    };\n    document.addEventListener('mousedown', onDoc);\n    return () => document.removeEventListener('mousedown', onDoc);\n  }, []);\n\n  const pad2 = (n: number) => {\n    const WIDTH = 2; // eslint-disable-line no-magic-numbers\n    return String(n).padStart(WIDTH, '0');\n  };\n  const prevMonth = () => setMonth((d) => new Date(d.getFullYear(), d.getMonth() - 1, 1));\n  const nextMonth = () => setMonth((d) => new Date(d.getFullYear(), d.getMonth() + 1, 1));\n  const pickDate = (day: number | null) => {\n    if (day == null || !Number.isFinite(day) || day <= 0) return;\n    const y = month.getFullYear();\n    const m = month.getMonth() + 1;\n    const v = `${y}-${pad2(m)}-${pad2(day)}`;\n    onChange?.(v);\n    if (closeOnSelect) setOpen(false);\n  };\n\n  // Calendar grid (weeks x days)\n  const getCalendarGrid = () => {\n    const first = new Date(month.getFullYear(), month.getMonth(), 1);\n    const startDay = first.getDay();\n    const days = new Date(month.getFullYear(), month.getMonth() + 1, 0).getDate();\n    const cells: Array<number | null> = [];\n    for (let i = 0; i < startDay; i++) cells.push(null);\n    for (let d = 1; d <= days; d++) cells.push(d);\n    const rows: Array<Array<number | null>> = [];\n    const DAYS_IN_WEEK = 7; // eslint-disable-line no-magic-numbers\n    for (let i = 0; i < cells.length; i += DAYS_IN_WEEK) rows.push(cells.slice(i, i + DAYS_IN_WEEK));\n    return rows;\n  };\n\n  return {\n    open,\n    setOpen,\n    month,\n    setMonth,\n    prevMonth,\n    nextMonth,\n    pickDate,\n    getCalendarGrid,\n    containerRef,\n  };\n}\n","import { compiledBlock as _compiledBlock } from \"million/react\";\nimport { block as _block } from \"million/react\";\nimport React from 'react';\ntype Props = {\n  open: boolean;\n  title: string;\n  message: string | React.ReactNode;\n  confirmText?: string;\n  cancelText?: string;\n  onConfirm: () => void;\n  onCancel: () => void;\n};\nconst ConfirmDialog_1 = _compiledBlock(_props => <div className=\"fixed inset-0 bg-black bg-opacity-30 dark:bg-black dark:bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2\">{_props.v0}</h3>\n        <div className=\"text-sm text-gray-600 dark:text-gray-300 mb-4\">{_props.v1}</div>\n        <div className=\"flex justify-end space-x-2\">\n          <button onClick={_props.v2} className=\"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100\">{_props.v3}</button>\n          <button onClick={_props.v4} className=\"px-4 py-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded\">{_props.v5}</button>\n        </div>\n      </div>\n    </div>, {\n  name: \"ConfirmDialog_1\",\n  portals: [\"v0\", \"v1\", \"v3\", \"v5\"]\n});\nconst ConfirmDialog: React.FC<Props> = ({\n  open,\n  title,\n  message,\n  confirmText = '확인',\n  cancelText = '취소',\n  onConfirm,\n  onCancel\n}) => {\n  if (!open) return null;\n  return /*@million jsx-skip*/<ConfirmDialog_1 v0={title} v1={message} v2={onCancel} v3={cancelText} v4={onConfirm} v5={confirmText} />;\n};\nexport default ConfirmDialog;","import { useApp } from '../contexts/AppContext';\nimport type { Client, Workplace } from '../types/domain';\n\nexport function useClientWorkplaces() {\n  const { clients } = useApp();\n\n  const getClientWorkplaces = (clientId?: number | string): Workplace[] => {\n    if (clientId == null || (typeof clientId === 'string' && clientId.trim() === '')) return [];\n    const parsed = typeof clientId === 'string' ? parseInt(clientId, 10) : clientId;\n    const id = Number.isFinite(parsed) ? parsed : null;\n    if (id === null) return [];\n    const client = (clients as Client[]).find(c => c.id === id);\n    const workplaces: Workplace[] = (client !== undefined && Array.isArray(client.workplaces)) ? client.workplaces : [];\n    return workplaces;\n  };\n\n  return { getClientWorkplaces };\n}\n","import { compiledBlock as _compiledBlock } from \"million/react\";\nconst StatsCards_1 = _compiledBlock(_props => <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-4\">\n      <div className=\"bg-blue-100 dark:bg-blue-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <p className=\"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2\">총 작업 항목</p>\n            <p className=\"text-base font-bold text-gray-900 dark:text-gray-100\">{_props.v0}건</p>\n          </div>\n          <div className=\"bg-blue-500 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12\">\n            {_props.v1}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-green-100 dark:bg-green-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <p className=\"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2\">완료된 작업</p>\n            <p className=\"text-base font-bold text-gray-900 dark:text-gray-100\">{_props.v2}건</p>\n          </div>\n          <div className=\"bg-green-500 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12\">\n            {_props.v3}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-purple-100 dark:bg-purple-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <p className=\"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2\">진행 중인 작업</p>\n            <p className=\"text-base font-bold text-gray-900 dark:text-gray-100\">{_props.v4}건</p>\n          </div>\n          <div className=\"bg-purple-500 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12\">\n            {_props.v5}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-orange-100 dark:bg-orange-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <p className=\"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2\">총 작업 금액</p>\n            <p className=\"text-base font-bold text-gray-900 dark:text-gray-100\">{_props.v6}원</p>\n          </div>\n          <div className=\"bg-orange-500 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12\">\n            {_props.v7}\n          </div>\n        </div>\n      </div>\n    </div>, {\n  name: \"StatsCards_1\",\n  portals: [\"v0\", \"v1\", \"v2\", \"v3\", \"v4\", \"v5\", \"v6\", \"v7\"]\n});\nconst StatsCards = function StatsCards({\n  filteredWorkItems,\n  format,\n  getLaborCost\n}: Props) {\n  const total = filteredWorkItems.length;\n  const completed = filteredWorkItems.filter(i => i.status === '완료').length;\n  const inProgress = filteredWorkItems.filter(i => i.status === '진행중').length;\n  const totalAmount = filteredWorkItems.reduce((sum, item) => {\n    const priceRaw = Number(item.defaultPrice);\n    const qtyRaw = Number(item.quantity);\n    const price = Number.isFinite(priceRaw) ? priceRaw : 0;\n    const qty = Number.isFinite(qtyRaw) ? qtyRaw : 1;\n    return sum + price * qty + getLaborCost(item);\n  }, 0);\n  return /*@million jsx-skip*/<StatsCards_1 v0={total} v1={<WrenchScrewdriverIcon className=\"h-6 w-6\" aria-hidden=\"true\" />} v2={completed} v3={<CheckCircleIcon className=\"h-6 w-6\" aria-hidden=\"true\" />} v4={inProgress} v5={<ExclamationTriangleIcon className=\"h-6 w-6\" aria-hidden=\"true\" />} v6={format(totalAmount)} v7={<CurrencyDollarIcon className=\"h-6 w-6\" aria-hidden=\"true\" />} />;\n};\nimport { block as _block } from \"million/react\";\nimport { WrenchScrewdriverIcon, CheckCircleIcon, ExclamationTriangleIcon, CurrencyDollarIcon } from '@heroicons/react/24/outline';\nimport type { WorkItem } from '../../types/domain';\ntype Props = {\n  filteredWorkItems: WorkItem[];\n  format: (n: number) => string;\n  getLaborCost: (item: WorkItem) => number;\n};\nexport default StatsCards;","export const hasValue = <T>(v: T | null | undefined): v is T => v !== null && v !== undefined;\n\nexport const isNonEmptyString = (v: unknown): v is string => typeof v === 'string' && v.trim() !== '';\n\nexport const isFiniteNumber = (v: unknown): v is number => typeof v === 'number' && Number.isFinite(v);\n\nexport const isPositiveNumber = (v: unknown): v is number => isFiniteNumber(v) && v > 0;\n\n","import { compiledBlock as _compiledBlock } from \"million/react\";\nconst FilterBar_1 = _compiledBlock(_props => <div className=\"bg-white dark:bg-gray-800 rounded-md shadow-sm p-2 mb-4\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-3 flex-wrap\">\n          <span className=\"text-xs font-medium text-gray-500 dark:text-gray-400\">필터:</span>\n          <div className=\"relative inline-flex items-center\">\n            <select value={_props.v0} onChange={_props.v1} className=\"border border-gray-300 dark:border-gray-600 rounded-md px-3 pr-8 py-1.5 bg-white dark:bg-gray-700 text-xs text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-indigo-500 appearance-none cursor-pointer min-w-0\">\n              <option value=\"\">전체 건축주</option>\n              {_props.v2}\n            </select>\n          </div>\n          <div className=\"relative inline-flex items-center\">\n            <select value={_props.v3} onChange={_props.v4} className={_props.v5} disabled={_props.v6}>\n              <option value=\"\">{_props.v7}</option>\n              {_props.v8}\n            </select>\n          </div>\n          <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n            {_props.v9}\n          </span>\n          {_props.v10}\n          {_props.v11}\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          {_props.v12}\n        </div>\n      </div>\n    </div>, {\n  name: \"FilterBar_1\",\n  portals: [\"v2\", \"v7\", \"v8\", \"v9\", \"v10\", \"v11\", \"v12\"]\n});\nconst FilterBar = function FilterBar({\n  clients,\n  selectedClient,\n  selectedProject,\n  filteredCount,\n  totalCount,\n  selectionCount,\n  bulkStatus,\n  statuses,\n  getClientProjects,\n  onChangeClient,\n  onChangeProject,\n  onResetFilters,\n  onBulkStatusChange,\n  onApplyBulkStatus,\n  onCreateBulkInvoice,\n  onBulkDelete\n}: Props) {\n  const hasClient = String(selectedClient ?? '') !== '';\n  const hasProject = (selectedProject ?? '').trim() !== '';\n  const hasFilter = hasClient || hasProject;\n  const hasSelection = isPositiveNumber(selectionCount);\n  return /*@million jsx-skip*/<FilterBar_1 v0={selectedClient == null ? '' : String(selectedClient)} v1={e => onChangeClient(e.target.value)} v2={clients.map(client => <option key={client.id} value={String(client.id)}>{client.name}</option>)} v3={selectedProject} v4={e => onChangeProject(e.target.value)} v5={`border border-gray-300 dark:border-gray-600 rounded-md px-3 pr-8 py-1.5 bg-white dark:bg-gray-700 text-xs hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-indigo-500 appearance-none cursor-pointer min-w-0 ${!hasClient ? 'text-gray-400 cursor-not-allowed' : 'text-gray-700 dark:text-gray-300'}`} v6={!hasClient} v7={hasClient ? '전체 프로젝트' : '건축주 선택 후'} v8={hasClient && getClientProjects(selectedClient).map(project => <option key={project} value={project}>{project}</option>)} v9={hasFilter ? `${filteredCount}개` : `총 ${totalCount}개`} v10={hasSelection && <span className=\"ml-2 inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-700\">\n              선택 {selectionCount}\n            </span>} v11={hasFilter && <button onClick={onResetFilters} className=\"text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 underline\">\n              초기화\n            </button>} v12={hasSelection && <>\n              <div className=\"flex items-center space-x-2 mr-2\">\n                <label className=\"text-xs text-gray-600 dark:text-gray-300\">상태 일괄 변경</label>\n                <select value={bulkStatus} onChange={e => onBulkStatusChange(e.target.value)} className=\"border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1 text-xs bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500\">\n                  <option value=\"\">상태 선택</option>\n                  {statuses.map(s => <option key={s} value={s}>{s}</option>)}\n                </select>\n                <button onClick={onApplyBulkStatus} className=\"bg-purple-600 hover:bg-purple-700 text-white font-medium py-1 px-2 rounded flex items-center text-xs leading-none\">\n                  적용\n                </button>\n              </div>\n              <button onClick={onCreateBulkInvoice} className=\"flex items-center justify-center px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm hover:shadow-md transition-shadow duration-300 text-gray-700 dark:text-gray-300 text-xs leading-none\">\n                <span className=\"text-green-600 mr-1.5\">📈</span>\n                <span className=\"font-semibold\">청구서 생성 ({selectionCount})</span>\n              </button>\n              <button onClick={onBulkDelete} className=\"flex items-center justify-center px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm hover:shadow-md transition-shadow duration-300 text-gray-700 dark:text-gray-300 text-xs leading-none\">\n                <span className=\"text-red-600 mr-1.5\">🗑️</span>\n                <span className=\"font-semibold\">삭제 ({selectionCount})</span>\n              </button>\n            </>} />;\n};\nimport { block as _block } from \"million/react\";\nimport type { Client } from '../../types/domain';\nimport { isPositiveNumber } from '../../utils/guards';\ntype Props = {\n  clients: Client[];\n  selectedClient: string | number;\n  selectedProject: string;\n  filteredCount: number;\n  totalCount: number;\n  selectionCount: number;\n  bulkStatus: string;\n  statuses: string[];\n  getClientProjects: (clientId?: number | string) => string[];\n  onChangeClient: (val: string) => void;\n  onChangeProject: (val: string) => void;\n  onResetFilters: () => void;\n  onBulkStatusChange: (val: string) => void;\n  onApplyBulkStatus: () => void;\n  onCreateBulkInvoice: () => void;\n  onBulkDelete: () => void;\n};\nexport default FilterBar;","import { compiledBlock as _compiledBlock } from \"million/react\";\nconst WorkItemsTable_1 = _compiledBlock(_props => <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden\">\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n          <thead className=\"bg-gray-50 dark:bg-gray-700\">\n            <tr>\n              <th className=\"px-3 py-3 text-center text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12\">\n                <input type=\"checkbox\" onChange={_props.v0} checked={_props.v1} className=\"w-4 h-4 rounded border-gray-300\" title=\"전체 선택\" />\n              </th>\n              <th className=\"px-2 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-24\">\n                건 축 주\n              </th>\n              <th className=\"px-2 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-52\">\n                내&nbsp;&nbsp;&nbsp;&nbsp;용\n              </th>\n              <th className=\"px-3 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-24\">\n                작 업 장\n              </th>\n              <th className=\"px-3 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-28\">\n                프로젝트\n              </th>\n              <th className=\"px-3 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-20 whitespace-nowrap\">\n카테고리\n              </th>\n              <th className=\"px-3 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-32 whitespace-nowrap\">\n단가/수량\n              </th>\n              <th className=\"px-3 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-16\">\n                상&nbsp;&nbsp;&nbsp;&nbsp;태\n              </th>\n              <th className=\"px-3 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-24\">\n                날&nbsp;&nbsp;&nbsp;&nbsp;짜\n              </th>\n              <th className=\"px-3 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-20\">\n                작&nbsp;&nbsp;&nbsp;&nbsp;업\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n            {_props.v2}\n          </tbody>\n        </table>\n      </div>\n    </div>, {\n  name: \"WorkItemsTable_1\",\n  portals: [\"v2\"]\n});\nconst WorkItemsTable = function WorkItemsTable({\n  items,\n  selection,\n  format,\n  getLaborCost,\n  getCategoryColor,\n  onEdit,\n  onDelete,\n  onCreateInvoice\n}: Props) {\n  return /*@million jsx-skip*/<WorkItemsTable_1 v0={e => selection.toggleAll(e.target.checked)} v1={selection.selected.length > 0 && selection.selected.length === items.length} v2={items.map((item, idx) => <tr key={`${item.id}-${idx}`} className=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\n                <td className=\"px-3 py-4 whitespace-nowrap\">\n                  <input type=\"checkbox\" checked={selection.selected.includes(item.id)} onChange={e => selection.toggleOne(item.id, e.target.checked)} className=\"w-4 h-4 rounded border-gray-300\" title=\"항목 선택\" />\n                </td>\n                <td className=\"px-2 py-3 whitespace-nowrap\">\n                  <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100 truncate w-16\">{item.clientName}</div>\n                </td>\n                <td className=\"px-2 py-3 w-52\">\n                  <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100 truncate\">{item.name}</div>\n                  <div className=\"text-xs text-gray-500 dark:text-gray-400 truncate\">{item.description}</div>\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap\">\n                  <div className=\"text-sm text-gray-900 dark:text-gray-100 truncate w-24\">{item.workplaceName}</div>\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap\">\n                  <div className=\"text-sm text-gray-900 dark:text-gray-100 truncate w-28\">{item.projectName}</div>\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap\">\n                  <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getCategoryColor(item.category)}`}>\n                    {item.category}\n                  </span>\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap w-32 text-right\">\n                  {(() => {\n        const priceRaw = Number(item.defaultPrice);\n        const qtyRaw = Number(item.quantity);\n        const price = Number.isFinite(priceRaw) ? priceRaw : 0;\n        const qty = Number.isFinite(qtyRaw) ? qtyRaw : 1;\n        const laborCost = getLaborCost(item);\n        const line = price * qty + laborCost;\n        return <>\n                        <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{format(price)}원</div>\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400\">× {qty} {item.unit}</div>\n                        {laborCost > 0 && <div className=\"text-xs text-indigo-600 dark:text-indigo-400\">+ 인건비 {format(laborCost)}원</div>}\n                        <div className=\"text-xs text-gray-700 dark:text-gray-200 font-medium\">{format(line)}원</div>\n                      </>;\n      })()}\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap w-16\">\n                  <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${item.status === '완료' ? 'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400' : item.status === '진행중' ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400' : item.status === '보류' ? 'bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400' : 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400'}`}>\n                    {item.status}\n                  </span>\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap w-24\">\n                  <div className=\"text-sm text-gray-900 dark:text-gray-100\">{item.date}</div>\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap text-sm font-medium w-24\">\n                  <div className=\"flex\">\n                    <Tooltip label=\"편집\">\n                      <button onClick={() => onEdit(item)} className=\"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mx-2\" title=\"작업 항목 편집\">✏️</button>\n                    </Tooltip>\n                    <Tooltip label=\"삭제\">\n                      <button onClick={() => onDelete(item.id)} className=\"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 mx-2\" title=\"작업 항목 삭제\">🗑️</button>\n                    </Tooltip>\n                    {item.status === '완료' && <Tooltip label=\"청구서 생성\">\n                        <button onClick={() => onCreateInvoice(item)} className=\"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 mx-2\" title=\"청구서 생성\">🧾</button>\n                      </Tooltip>}\n                  </div>\n                </td>\n              </tr>)} />;\n};\nimport { block as _block } from \"million/react\";\nimport Tooltip from '../Tooltip';\nimport type { WorkItem } from '../../types/domain';\nimport type { Id } from '../../hooks/useSelection';\ntype Selection = {\n  selected: Id[];\n  toggleAll: (checked: boolean) => void;\n  toggleOne: (id: Id, checked: boolean) => void;\n};\ntype Props = {\n  items: WorkItem[];\n  selection: Selection;\n  format: (n: number) => string;\n  getLaborCost: (item: WorkItem) => number;\n  getCategoryColor: (category?: string) => string;\n  onEdit: (item: WorkItem) => void;\n  onDelete: (id: Id) => void;\n  onCreateInvoice: (item: WorkItem) => void;\n};\nexport default WorkItemsTable;","import { useRef } from 'react';\nimport type { Client, WorkItem } from '../../types/domain';\nimport { useCalendar } from '../../hooks/useCalendar';\nimport { useNumberFormat } from '../../hooks/useNumberFormat';\nimport { useClientWorkplaces } from '../../hooks/useClientWorkplaces';\ntype Props = {\n  open: boolean;\n  editingItem: WorkItem | null;\n  newItem: WorkItem;\n  clients: Client[];\n  units: string[];\n  categories: string[];\n  statuses: string[];\n  onChangeField: (name: string, value: string) => void;\n  onCancel: () => void;\n  onSubmit: (e: React.FormEvent<HTMLFormElement>) => void;\n};\nexport default function ItemFormModal({\n  open,\n  editingItem,\n  newItem,\n  clients,\n  units,\n  categories,\n  statuses,\n  onChangeField,\n  onCancel,\n  onSubmit\n}: Props) {\n  const {\n    getClientWorkplaces\n  } = useClientWorkplaces();\n  const {\n    format\n  } = useNumberFormat();\n  const cal = useCalendar({\n    value: newItem?.date ?? '',\n    onChange: d => onChangeField('date', d)\n  });\n  const calRef = useRef<HTMLDivElement>(null);\n  if (open !== true) return null;\n  return <div className=\"fixed inset-0 bg-gray-800/50 dark:bg-gray-900/70 backdrop-blur-sm overflow-y-auto h-full w-full z-50\">\n      <div className=\"relative top-8 mx-auto w-[980px] max-w-[95vw] shadow-2xl rounded-2xl bg-white/80 dark:bg-gray-800/90 ring-1 ring-black/5 dark:ring-white/10 mb-8\">\n        <div className=\"rounded-t-2xl bg-gradient-to-br from-indigo-50 via-purple-50 to-white dark:from-indigo-900/30 dark:via-purple-900/30 dark:to-gray-800 px-8 pt-5 pb-3\">\n          <div className=\"text-center\">\n            <h3 className=\"text-2xl font-extrabold tracking-tight text-indigo-600 dark:text-indigo-400\">{editingItem !== null ? '작업 항목 편집' : '새 작업 항목 추가'}</h3>\n            <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">새로운 건설 작업 항목을 등록하고 관리하세요</p>\n          </div>\n        </div>\n        <div className=\"px-6 pb-6 pt-3\">\n          <form id=\"work-item-form\" onSubmit={onSubmit} className=\"space-y-4\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4\">\n              <div className=\"flex items-center mb-3 gap-3\">\n                <span className=\"inline-flex h-7 w-7 items-center justify-center rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400\">🏗️</span>\n                <h4 className=\"text-base font-semibold text-gray-900 dark:text-gray-100\">기본 정보</h4>\n              </div>\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-300\">건축주</label>\n                  <select name=\"clientId\" value={String(newItem.clientId ?? '')} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required>\n                    <option value=\"\">건축주 선택</option>\n                    {clients.map(c => <option key={c.id} value={String(c.id)}>{c.name}</option>)}\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-300\">작업장</label>\n                  {(() => {\n                  const hasClient = String(newItem.clientId ?? '') !== '';\n                  return <select name=\"workplaceId\" value={String(newItem.workplaceId ?? '')} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed\" required disabled={!hasClient}>\n                        <option value=\"\">{hasClient ? '작업장 선택' : '작업장 선택(먼저 건축주를 선택하세요)'}</option>\n                        {hasClient && getClientWorkplaces(newItem.clientId).map(wp => <option key={wp.id} value={String(wp.id)}>{wp.name} - {wp.address}</option>)}\n                      </select>;\n                })()}\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 gap-3 mt-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-300\">프로젝트명</label>\n                  {(() => {\n                  const selectedClient = clients.find(c => String(c.id) === String(newItem.clientId));\n                  const projects: string[] = selectedClient !== undefined && Array.isArray(selectedClient.projects) ? selectedClient.projects : [];\n                  const hasProjects = Array.isArray(projects) && projects.length > 0;\n                  return hasProjects ? <select name=\"projectName\" value={newItem.projectName ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required>\n                        <option value=\"\">프로젝트 선택</option>\n                        {projects.map(proj => <option key={proj} value={proj}>{proj}</option>)}\n                      </select> : <input type=\"text\" name=\"projectName\" value={newItem.projectName ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} placeholder=\"프로젝트명 입력\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required />;\n                })()}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-300\">카테고리</label>\n                  <select name=\"category\" value={newItem.category ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required>\n                    <option value=\"\">카테고리 선택</option>\n                    {categories.map(cat => <option key={cat} value={cat}>{cat}</option>)}\n                  </select>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4\">\n              <div className=\"flex items-center mb-3 gap-3\">\n                <span className=\"inline-flex h-7 w-7 items-center justify-center rounded-full bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400\">🛠️</span>\n                <h4 className=\"text-base font-semibold text-gray-900 dark:text-gray-100\">작업 정보</h4>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">작업일자</label>\n                <div className=\"mt-1 relative inline-block\" ref={calRef}>\n                  <div className=\"flex items-center gap-2\">\n                    <input type=\"text\" name=\"date\" value={newItem?.date ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} placeholder=\"YYYY-MM-DD\" inputMode=\"numeric\" className=\"block w-full border border-gray-200 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder-gray-400\" onFocus={() => cal.setOpen(true)} required />\n                    <button type=\"button\" className=\"px-2 py-2 text-gray-600 hover:text-gray-800\" onClick={() => cal.setOpen(v => !v)} title=\"달력 열기\">📅</button>\n                  </div>\n                  {cal.open && <div className=\"absolute z-50 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg mt-2 p-3\" style={{\n                  transform: 'scale(1)',\n                  transformOrigin: 'top left'\n                }}>\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <button type=\"button\" className=\"px-2 py-1 text-sm border dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\" onClick={cal.prevMonth}>◀</button>\n                        <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{cal.month.getFullYear()}년 {cal.month.getMonth() + 1}월</div>\n                        <button type=\"button\" className=\"px-2 py-1 text-sm border dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\" onClick={cal.nextMonth}>▶</button>\n                      </div>\n                      <table className=\"text-xs select-none\">\n                        <thead>\n                          <tr className=\"text-left text-gray-600 dark:text-gray-400\">{['일', '월', '화', '수', '목', '금', '토'].map((d, idx) => {\n                          const SUN = 0; // eslint-disable-line no-magic-numbers\n                          const SAT = 6; // eslint-disable-line no-magic-numbers\n                          return <th key={d} className={`px-2 py-1 ${idx === SUN ? 'text-red-600' : idx === SAT ? 'text-blue-600' : ''}`}>{d}</th>;\n                        })}</tr>\n                        </thead>\n                        <tbody>{cal.getCalendarGrid().map((row, idx) => <tr key={idx} className=\"text-left\">{row.map((d, i2) => {\n                          const clickable = typeof d === 'number' && d !== 0 && !Number.isNaN(d);\n                          const SUN = 0; // eslint-disable-line no-magic-numbers\n                          const SAT = 6; // eslint-disable-line no-magic-numbers\n                          const dayColor = i2 === SUN ? 'text-red-600' : i2 === SAT ? 'text-blue-600' : '';\n                          return <td key={i2} className={`px-2 py-1 ${dayColor} ${clickable ? 'cursor-pointer hover:bg-gray-100 rounded' : ''}`} onClick={() => {\n                            if (clickable) cal.pickDate(d as number);\n                          }}>\n                                {clickable ? d : ''}\n                              </td>;\n                        })}</tr>)}</tbody>\n                      </table>\n                    </div>}\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-3 mt-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">내용</label>\n                  <input type=\"text\" name=\"name\" value={newItem.name ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">세부 작업</label>\n                  <input type=\"text\" name=\"description\" value={newItem.description ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-4 gap-3 mt-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">수량</label>\n                  <input type=\"text\" name=\"quantity\" value={newItem.quantity ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} onFocus={e => e.target.select()} placeholder=\"예: 1\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">단위</label>\n                  <select name=\"unit\" value={newItem.unit ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\">\n                    <option value=\"\">단위 선택</option>\n                    {units.map(u => <option key={u} value={u}>{u}</option>)}\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">단가</label>\n                  <input type=\"text\" name=\"defaultPrice\" value={(() => {\n                  const val = newItem.defaultPrice;\n                  if (val === null || val === undefined) return '';\n                  const num = Number(val);\n                  return Number.isFinite(num) ? format(num) : String(val);\n                })()} onChange={e => onChangeField(e.target.name, e.target.value)} onFocus={e => e.target.select()} placeholder=\"예: 200,000\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">합계</label>\n                  <div className=\"mt-1 w-full bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded px-3 py-2 text-sm font-semibold text-green-900 dark:text-green-300\">{(() => {\n                    const pRaw = newItem.defaultPrice;\n                    const qRaw = newItem.quantity;\n                    const pNum = Number(pRaw);\n                    const qNum = Number(qRaw);\n                    const p = Number.isFinite(pNum) ? pNum : 0;\n                    const q = Number.isFinite(qNum) ? qNum : 1;\n                    return `${format(p * q)}원`;\n                  })()}</div>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-3 gap-3 mt-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">인부 인원</label>\n                  <input type=\"text\" name=\"laborPersons\" value={String(newItem.laborPersons ?? '')} onChange={e => onChangeField(e.target.name, e.target.value)} onFocus={e => e.target.select()} placeholder=\"예: 3\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">인부 단가</label>\n                  <input type=\"text\" name=\"laborUnitRate\" value={typeof newItem.laborUnitRate === 'number' ? format(newItem.laborUnitRate) : ''} onChange={e => onChangeField(e.target.name, e.target.value)} onFocus={e => e.target.select()} placeholder=\"예: 250,000\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">인부임 합계</label>\n                  <div className=\"mt-1 w-full bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 rounded px-3 py-2 text-sm font-semibold text-indigo-900 dark:text-indigo-300\">{(() => {\n                    const persons = Number(newItem.laborPersons ?? 0);\n                    const rate = Number(newItem.laborUnitRate ?? 0);\n                    const p = Number.isFinite(persons) ? persons : 0;\n                    const r = Number.isFinite(rate) ? rate : 0;\n                    return `${format(p * r)}원`;\n                  })()}</div>\n                </div>\n              </div>\n\n              <div className=\"mt-3\">\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">비고</label>\n                <input type=\"text\" name=\"notes\" value={newItem.notes ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} placeholder=\"추가 메모나 특이사항을 입력하세요\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n              </div>\n            </div>\n\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4\">\n              <div className=\"flex justify-between items-center\">\n                <div className=\"flex-1\">\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">상태</label>\n                  <div className=\"flex flex-wrap gap-1.5\">\n                    {statuses.map(s => {\n                    const active = newItem.status === s;\n                    const classes = active ? 'bg-indigo-600 dark:bg-indigo-500 text-white border-transparent shadow' : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600';\n                    return <button key={s} type=\"button\" onClick={() => onChangeField('status', s)} className={`px-3 py-1.5 rounded-full text-sm transition ${classes}`} aria-pressed={active}>{s}</button>;\n                  })}\n                  </div>\n                </div>\n                <div className=\"ml-4\">\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-right\">총합계 금액</label>\n                  <div className=\"bg-blue-600 dark:bg-blue-700 text-white rounded-lg px-4 py-2 text-base font-bold shadow-md\">{(() => {\n                    const pRaw = newItem.defaultPrice;\n                    const qRaw = newItem.quantity;\n                    const pNum = Number(pRaw);\n                    const qNum = Number(qRaw);\n                    const p = Number.isFinite(pNum) ? pNum : 0;\n                    const q = Number.isFinite(qNum) ? qNum : 1;\n                    const laborPersons = Number(newItem.laborPersons ?? 0);\n                    const laborRate = Number(newItem.laborUnitRate ?? 0);\n                    const lp = Number.isFinite(laborPersons) ? laborPersons : 0;\n                    const lr = Number.isFinite(laborRate) ? laborRate : 0;\n                    const laborCost = lp * lr;\n                    const total = p * q + laborCost;\n                    return `${format(total)}원`;\n                  })()}</div>\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n\n        {/* Sticky 버튼 영역 */}\n        <div className=\"sticky bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700 px-6 py-4 rounded-b-2xl shadow-lg\">\n          <div className=\"flex justify-end space-x-3\">\n            <button type=\"button\" onClick={onCancel} className=\"px-6 py-2.5 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition font-medium\">\n              취소\n            </button>\n            <button type=\"submit\" form=\"work-item-form\" className=\"px-6 py-2.5 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-md transition font-bold\">\n              {editingItem !== null ? '수정' : '추가'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>;\n}","import { useRef } from 'react';\nimport type { Client, WorkItem } from '../../types/domain';\nimport { useCalendar } from '../../hooks/useCalendar';\nimport { useNumberFormat } from '../../hooks/useNumberFormat';\nimport { useClientWorkplaces } from '../../hooks/useClientWorkplaces';\nimport { useProjects } from '../../hooks/useProjects';\ntype BulkItem = Partial<WorkItem> & {\n  status?: string;\n};\ntype Props = {\n  open: boolean;\n  clients: Client[];\n  categories: string[];\n  units: string[];\n  bulkItems: BulkItem[];\n  bulkBaseInfo: {\n    clientId: string | number;\n    workplaceId: string | number;\n    projectName: string;\n    date?: string;\n    bulkLaborPersons?: string | number;\n    bulkLaborUnitRate?: string | number;\n  };\n  showBulkCustomProject: boolean;\n  statuses: string[];\n  onBaseInfoChangeField: (name: string, value: string) => void;\n  onItemChange: (index: number, field: string, value: string) => void;\n  onAddItem: () => void;\n  onRemoveItem: (index: number) => void;\n  onCancel: () => void;\n  onSubmit: (e: React.FormEvent<HTMLFormElement>) => void;\n};\nexport default function BulkFormModal({\n  open,\n  clients,\n  categories,\n  units,\n  bulkItems,\n  bulkBaseInfo,\n  showBulkCustomProject,\n  statuses,\n  onBaseInfoChangeField,\n  onItemChange,\n  onAddItem,\n  onRemoveItem,\n  onCancel,\n  onSubmit\n}: Props) {\n  const {\n    getClientWorkplaces\n  } = useClientWorkplaces();\n  const {\n    getClientProjects\n  } = useProjects();\n  const {\n    format\n  } = useNumberFormat();\n  const cal = useCalendar({\n    value: bulkBaseInfo?.date ?? '',\n    onChange: d => onBaseInfoChangeField('date', d)\n  });\n  const calRef = useRef<HTMLDivElement>(null);\n  if (open !== true) return null;\n  return <div className=\"fixed inset-0 bg-gray-800/50 dark:bg-gray-900/70 backdrop-blur-sm overflow-y-auto h-full w-full z-50\">\n      <div className=\"relative top-6 mx-auto w-[1100px] max-w-[96vw] shadow-2xl rounded-2xl bg-white/80 dark:bg-gray-800/90 ring-1 ring-black/5 dark:ring-white/10 mb-8\">\n        <div className=\"rounded-t-2xl bg-gradient-to-br from-indigo-50 via-purple-50 to-white dark:from-indigo-900/30 dark:via-purple-900/30 dark:to-gray-800 px-8 pt-8 pb-6 text-center\">\n          <h3 className=\"text-2xl font-extrabold tracking-tight text-indigo-600 dark:text-indigo-400\">일괄 작업 항목 추가</h3>\n          <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">여러 작업을 한 번에 등록합니다</p>\n        </div>\n        <div className=\"px-6 pb-6\">\n          <form id=\"bulk-work-item-form\" onSubmit={onSubmit} className=\"space-y-4\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4\">\n              <div className=\"flex items-center mb-3 gap-3\">\n                <span className=\"inline-flex h-7 w-7 items-center justify-center rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400\">📋</span>\n                <h4 className=\"text-base font-semibold text-gray-900 dark:text-gray-100\">공통 정보</h4>\n              </div>\n              <div className=\"grid grid-cols-4 gap-3 mb-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">건축주</label>\n                  <select name=\"clientId\" value={String(bulkBaseInfo.clientId ?? '')} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required>\n                    <option value=\"\">건축주 선택</option>\n                    {clients.map(client => <option key={client.id} value={String(client.id)}>{client.name}</option>)}\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">작업장</label>\n                  {(() => {\n                  const hasClient = String(bulkBaseInfo.clientId ?? '') !== '';\n                  return <select name=\"workplaceId\" value={String(bulkBaseInfo.workplaceId ?? '')} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required disabled={!hasClient}>\n                        <option value=\"\">{hasClient ? '작업장 선택' : '작업장 선택(먼저 건축주를 선택하세요)'}</option>\n                        {hasClient && getClientWorkplaces(bulkBaseInfo.clientId).map(workplace => <option key={workplace.id} value={String(workplace.id)}>{workplace.name} - {workplace.address}</option>)}\n                      </select>;\n                })()}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">프로젝트명</label>\n                  {showBulkCustomProject !== true ? (() => {\n                  const hasClient = String(bulkBaseInfo.clientId ?? '') !== '';\n                  return <select name=\"projectName\" value={bulkBaseInfo.projectName} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required disabled={!hasClient}>\n                          <option value=\"\">프로젝트 선택</option>\n                          {hasClient && getClientProjects(bulkBaseInfo.clientId).map(project => <option key={project} value={project}>{project}</option>)}\n                          <option value=\"custom\">+ 새 프로젝트 입력</option>\n                        </select>;\n                })() : <div className=\"flex space-x-2\">\n                      <input type=\"text\" name=\"projectName\" value={bulkBaseInfo.projectName} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} placeholder=\"새 프로젝트명 입력\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required />\n                      <button type=\"button\" onClick={() => onBaseInfoChangeField('projectName', '')} className=\"mt-1 px-2 py-2 text-gray-400 hover:text-gray-600\" title=\"기존 프로젝트 선택으로 돌아가기\">↩</button>\n                    </div>}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">작업일자</label>\n                  <div className=\"mt-1 relative inline-block\" ref={calRef}>\n                    <div className=\"flex items-center gap-2\">\n                      <input type=\"text\" name=\"date\" value={bulkBaseInfo?.date ?? ''} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} placeholder=\"YYYY-MM-DD\" inputMode=\"numeric\" className=\"block w-full border border-gray-200 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder-gray-400\" onFocus={() => cal.setOpen(true)} required />\n                      <button type=\"button\" className=\"px-2 py-2 text-gray-600 hover:text-gray-800\" onClick={() => cal.setOpen(v => !v)} title=\"달력 열기\">📅</button>\n                    </div>\n                    {cal.open && <div className=\"absolute z-50 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg mt-2 p-3\" style={{\n                    transform: 'scale(1)',\n                    transformOrigin: 'top left'\n                  }}>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <button type=\"button\" className=\"px-2 py-1 text-sm border dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\" onClick={cal.prevMonth}>◀</button>\n                          <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{cal.month.getFullYear()}년 {cal.month.getMonth() + 1}월</div>\n                          <button type=\"button\" className=\"px-2 py-1 text-sm border dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\" onClick={cal.nextMonth}>▶</button>\n                        </div>\n                        <table className=\"text-xs select-none\">\n                          <thead>\n                            <tr className=\"text-left text-gray-600 dark:text-gray-400\">{['일', '월', '화', '수', '목', '금', '토'].map((d, idx) => {\n                            const SUN = 0; // eslint-disable-line no-magic-numbers\n                            const SAT = 6; // eslint-disable-line no-magic-numbers\n                            return <th key={d} className={`px-2 py-1 ${idx === SUN ? 'text-red-600' : idx === SAT ? 'text-blue-600' : ''}`}>{d}</th>;\n                          })}</tr>\n                          </thead>\n                          <tbody>{cal.getCalendarGrid().map((row, idx) => <tr key={idx} className=\"text-left\">{row.map((d, i2) => {\n                            const clickable = typeof d === 'number' && d !== 0 && !Number.isNaN(d);\n                            const SUN = 0; // eslint-disable-line no-magic-numbers\n                            const SAT = 6; // eslint-disable-line no-magic-numbers\n                            const dayColor = i2 === SUN ? 'text-red-600' : i2 === SAT ? 'text-blue-600' : '';\n                            return <td key={i2} className={`px-2 py-1 ${dayColor} ${clickable ? 'cursor-pointer hover:bg-gray-100 rounded' : ''}`} onClick={() => {\n                              if (clickable) cal.pickDate(d as number);\n                            }}>\n                                  {clickable ? d : ''}\n                                </td>;\n                          })}</tr>)}</tbody>\n                        </table>\n                      </div>}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"border-t border-gray-200 dark:border-gray-700 pt-3\">\n                <div className=\"grid grid-cols-3 gap-3\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">인부 인원</label>\n                    <input type=\"text\" name=\"bulkLaborPersons\" value={bulkBaseInfo.bulkLaborPersons ?? ''} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} onFocus={e => e.target.select()} placeholder=\"예: 3\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">인부 단가</label>\n                    <input type=\"text\" name=\"bulkLaborUnitRate\" value={(() => {\n                    const val = bulkBaseInfo.bulkLaborUnitRate;\n                    if (val === null || val === undefined || val === '') return '';\n                    const num = Number(val);\n                    return Number.isFinite(num) ? format(num) : String(val);\n                  })()} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} onFocus={e => e.target.select()} placeholder=\"예: 250,000\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">인부임 합계</label>\n                    <div className=\"mt-1 w-full bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 rounded px-3 py-2 text-sm font-semibold text-indigo-900 dark:text-indigo-300\">{(() => {\n                      const persons = Number(bulkBaseInfo.bulkLaborPersons);\n                      const rate = Number(bulkBaseInfo.bulkLaborUnitRate);\n                      const p = Number.isFinite(persons) ? persons : 0;\n                      const r = Number.isFinite(rate) ? rate : 0;\n                      return `${format(p * r)}원`;\n                    })()}</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"inline-flex h-7 w-7 items-center justify-center rounded-full bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400\">🗂️</span>\n                  <h4 className=\"text-base font-semibold text-gray-900 dark:text-gray-100\">작업 항목들</h4>\n                </div>\n                <button type=\"button\" onClick={onAddItem} className=\"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 text-sm\">+ 항목 추가</button>\n              </div>\n\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                {bulkItems.map((item, index) => <div key={index} className=\"border border-gray-200 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50\">\n                    <div className=\"flex justify-between items-center mb-3\">\n                      <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">작업 항목 #{index + 1}</span>\n                      {bulkItems.length > 1 && <button type=\"button\" onClick={() => onRemoveItem(index)} className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 text-sm\">삭제</button>}\n                    </div>\n\n                    {/* 1행: 내용, 카테고리, 세부작업 */}\n                    <div className=\"grid grid-cols-3 gap-3 mb-2\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">내용</label>\n                        <input type=\"text\" value={item.name ?? ''} onChange={e => onItemChange(index, 'name', e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">카테고리</label>\n                        <select value={item.category ?? ''} onChange={e => onItemChange(index, 'category', e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required>\n                          <option value=\"\">카테고리 선택</option>\n                          {categories.map(cat => <option key={cat} value={cat}>{cat}</option>)}\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">세부 작업</label>\n                        <input type=\"text\" value={item.description ?? ''} onChange={e => onItemChange(index, 'description', e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                      </div>\n                    </div>\n\n                    {/* 2행: 수량, 단위, 단가, 합계 */}\n                    <div className=\"grid grid-cols-4 gap-3 mb-2\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">수량</label>\n                        <input type=\"text\" value={item.quantity ?? ''} onChange={e => onItemChange(index, 'quantity', e.target.value)} onFocus={e => e.target.select()} placeholder=\"예: 1\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">단위</label>\n                        <select value={item.unit ?? ''} onChange={e => onItemChange(index, 'unit', e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\">\n                          <option value=\"\">단위 선택</option>\n                          {units.map(u => <option key={u} value={u}>{u}</option>)}\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">단가</label>\n                        <input type=\"text\" value={(() => {\n                      const val = item.defaultPrice;\n                      if (val === null || val === undefined) return '';\n                      const num = Number(val);\n                      return Number.isFinite(num) ? format(num) : String(val);\n                    })()} onChange={e => onItemChange(index, 'defaultPrice', e.target.value)} onFocus={e => e.target.select()} placeholder=\"예: 200,000\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">합계</label>\n                        <div className=\"mt-1 w-full bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded px-3 py-2 text-sm font-semibold text-green-900 dark:text-green-300\">{(() => {\n                        const pRaw = item.defaultPrice;\n                        const qRaw = item.quantity;\n                        const pNum = Number(pRaw);\n                        const qNum = Number(qRaw);\n                        const p = Number.isFinite(pNum) ? pNum : 0;\n                        const q = Number.isFinite(qNum) ? qNum : 1;\n                        const total = p * q;\n                        return `${format(total)}원`;\n                      })()}</div>\n                      </div>\n                    </div>\n\n                    {/* 3행: 비고 */}\n                    <div className=\"mb-3\">\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">비고</label>\n                      <input type=\"text\" value={item.notes ?? ''} onChange={e => onItemChange(index, 'notes', e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                    </div>\n\n                    {/* 상태 및 총합계 */}\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"flex-1\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">상태</label>\n                        <div className=\"flex flex-wrap gap-1.5\">\n                          {statuses.map(s => {\n                        const active = item.status === s;\n                        const classes = active ? 'bg-indigo-600 dark:bg-indigo-500 text-white border-transparent shadow' : 'bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-500 hover:bg-gray-200 dark:hover:bg-gray-500';\n                        return <button key={s} type=\"button\" onClick={() => onItemChange(index, 'status', s)} className={`px-2.5 py-1 rounded-full text-xs transition ${classes}`} aria-pressed={active}>{s}</button>;\n                      })}\n                        </div>\n                      </div>\n                      <div className=\"ml-4\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 text-right\">총합계 금액</label>\n                        <div className=\"bg-blue-600 dark:bg-blue-700 text-white rounded-lg px-4 py-2 text-base font-bold shadow-md\">{(() => {\n                        const pRaw = item.defaultPrice;\n                        const qRaw = item.quantity;\n                        const pNum = Number(pRaw);\n                        const qNum = Number(qRaw);\n                        const p = Number.isFinite(pNum) ? pNum : 0;\n                        const q = Number.isFinite(qNum) ? qNum : 1;\n                        const laborPersons = Number(bulkBaseInfo.bulkLaborPersons);\n                        const laborRate = Number(bulkBaseInfo.bulkLaborUnitRate);\n                        const lp = Number.isFinite(laborPersons) ? laborPersons : 0;\n                        const lr = Number.isFinite(laborRate) ? laborRate : 0;\n                        const laborCost = lp * lr;\n                        const total = p * q + laborCost;\n                        return `${format(total)}원`;\n                      })()}</div>\n                      </div>\n                    </div>\n                  </div>)}\n              </div>\n            </div>\n          </form>\n        </div>\n\n        {/* Sticky 버튼 영역 */}\n        <div className=\"sticky bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700 px-6 py-4 rounded-b-2xl shadow-lg\">\n          <div className=\"flex justify-end space-x-3\">\n            <button type=\"button\" onClick={onCancel} className=\"px-6 py-2.5 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition font-medium\">\n              취소\n            </button>\n            <button type=\"submit\" form=\"bulk-work-item-form\" className=\"px-6 py-2.5 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-md transition font-bold\">\n              {bulkItems.length}개 항목 일괄 추가\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>;\n}","import { useApp } from '../contexts/AppContext';\nimport type { WorkItem, Client } from '../types/domain';\n\nexport function useProjects() {\n  const { workItems, clients } = useApp();\n\n  const getClientProjects = (clientId?: number | string): string[] => {\n    if (clientId == null || (typeof clientId === 'string' && clientId.trim() === '')) return [];\n    const parsed = typeof clientId === 'string' ? parseInt(clientId, 10) : clientId;\n    const cid = Number.isFinite(parsed) ? parsed : null;\n    if (cid === null) return [];\n    const fromWorkItems = (workItems as WorkItem[])\n      .filter(item => item.clientId === cid)\n      .map(item => item.projectName)\n      .filter((s): s is string => typeof s === 'string' && s.trim() !== '');\n    const client = (clients as Client[]).find(c => c.id === cid);\n    const clientProjects: string[] = (client !== undefined && Array.isArray(client.projects)) ? client.projects : [];\n    const clientWorkplaces = (client !== undefined && Array.isArray(client.workplaces)) ? client.workplaces : [];\n    const fromClientProjects = clientProjects\n      .filter((s): s is string => typeof s === 'string' && s.trim() !== '');\n    const fromWorkplaces = clientWorkplaces\n      .map(wp => wp.description)\n      .filter((s): s is string => typeof s === 'string' && s.trim() !== '');\n    return Array.from(new Set([...fromWorkItems, ...fromClientProjects, ...fromWorkplaces]));\n  };\n\n  const getAllProjects = (): string[] => {\n    const all = Array.from(new Set((workItems as WorkItem[])\n      .map(i => i.projectName)\n      .filter((s): s is string => typeof s === 'string' && s.trim() !== '')));\n    return all.sort();\n  };\n\n  return { getClientProjects, getAllProjects };\n}\n","import { compiledBlock as _compiledBlock } from \"million/react\";\nconst WorkItems_1 = _compiledBlock(_props => <div className=\"p-2 md:p-3\">\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2\">작업 항목 관리</h1>\n            <p className=\"text-gray-600 dark:text-gray-300\">작업 항목을 관리하고 진행을 확인하세요</p>\n          </div>\n          <div className=\"flex space-x-2\">\n            <button onClick={_props.v0} className=\"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm text-gray-700 dark:text-gray-300\">\n              <span className=\"text-gray-500 dark:text-gray-400 mr-2\">📁</span>\n              <span className=\"text-xs font-semibold\">템플릿 다운로드</span>\n            </button>\n            <button onClick={_props.v1} className=\"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm text-gray-700 dark:text-gray-300\">\n              <span className=\"text-blue-500 mr-2\">📤</span>\n              <span className=\"text-xs font-semibold\">Excel 가져오기</span>\n            </button>\n            <button onClick={_props.v2} className=\"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm text-gray-700 dark:text-gray-300\">\n              <span className=\"text-green-500 mr-2\">📥</span>\n              <span className=\"text-xs font-semibold\">Excel 내보내기</span>\n            </button>\n            <button onClick={_props.v3} className=\"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm text-gray-700 dark:text-gray-300\">\n              <span className=\"text-purple-500 mr-2\">📋</span>\n              <span className=\"text-xs font-semibold\">일괄 작업 항목 추가</span>\n            </button>\n            <button onClick={_props.v4} className=\"flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-full shadow-lg\">\n              <span className=\"text-yellow-300 mr-2\">✨</span>\n              <span className=\"text-xs font-bold\">새 작업 항목</span>\n            </button>\n          </div>\n        </div>\n        {_props.v5}\n      </div>\n\n      {_props.v6}\n\n      {_props.v7}\n\n      {_props.v8}\n\n      {_props.v9}\n\n      {_props.v10}\n\n      {_props.v11}\n      {_props.v12}\n    </div>, {\n  name: \"WorkItems_1\",\n  portals: [\"v5\", \"v6\", \"v7\", \"v8\", \"v9\", \"v10\", \"v11\", \"v12\"]\n});\nconst WorkItems = function WorkItems() {\n  const {\n    clients,\n    setClients,\n    workItems,\n    setWorkItems,\n    invoices,\n    setInvoices,\n    units,\n    categories\n  } = useApp();\n  const {\n    format,\n    parse\n  } = useNumberFormat();\n  const {\n    getClientWorkplaces\n  } = useClientWorkplaces();\n  // const { getAllProjects } = useProjects();\n\n  const [selectedClient, setSelectedClient] = useState<string>('');\n  const [selectedProject, setSelectedProject] = useState<string>('');\n  const [bulkStatus, setBulkStatus] = useState<string>('');\n  const [showConfirmBulkDelete, setShowConfirmBulkDelete] = useState<boolean>(false);\n  const [pendingDeleteId, setPendingDeleteId] = useState<Id | null>(null);\n  const [showItemModal, setShowItemModal] = useState<boolean>(false);\n  const [editingItem, setEditingItem] = useState<WorkItem | null>(null);\n  const [showBulkModal, setShowBulkModal] = useState<boolean>(false);\n  const [showBulkCustomProject, setShowBulkCustomProject] = useState<boolean>(false);\n  const [bulkItems, setBulkItems] = useState<BulkItem[]>([{\n    name: '',\n    category: '',\n    defaultPrice: '' as unknown as number,\n    quantity: '' as unknown as number,\n    unit: '',\n    description: '',\n    status: '예정',\n    notes: '',\n    laborPersons: '',\n    laborUnitRate: ''\n  }]);\n  const [bulkBaseInfo, setBulkBaseInfo] = useState<{\n    clientId: string | number;\n    workplaceId: string | number;\n    projectName: string;\n    date: string;\n    bulkLaborPersons: string | number;\n    bulkLaborUnitRate: string | number;\n  }>({\n    clientId: '',\n    workplaceId: '',\n    projectName: '',\n    date: new Date().toISOString().split('T')[0],\n    bulkLaborPersons: '',\n    bulkLaborUnitRate: ''\n  });\n  const defaultNewItem: NewItem = {\n    id: 0,\n    clientId: '' as unknown as number,\n    clientName: '',\n    workplaceId: '' as unknown as number,\n    workplaceName: '',\n    projectName: '',\n    name: '',\n    category: '',\n    defaultPrice: '' as unknown as number,\n    quantity: '' as unknown as number,\n    unit: '',\n    description: '',\n    status: '예정',\n    notes: '',\n    date: new Date().toISOString().split('T')[0],\n    laborPersons: '',\n    laborUnitRate: '',\n    laborPersonsGeneral: '',\n    laborUnitRateGeneral: ''\n  };\n  const [newItem, setNewItem] = useState<NewItem>(defaultNewItem);\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  const filteredWorkItems = useMemo(() => {\n    return workItems.filter(item => {\n      if (selectedClient !== '' && item.clientId !== parseInt(selectedClient)) return false;\n      if (selectedProject !== '' && item.projectName !== selectedProject) return false;\n      return true;\n    });\n  }, [workItems, selectedClient, selectedProject]);\n  const visibleIds = useMemo<Id[]>(() => filteredWorkItems.map(i => i.id), [filteredWorkItems]);\n  const selection = useSelection(visibleIds);\n  const getLaborCost = (item: WorkItem): number => {\n    const skilledPersons = parseInt(String(item?.laborPersons ?? 0), 10);\n    const skilledRate = parseInt(String(item?.laborUnitRate ?? 0), 10);\n    const generalPersons = parseInt(String(item?.laborPersonsGeneral ?? 0), 10);\n    const generalRate = parseInt(String(item?.laborUnitRateGeneral ?? 0), 10);\n    const skilledCost = Number.isFinite(skilledPersons) && skilledPersons !== 0 ? skilledPersons * skilledRate : 0;\n    const generalCost = Number.isFinite(generalPersons) && generalPersons !== 0 ? generalPersons * generalRate : 0;\n    return skilledCost + generalCost;\n  };\n  const getClientProjects = (clientId?: number | string): string[] => {\n    if (clientId === undefined || clientId === null || clientId === '') return [];\n    const cid = parseInt(String(clientId));\n    const fromWorkItems = workItems.filter(item => item.clientId === cid).map(item => item.projectName ?? '').filter((name): name is string => name !== '');\n    const client = clients.find(c => Number(c.id) === cid);\n    const fromClientProjects = (client?.projects ?? []).filter((p): p is string => p !== '' && p !== null && p !== undefined);\n    const fromWorkplaces = (client?.workplaces ?? []).map(wp => wp.description ?? '').filter((desc): desc is string => desc !== '');\n    return Array.from(new Set([...fromWorkItems, ...fromClientProjects, ...fromWorkplaces]));\n  };\n  const getCategoryColor = (category?: string): string => {\n    const colors: Record<string, string> = {\n      '토목공사': 'bg-brown-100 text-brown-800 dark:bg-brown-900/30 dark:text-brown-300',\n      '구조공사': 'bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300',\n      '철거공사': 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300',\n      '마감공사': 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300',\n      '설비공사': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300',\n      '내부공사': 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300',\n      '기타': 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300'\n    };\n    if (category !== undefined && category !== null && category !== '') {\n      return colors[category] ?? 'bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300';\n    }\n    return 'bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300';\n  };\n  const handleEdit = (item: WorkItem) => {\n    setEditingItem(item);\n    setNewItem({\n      ...item\n    });\n    setShowItemModal(true);\n  };\n  const handleDelete = (id: Id) => setPendingDeleteId(id);\n  const confirmDeleteSingle = async () => {\n    if (pendingDeleteId == null) return;\n\n    // UI에서 즉시 제거\n    setWorkItems(prev => prev.filter(i => i.id !== pendingDeleteId));\n    setPendingDeleteId(null);\n\n    // Supabase에서도 즉시 삭제\n    try {\n      const {\n        supabase\n      } = await import('../services/supabase');\n      if (supabase === null || supabase === undefined) return;\n      const {\n        error\n      } = await supabase.from('work_items').delete().eq('work_item_id', pendingDeleteId);\n      if (error !== null && error !== undefined) {\n        // 오류 발생\n      }\n    } catch (err) {\n      // 실패\n    }\n  };\n  const toInvoiceItem = (wi: WorkItem) => {\n    const DEFAULT_QUANTITY = 1;\n    const qty = typeof wi.quantity === 'number' && wi.quantity > 0 ? wi.quantity : DEFAULT_QUANTITY;\n    const unitPrice = typeof wi.defaultPrice === 'number' ? wi.defaultPrice : 0;\n\n    // 통합 인부임 계산 (laborPersons * laborUnitRate)\n    const persons = parseInt(String(wi.laborPersons ?? 0), 10);\n    const rate = parseInt(String(wi.laborUnitRate ?? 0), 10);\n    const personsNum = Number.isFinite(persons) && !isNaN(persons) ? persons : 0;\n    const rateNum = Number.isFinite(rate) && !isNaN(rate) ? rate : 0;\n    const laborCost = personsNum * rateNum;\n\n    // 레거시 필드도 읽어서 포함 (기존 데이터 호환성)\n    const lpg = parseInt(String(wi.laborPersonsGeneral ?? 0), 10);\n    const lrg = parseInt(String(wi.laborUnitRateGeneral ?? 0), 10);\n    const lpgNum = Number.isFinite(lpg) && !isNaN(lpg) ? lpg : 0;\n    const lrgNum = Number.isFinite(lrg) && !isNaN(lrg) ? lrg : 0;\n    const legacyLaborCost = lpgNum * lrgNum;\n    const totalLaborCost = laborCost + legacyLaborCost;\n    return {\n      name: wi.name,\n      quantity: qty,\n      unit: wi.unit,\n      unitPrice,\n      total: qty * unitPrice + totalLaborCost,\n      notes: wi.notes ?? '',\n      date: wi.date ?? '',\n      // 상세/인부임 정보 보전\n      category: wi.category ?? '',\n      description: wi.description ?? '',\n      laborPersons: wi.laborPersons ?? '',\n      laborUnitRate: wi.laborUnitRate ?? '',\n      laborPersonsGeneral: wi.laborPersonsGeneral ?? '',\n      laborUnitRateGeneral: wi.laborUnitRateGeneral ?? ''\n    };\n  };\n  const handleCreateInvoice = async (workItem: WorkItem) => {\n    const INVOICE_ID_PADDING = 3;\n    const DAYS_UNTIL_DUE = 14;\n    const HOURS_PER_DAY = 24;\n    const MINUTES_PER_HOUR = 60;\n    const SECONDS_PER_MINUTE = 60;\n    const MS_PER_SECOND = 1000;\n\n    // clientId 유효성 검증\n    if (workItem.clientId === null || workItem.clientId === undefined || workItem.clientId === 0) {\n      alert('유효한 건축주 정보가 없습니다. 작업 항목에 건축주를 먼저 설정해주세요.');\n      return;\n    }\n    const completedItems = workItems.filter(i => i.clientId === workItem.clientId && Number(i.workplaceId) === Number(workItem.workplaceId) && i.projectName === workItem.projectName && i.status === '완료');\n    const unbilledItems = completedItems;\n    if (unbilledItems.length === 0) {\n      alert('청구 가능한 완료된 작업 항목이 없습니다.');\n      return;\n    }\n    const client = clients.find(c => Number(c.id) === workItem.clientId);\n    const workplace = client?.workplaces?.find(w => Number(w.id) === Number(workItem.workplaceId));\n    const newInvoiceId = `INV-${new Date().getFullYear()}-${String(invoices.length + 1).padStart(INVOICE_ID_PADDING, '0')}`;\n    const items = unbilledItems.map(toInvoiceItem);\n    const totalAmount = items.reduce((s, it) => s + (it.total !== 0 ? it.total : 0), 0);\n    const dueDateTime = Date.now() + DAYS_UNTIL_DUE * HOURS_PER_DAY * MINUTES_PER_HOUR * SECONDS_PER_MINUTE * MS_PER_SECOND;\n    const newInvoice = {\n      id: newInvoiceId,\n      clientId: workItem.clientId,\n      client: workItem.clientName ?? '',\n      workplaceId: typeof workItem.workplaceId === 'number' ? workItem.workplaceId : undefined,\n      project: workItem.projectName ?? '',\n      workplaceAddress: workplace?.address ?? '',\n      amount: totalAmount,\n      status: '발송대기' as const,\n      date: new Date().toISOString().split('T')[0],\n      dueDate: new Date(dueDateTime).toISOString().split('T')[0],\n      workItems: items\n    };\n\n    // 이전 상태 백업\n    const previousInvoices = [...invoices];\n\n    // UI 먼저 업데이트 (optimistic update)\n    const tempInvoice = {\n      ...newInvoice,\n      id: `TEMP-${Date.now()}`\n    };\n    setInvoices(prev => [...prev, tempInvoice]);\n\n    // Supabase INSERT\n    try {\n      const {\n        supabase,\n        getCurrentUserId\n      } = await import('../services/supabase');\n      if (supabase !== null && supabase !== undefined) {\n        const userId = await getCurrentUserId();\n\n        // Status 한글 → 영어 변환\n        const toDbStatus = (status: string): string => {\n          const statusMap: Record<string, string> = {\n            '발송대기': 'pending',\n            '발송됨': 'pending',\n            '미결제': 'overdue',\n            '결제완료': 'paid'\n          };\n          return statusMap[status] ?? 'pending';\n        };\n\n        // 1. Invoice 메인 데이터 INSERT\n        const {\n          data: invoiceData,\n          error: invoiceError\n        } = await supabase.from('invoices').insert({\n          user_id: userId,\n          invoice_number: newInvoiceId,\n          client_id: workItem.clientId,\n          workplace_id: workItem.workplaceId,\n          title: workItem.projectName ?? '',\n          date: newInvoice.date,\n          due_date: newInvoice.dueDate,\n          status: toDbStatus(newInvoice.status),\n          amount: totalAmount,\n          notes: ''\n        }).select('invoice_id').single();\n        if (invoiceError !== null && invoiceError !== undefined) {\n          alert(`청구서 생성 중 오류가 발생했습니다: ${invoiceError.message}`);\n          setInvoices(previousInvoices);\n          return;\n        }\n\n        // 2. Invoice Items INSERT\n        if (invoiceData !== null && invoiceData !== undefined && items.length > 0) {\n          const dbInvoiceItems = items.map((item, index) => ({\n            user_id: userId,\n            invoice_id: invoiceData.invoice_id,\n            category: item.category ?? '',\n            name: item.name,\n            description: item.description ?? '',\n            unit: item.unit ?? '',\n            quantity: item.quantity,\n            unit_price: item.unitPrice,\n            sort_order: index,\n            date: item.date !== null && item.date !== undefined && item.date !== '' ? item.date : null,\n            notes: item.notes !== null && item.notes !== undefined && item.notes !== '' ? item.notes : null,\n            labor_persons: typeof item.laborPersons === 'number' ? item.laborPersons : typeof item.laborPersons === 'string' && item.laborPersons !== '' ? Number(item.laborPersons) : 0,\n            labor_unit_rate: typeof item.laborUnitRate === 'number' ? item.laborUnitRate : typeof item.laborUnitRate === 'string' && item.laborUnitRate !== '' ? Number(item.laborUnitRate) : 0,\n            labor_persons_general: typeof item.laborPersonsGeneral === 'number' ? item.laborPersonsGeneral : typeof item.laborPersonsGeneral === 'string' && item.laborPersonsGeneral !== '' ? Number(item.laborPersonsGeneral) : 0,\n            labor_unit_rate_general: typeof item.laborUnitRateGeneral === 'number' ? item.laborUnitRateGeneral : typeof item.laborUnitRateGeneral === 'string' && item.laborUnitRateGeneral !== '' ? Number(item.laborUnitRateGeneral) : 0\n          }));\n          const {\n            error: itemsError\n          } = await supabase.from('invoice_items').insert(dbInvoiceItems);\n          if (itemsError !== null && itemsError !== undefined) {\n            alert(`청구서 항목 저장 중 오류가 발생했습니다: ${itemsError.message}`);\n            // Invoice는 생성되었으나 items 저장 실패 - 계속 진행\n          }\n        }\n\n        // 실제 ID로 UI 업데이트\n        setInvoices(prev => prev.map(inv => inv.id === tempInvoice.id ? {\n          ...newInvoice,\n          id: newInvoiceId\n        } : inv));\n        alert(`청구서 ${newInvoiceId}가 생성되었습니다.`);\n      }\n    } catch (err) {\n      alert(`청구서 생성 실패: ${String(err)}`);\n      setInvoices(previousInvoices);\n    }\n  };\n  const onChangeField = (name: string, value: string) => {\n    let v: unknown = value;\n    if (['defaultPrice', 'quantity', 'laborPersons', 'laborUnitRate', 'laborPersonsGeneral', 'laborUnitRateGeneral'].includes(name)) {\n      const digits = String(value).replace(/[^\\d-]/g, '');\n      v = digits === '' || digits === '-' ? '' : parse(digits);\n    } else if (['clientId', 'workplaceId'].includes(name)) {\n      const parsedValue = parseInt(String(value));\n      v = parsedValue !== 0 ? parsedValue : 0;\n    }\n    setNewItem(prev => ({\n      ...prev,\n      [name]: v\n    }) as NewItem);\n  };\n\n  // Bulk Modal handlers\n  const onBaseInfoChangeField = (name: string, value: string) => {\n    let v: unknown = value;\n    if (name === 'clientId' || name === 'workplaceId') {\n      const parsedValue = parseInt(String(value));\n      v = parsedValue !== 0 ? parsedValue : '';\n    } else if (name === 'bulkLaborPersons' || name === 'bulkLaborUnitRate') {\n      const digits = String(value).replace(/[^\\d-]/g, '');\n      v = digits === '' || digits === '-' ? '' : parse(digits);\n    }\n    setBulkBaseInfo(prev => {\n      const next = {\n        ...prev,\n        [name]: v\n      } as typeof prev;\n      if (name === 'clientId') {\n        next.workplaceId = '';\n        setShowBulkCustomProject(false);\n      }\n      if (name === 'workplaceId') {\n        const wp = getClientWorkplaces(next.clientId).find(w => w.id === Number(v));\n        const hasProjectName = next.projectName !== '' && next.projectName !== null && next.projectName !== undefined;\n        const hasDescription = wp?.description !== undefined && wp?.description !== null && wp?.description !== '';\n        if (!hasProjectName && hasDescription) next.projectName = wp.description ?? '';\n      }\n      if (name === 'projectName') {\n        if (value === 'custom') {\n          setShowBulkCustomProject(true);\n          next.projectName = '';\n        } else {\n          setShowBulkCustomProject(false);\n        }\n      }\n      return next;\n    });\n  };\n  const onBulkItemChange = (index: number, field: string, value: string) => {\n    setBulkItems(prev => {\n      const updated = [...prev];\n      let v: unknown = value;\n      if (['defaultPrice', 'quantity', 'laborPersons', 'laborUnitRate'].includes(field)) {\n        const digits = String(value).replace(/[^\\d-]/g, '');\n        v = digits === '' || digits === '-' ? '' : parse(digits);\n      }\n      const existingItem = updated[index];\n      if (existingItem !== undefined) {\n        updated[index] = {\n          ...existingItem,\n          [field]: v\n        } as BulkItem;\n      }\n      return updated;\n    });\n  };\n  const onBulkAddItem = () => {\n    setBulkItems(prev => [...prev, {\n      name: '',\n      category: '',\n      defaultPrice: '' as unknown as number,\n      quantity: '' as unknown as number,\n      unit: '',\n      description: '',\n      status: '예정',\n      notes: '',\n      laborPersons: '',\n      laborUnitRate: ''\n    }]);\n  };\n  const onBulkRemoveItem = (index: number) => {\n    setBulkItems(prev => prev.length <= 1 ? prev : prev.filter((_, i) => i !== index));\n  };\n  const onBulkSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const errors: string[] = [];\n    const hasClientId = bulkBaseInfo.clientId !== '' && bulkBaseInfo.clientId !== null && bulkBaseInfo.clientId !== undefined;\n    const hasWorkplaceId = bulkBaseInfo.workplaceId !== '' && bulkBaseInfo.workplaceId !== null && bulkBaseInfo.workplaceId !== undefined;\n    const hasProjectName = bulkBaseInfo.projectName !== '' && bulkBaseInfo.projectName !== null && bulkBaseInfo.projectName !== undefined;\n    if (!hasClientId) errors.push('건축주를 선택하세요.');\n    if (!hasWorkplaceId) errors.push('작업장을 선택하세요.');\n    if (!hasProjectName) errors.push('프로젝트명을 입력하세요.');\n    bulkItems.forEach((it, idx) => {\n      const hasName = it.name !== undefined && it.name !== null && String(it.name).trim() !== '';\n      if (!hasName) errors.push(`항목 #${idx + 1}: 내용은 필수입니다.`);\n    });\n    if (errors.length > 0) {\n      alert(errors.join('\\n'));\n      return;\n    }\n    const selectedClientData = clients.find(c => Number(c.id) === Number(bulkBaseInfo.clientId));\n    const selectedWorkplace = getClientWorkplaces(bulkBaseInfo.clientId).find(wp => wp.id === Number(bulkBaseInfo.workplaceId));\n    const currentMaxId = workItems.length > 0 ? Math.max(...workItems.map(i => Number(i.id) ?? 0)) : 0;\n    const bulkLP: number | '' = typeof bulkBaseInfo.bulkLaborPersons === 'number' ? bulkBaseInfo.bulkLaborPersons : String(bulkBaseInfo.bulkLaborPersons).trim() === '' ? '' : parseInt(String(bulkBaseInfo.bulkLaborPersons), 10) ?? 0;\n    const bulkLR: number | '' = typeof bulkBaseInfo.bulkLaborUnitRate === 'number' ? bulkBaseInfo.bulkLaborUnitRate : String(bulkBaseInfo.bulkLaborUnitRate).trim() === '' ? '' : parseInt(String(bulkBaseInfo.bulkLaborUnitRate), 10) ?? 0;\n    const createdItems: WorkItem[] = bulkItems.map((item, idx) => ({\n      id: currentMaxId + idx + 1,\n      clientId: Number(bulkBaseInfo.clientId) as number,\n      clientName: selectedClientData?.name ?? '',\n      workplaceId: Number(bulkBaseInfo.workplaceId) as number,\n      workplaceName: selectedWorkplace?.name ?? '',\n      projectName: bulkBaseInfo.projectName,\n      date: bulkBaseInfo.date ?? new Date().toISOString().split('T')[0],\n      name: item.name ?? '',\n      category: item.category ?? '',\n      defaultPrice: typeof item.defaultPrice === 'number' && item.defaultPrice !== 0 ? item.defaultPrice : item.defaultPrice as unknown as string === '' ? '' as unknown as number : 0,\n      quantity: typeof item.quantity === 'number' && item.quantity !== 0 ? item.quantity : item.quantity as unknown as string === '' ? '' as unknown as number : 1,\n      unit: item.unit ?? '',\n      description: item.description ?? '',\n      status: item.status as WorkStatus ?? '예정',\n      notes: item.notes ?? '',\n      laborPersonsGeneral: bulkLP,\n      laborUnitRateGeneral: bulkLR,\n      laborPersons: item.laborPersons ?? '',\n      laborUnitRate: item.laborUnitRate ?? ''\n    }));\n\n    // 이전 상태 백업 (롤백용)\n    const previousWorkItems = workItems;\n    const previousClients = clients;\n\n    // UI 즉시 업데이트 (낙관적 업데이트)\n    setWorkItems(prev => [...prev, ...createdItems]);\n    const hasBulkProjectName = bulkBaseInfo.projectName !== '' && bulkBaseInfo.projectName !== null && bulkBaseInfo.projectName !== undefined;\n    if (hasBulkProjectName) {\n      setClients(prev => prev.map(c => Number(c.id) === Number(bulkBaseInfo.clientId) ? {\n        ...c,\n        projects: Array.from(new Set([...(c.projects ?? []), bulkBaseInfo.projectName]))\n      } : c));\n    }\n\n    // Supabase에도 즉시 생성\n    try {\n      const {\n        supabase\n      } = await import('../services/supabase');\n      if (supabase === null || supabase === undefined) {\n        setWorkItems(previousWorkItems);\n        setClients(previousClients);\n        alert('데이터베이스 연결에 실패했습니다.');\n        return;\n      }\n      const {\n        getCurrentUserId\n      } = await import('../services/supabase');\n      const userId = await getCurrentUserId();\n\n      // Integer 필드를 안전하게 변환하는 헬퍼 함수\n      const toIntOrNull = (val: string | number | null | undefined): number | null => {\n        if (val === null || val === undefined || val === '') return null;\n        const num = Number(val);\n        return isNaN(num) ? null : num;\n      };\n\n      // Status 한글 -> 영어 변환 함수\n      const toDbStatus = (status: string | undefined): string => {\n        if (status === null || status === undefined || status === '') return 'planned';\n        const statusMap: Record<string, string> = {\n          '예정': 'planned',\n          '진행중': 'in_progress',\n          '완료': 'completed',\n          '보류': 'on_hold'\n        };\n        return statusMap[status] ?? 'planned';\n      };\n\n      // 대량 INSERT를 위한 데이터 배열 생성\n      const dbWorkItems = createdItems.map(item => ({\n        user_id: userId,\n        client_id: toIntOrNull(item.clientId),\n        workplace_id: toIntOrNull(item.workplaceId),\n        project_name: item.projectName ?? '',\n        name: item.name,\n        description: item.description ?? '',\n        category: item.category ?? '',\n        quantity: toIntOrNull(item.quantity) ?? 0,\n        unit: item.unit ?? '',\n        default_price: toIntOrNull(item.defaultPrice) ?? 0,\n        status: toDbStatus(item.status),\n        start_date: item.date ?? null,\n        notes: item.notes ?? '',\n        labor_persons: toIntOrNull(item.laborPersons) ?? 0,\n        labor_unit_rate: toIntOrNull(item.laborUnitRate) ?? 0,\n        labor_persons_general: toIntOrNull(item.laborPersonsGeneral) ?? 0,\n        labor_unit_rate_general: toIntOrNull(item.laborUnitRateGeneral) ?? 0\n      }));\n      const {\n        data: insertedData,\n        error\n      } = await supabase.from('work_items').insert(dbWorkItems).select(`\n          *,\n          clients!client_id (\n            company_name,\n            workplaces\n          )\n        `);\n      if (error !== null && error !== undefined) {\n        setWorkItems(previousWorkItems);\n        setClients(previousClients);\n        alert(`작업 항목 생성 중 오류가 발생했습니다: ${error.message}`);\n        return;\n      }\n\n      // DB에서 반환된 실제 데이터로 UI 업데이트\n      if (insertedData !== null && insertedData !== undefined && insertedData.length > 0) {\n        const fromDbStatus = (status: string): '예정' | '진행중' | '완료' | '보류' => {\n          const statusMap: Record<string, '예정' | '진행중' | '완료' | '보류'> = {\n            'planned': '예정',\n            'in_progress': '진행중',\n            'completed': '완료',\n            'on_hold': '보류',\n            'cancelled': '보류'\n          };\n          return statusMap[status] ?? '예정';\n        };\n        const actualCreatedItems: WorkItem[] = insertedData.map((w: Record<string, unknown>) => {\n          const clients = w.clients as Record<string, unknown> | null | undefined;\n          const clientName = clients?.company_name !== null && clients?.company_name !== undefined ? String(clients.company_name) : '';\n          const workplaces = clients?.workplaces !== null && clients?.workplaces !== undefined ? clients.workplaces as Array<Record<string, unknown>> : [];\n          const workplace = workplaces.find((wp: Record<string, unknown>) => wp.id !== null && wp.id !== undefined && wp.id === w.workplace_id);\n          const workplaceName = workplace?.name !== null && workplace?.name !== undefined ? String(workplace.name) : '';\n          const rawWorkplaceId = w.workplace_id as number | null | undefined;\n          const workplaceId = rawWorkplaceId !== null && rawWorkplaceId !== undefined ? rawWorkplaceId : '';\n          return {\n            id: w.work_item_id as number,\n            clientId: w.client_id as number,\n            clientName,\n            workplaceId,\n            workplaceName,\n            projectName: w.project_name !== null && w.project_name !== undefined ? String(w.project_name) : '',\n            name: w.name as string,\n            category: w.category !== null && w.category !== undefined ? String(w.category) : '',\n            defaultPrice: w.default_price !== null && w.default_price !== undefined ? Number(w.default_price) : 0,\n            quantity: w.quantity !== null && w.quantity !== undefined ? Number(w.quantity) : 0,\n            unit: w.unit !== null && w.unit !== undefined ? String(w.unit) : '',\n            description: w.description !== null && w.description !== undefined ? String(w.description) : '',\n            status: fromDbStatus(w.status as string) as WorkStatus,\n            date: w.start_date !== null && w.start_date !== undefined ? String(w.start_date) : '',\n            notes: w.notes !== null && w.notes !== undefined ? String(w.notes) : '',\n            laborPersons: w.labor_persons !== null && w.labor_persons !== undefined ? Number(w.labor_persons) : 0,\n            laborUnitRate: w.labor_unit_rate !== null && w.labor_unit_rate !== undefined ? Number(w.labor_unit_rate) : 0,\n            laborPersonsGeneral: w.labor_persons_general !== null && w.labor_persons_general !== undefined ? Number(w.labor_persons_general) : 0,\n            laborUnitRateGeneral: w.labor_unit_rate_general !== null && w.labor_unit_rate_general !== undefined ? Number(w.labor_unit_rate_general) : 0\n          };\n        });\n\n        // 실제 DB 데이터로 다시 업데이트\n        setWorkItems(prev => {\n          const withoutOptimistic = prev.filter(item => !createdItems.some(created => created.id === item.id));\n          return [...withoutOptimistic, ...actualCreatedItems];\n        });\n      }\n    } catch (err) {\n      setWorkItems(previousWorkItems);\n      setClients(previousClients);\n      alert('작업 항목 생성 중 예상치 못한 오류가 발생했습니다.');\n      return;\n    }\n    setShowBulkModal(false);\n    setShowBulkCustomProject(false);\n    setBulkItems([{\n      name: '',\n      category: '',\n      defaultPrice: '' as unknown as number,\n      quantity: '' as unknown as number,\n      unit: '',\n      description: '',\n      status: '예정',\n      notes: '',\n      laborPersons: '',\n      laborUnitRate: ''\n    }]);\n    setBulkBaseInfo({\n      clientId: '',\n      workplaceId: '',\n      projectName: '',\n      date: new Date().toISOString().split('T')[0],\n      bulkLaborPersons: '',\n      bulkLaborUnitRate: ''\n    });\n    alert(`${createdItems.length}개의 작업 항목이 추가되었습니다.`);\n  };\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const selectedClientData = clients.find(c => Number(c.id) === Number(newItem.clientId));\n    const selectedWorkplace = getClientWorkplaces(newItem.clientId).find(wp => wp.id === newItem.workplaceId);\n    if (editingItem !== null) {\n      // 이전 상태 백업 (롤백용)\n      const previousWorkItems = workItems;\n\n      // 수정: UI 즉시 업데이트 (낙관적 업데이트)\n      const updated = {\n        ...editingItem,\n        ...newItem,\n        clientName: selectedClientData?.name ?? editingItem.clientName,\n        workplaceName: selectedWorkplace?.name ?? editingItem.workplaceName\n      } as WorkItem;\n      setWorkItems(prev => prev.map(i => i.id === editingItem.id ? updated : i));\n\n      // Supabase에도 즉시 업데이트\n      try {\n        const {\n          supabase\n        } = await import('../services/supabase');\n        if (supabase === null || supabase === undefined) {\n          // Supabase 초기화 실패 시 롤백\n          setWorkItems(previousWorkItems);\n          alert('데이터베이스 연결에 실패했습니다.');\n          return;\n        }\n        // Integer 필드를 안전하게 변환하는 헬퍼 함수\n        const toIntOrNull = (val: string | number | null | undefined): number | null => {\n          if (val === null || val === undefined || val === '') return null;\n          const num = Number(val);\n          return isNaN(num) ? null : num;\n        };\n\n        // Status 한글 -> 영어 변환 함수\n        const toDbStatus = (status: string | undefined): string => {\n          if (status === null || status === undefined || status === '') return 'planned';\n          const statusMap: Record<string, string> = {\n            '예정': 'planned',\n            '진행중': 'in_progress',\n            '완료': 'completed',\n            '보류': 'on_hold'\n          };\n          return statusMap[status] ?? 'planned';\n        };\n        const {\n          error\n        } = await supabase.from('work_items').update({\n          client_id: toIntOrNull(updated.clientId),\n          workplace_id: toIntOrNull(updated.workplaceId),\n          project_name: updated.projectName ?? '',\n          name: updated.name,\n          description: updated.description ?? '',\n          category: updated.category ?? '',\n          quantity: toIntOrNull(updated.quantity) ?? 0,\n          unit: updated.unit ?? '',\n          default_price: toIntOrNull(updated.defaultPrice) ?? 0,\n          status: toDbStatus(updated.status),\n          start_date: updated.date ?? null,\n          notes: updated.notes ?? '',\n          labor_persons: toIntOrNull(updated.laborPersons) ?? 0,\n          labor_unit_rate: toIntOrNull(updated.laborUnitRate) ?? 0,\n          labor_persons_general: toIntOrNull(updated.laborPersonsGeneral) ?? 0,\n          labor_unit_rate_general: toIntOrNull(updated.laborUnitRateGeneral) ?? 0\n        }).eq('work_item_id', updated.id);\n        if (error !== null && error !== undefined) {\n          // 오류 발생 시 롤백\n          setWorkItems(previousWorkItems);\n          alert(`작업 항목 수정 중 오류가 발생했습니다: ${error.message}`);\n          return;\n        }\n      } catch (err) {\n        // 예외 발생 시 롤백\n        setWorkItems(previousWorkItems);\n        alert('작업 항목 수정 중 예상치 못한 오류가 발생했습니다.');\n        return;\n      }\n    } else {\n      // 이전 상태 백업 (롤백용)\n      const previousWorkItems = workItems;\n      const previousClients = clients;\n\n      // 생성: UI 즉시 업데이트 (낙관적 업데이트)\n      const nextId = (workItems.length > 0 ? Math.max(...workItems.map(i => Number(i.id) ?? 0)) : 0) + 1;\n      const created: WorkItem = {\n        ...newItem,\n        id: nextId,\n        clientName: selectedClientData?.name ?? '',\n        workplaceName: selectedWorkplace?.name ?? '',\n        date: newItem.date ?? new Date().toISOString().split('T')[0]\n      } as WorkItem;\n      setWorkItems(prev => [...prev, created]);\n      const hasProjectName = newItem.projectName !== undefined && newItem.projectName !== null && newItem.projectName !== '';\n      if (hasProjectName) {\n        setClients(prev => prev.map(c => Number(c.id) === Number(newItem.clientId) ? {\n          ...c,\n          projects: Array.from(new Set([...(c.projects ?? []), newItem.projectName!]))\n        } : c));\n      }\n\n      // Supabase에도 즉시 생성\n      try {\n        const {\n          supabase\n        } = await import('../services/supabase');\n        if (supabase === null || supabase === undefined) {\n          // Supabase 초기화 실패 시 롤백\n          setWorkItems(previousWorkItems);\n          setClients(previousClients);\n          alert('데이터베이스 연결에 실패했습니다.');\n          return;\n        }\n        const {\n          getCurrentUserId\n        } = await import('../services/supabase');\n        const userId = await getCurrentUserId();\n\n        // Integer 필드를 안전하게 변환하는 헬퍼 함수\n        const toIntOrNull = (val: string | number | null | undefined): number | null => {\n          if (val === null || val === undefined || val === '') return null;\n          const num = Number(val);\n          return isNaN(num) ? null : num;\n        };\n\n        // Status 한글 -> 영어 변환 함수\n        const toDbStatus = (status: string | undefined): string => {\n          if (status === null || status === undefined || status === '') return 'planned';\n          const statusMap: Record<string, string> = {\n            '예정': 'planned',\n            '진행중': 'in_progress',\n            '완료': 'completed',\n            '보류': 'on_hold'\n          };\n          return statusMap[status] ?? 'planned';\n        };\n        const dbStatus = toDbStatus(created.status);\n        const clientIdValue = toIntOrNull(created.clientId);\n        const workplaceIdValue = toIntOrNull(created.workplaceId);\n\n        // client_id가 필수이므로 null이면 에러\n        if (clientIdValue === null) {\n          alert('건축주를 선택해주세요.');\n          setWorkItems(previousWorkItems);\n          setClients(previousClients);\n          return;\n        }\n\n        // work_item_id는 데이터베이스에서 자동 생성하도록 제거\n        const {\n          error\n        } = await supabase.from('work_items').insert({\n          user_id: userId,\n          client_id: clientIdValue,\n          workplace_id: workplaceIdValue,\n          project_name: created.projectName ?? '',\n          name: created.name,\n          description: created.description ?? '',\n          category: created.category ?? '',\n          quantity: toIntOrNull(created.quantity) ?? 0,\n          unit: created.unit ?? '',\n          default_price: toIntOrNull(created.defaultPrice) ?? 0,\n          status: dbStatus,\n          start_date: created.date ?? null,\n          notes: created.notes ?? '',\n          labor_persons: toIntOrNull(created.laborPersons) ?? 0,\n          labor_unit_rate: toIntOrNull(created.laborUnitRate) ?? 0,\n          labor_persons_general: toIntOrNull(created.laborPersonsGeneral) ?? 0,\n          labor_unit_rate_general: toIntOrNull(created.laborUnitRateGeneral) ?? 0\n        });\n        if (error !== null && error !== undefined) {\n          // 오류 발생 시 롤백\n          setWorkItems(previousWorkItems);\n          setClients(previousClients);\n          alert(`작업 항목 생성 중 오류가 발생했습니다: ${error.message}`);\n          return;\n        }\n      } catch (err) {\n        // 예외 발생 시 롤백\n        setWorkItems(previousWorkItems);\n        setClients(previousClients);\n        alert('작업 항목 생성 중 예상치 못한 오류가 발생했습니다.');\n        return;\n      }\n    }\n    setShowItemModal(false);\n    setEditingItem(null);\n    setNewItem(defaultNewItem);\n  };\n  const handleBulkDelete = () => {\n    if (selection.selected.length === 0) {\n      alert('삭제할 항목을 선택하세요.');\n      return;\n    }\n    setShowConfirmBulkDelete(true);\n  };\n  const confirmBulkDelete = async () => {\n    const count = selection.selected.length;\n\n    // UI에서 즉시 제거\n    setWorkItems(prev => prev.filter(i => !selection.selected.includes(i.id)));\n    selection.clear();\n    setShowConfirmBulkDelete(false);\n    alert(`${count}개의 작업 항목이 삭제되었습니다.`);\n\n    // Supabase에서도 즉시 삭제\n    try {\n      const {\n        supabase\n      } = await import('../services/supabase');\n      if (supabase === null || supabase === undefined) return;\n      const {\n        error\n      } = await supabase.from('work_items').delete().in('work_item_id', selection.selected);\n      if (error !== null && error !== undefined) {\n        // 오류 발생\n      }\n    } catch (err) {\n      // 실패\n    }\n  };\n  const handleApplyBulkStatus = async () => {\n    const hasStatus = bulkStatus !== '' && bulkStatus !== null && bulkStatus !== undefined;\n    if (!hasStatus) {\n      alert('변경할 상태를 선택하세요.');\n      return;\n    }\n\n    // 이전 상태 백업 (롤백용)\n    const previousWorkItems = workItems;\n\n    // UI 즉시 업데이트 (낙관적 업데이트)\n    setWorkItems(prev => prev.map(item => selection.selected.includes(item.id) ? {\n      ...item,\n      status: bulkStatus as WorkStatus\n    } : item));\n    setBulkStatus('');\n\n    // Supabase에도 즉시 업데이트\n    try {\n      const {\n        supabase\n      } = await import('../services/supabase');\n      if (supabase === null || supabase === undefined) {\n        setWorkItems(previousWorkItems);\n        alert('데이터베이스 연결에 실패했습니다.');\n        return;\n      }\n\n      // Status 한글 -> 영어 변환 함수\n      const toDbStatus = (status: string | undefined): string => {\n        if (status === null || status === undefined || status === '') return 'planned';\n        const statusMap: Record<string, string> = {\n          '예정': 'planned',\n          '진행중': 'in_progress',\n          '완료': 'completed',\n          '보류': 'on_hold'\n        };\n        return statusMap[status] ?? 'planned';\n      };\n      const dbStatus = toDbStatus(bulkStatus as WorkStatus);\n\n      // 선택된 항목들의 상태를 일괄 업데이트\n      const {\n        error\n      } = await supabase.from('work_items').update({\n        status: dbStatus\n      }).in('work_item_id', selection.selected);\n      if (error !== null && error !== undefined) {\n        setWorkItems(previousWorkItems);\n        alert(`상태 변경 중 오류가 발생했습니다: ${error.message}`);\n        return;\n      }\n    } catch (err) {\n      setWorkItems(previousWorkItems);\n      alert('상태 변경 중 예상치 못한 오류가 발생했습니다.');\n    }\n  };\n  const handleCreateBulkInvoice = () => {\n    const INVOICE_ID_PADDING = 3;\n    const DAYS_UNTIL_DUE = 14;\n    const HOURS_PER_DAY = 24;\n    const MINUTES_PER_HOUR = 60;\n    const SECONDS_PER_MINUTE = 60;\n    const MS_PER_SECOND = 1000;\n    if (selection.selected.length === 0) {\n      alert('항목을 선택하세요.');\n      return;\n    }\n    const selectedItems = workItems.filter(i => selection.selected.includes(i.id) && i.status === '완료');\n    if (selectedItems.length === 0) {\n      alert('완료된 항목이 없습니다.');\n      return;\n    }\n    const first = selectedItems[0];\n\n    // clientId 유효성 검증\n    if (first.clientId === null || first.clientId === undefined || first.clientId === 0) {\n      alert('유효한 건축주 정보가 없습니다. 작업 항목에 건축주를 먼저 설정해주세요.');\n      return;\n    }\n\n    // 같은 건축주, 작업장, 프로젝트인지 확인\n    const hasDifferentProject = selectedItems.some(item => item.clientId !== first.clientId || Number(item.workplaceId) !== Number(first.workplaceId) || item.projectName !== first.projectName);\n    if (hasDifferentProject) {\n      alert('선택한 항목들은 모두 같은 건축주, 작업장, 프로젝트여야 합니다.');\n      return;\n    }\n    const client = clients.find(c => Number(c.id) === first.clientId);\n    const workplace = client?.workplaces?.find(w => Number(w.id) === Number(first.workplaceId));\n    const newInvoiceId = `INV-${new Date().getFullYear()}-${String(invoices.length + 1).padStart(INVOICE_ID_PADDING, '0')}`;\n    const items = selectedItems.map(toInvoiceItem);\n    const totalAmount = items.reduce((s, it) => s + (it.total !== 0 ? it.total : 0), 0);\n    const dueDateTime = Date.now() + DAYS_UNTIL_DUE * HOURS_PER_DAY * MINUTES_PER_HOUR * SECONDS_PER_MINUTE * MS_PER_SECOND;\n    const newInvoice = {\n      id: newInvoiceId,\n      clientId: first.clientId,\n      client: first.clientName ?? '',\n      workplaceId: typeof first.workplaceId === 'number' ? first.workplaceId : undefined,\n      project: first.projectName ?? '',\n      workplaceAddress: workplace?.address ?? '',\n      amount: totalAmount,\n      status: '발송대기' as const,\n      date: new Date().toISOString().split('T')[0],\n      dueDate: new Date(dueDateTime).toISOString().split('T')[0],\n      workItems: items\n    };\n    setInvoices(prev => [...prev, newInvoice]);\n    selection.clear();\n    alert(`청구서 ${newInvoiceId}가 생성되었습니다! (${selectedItems.length}개 항목)`);\n  };\n  const handleExport = () => exportToExcel.workItems(filteredWorkItems);\n  const handleImport = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    const file = files !== null && files.length > 0 ? files[0] : null;\n    if (file === null) return;\n\n    // 이전 상태 백업 (롤백용)\n    const previousWorkItems = workItems;\n    try {\n      const imported = await importFromExcel.workItems(file);\n      const currentMax = workItems.length > 0 ? Math.max(...workItems.map(i => Number(i.id) ?? 0)) : 0;\n      const importedArray = imported ?? [];\n\n      // 건축주 이름으로 ID 매칭 및 검증\n      const notFoundClients: string[] = [];\n      const notFoundWorkplaces: string[] = [];\n      const missingWorkplaces: string[] = [];\n      const remapped = importedArray.map((it: Partial<WorkItem>, idx: number) => {\n        // 건축주 이름으로 ID 찾기\n        let matchedClient: Client | undefined;\n        if (it?.clientName !== null && it?.clientName !== undefined && it.clientName !== '') {\n          matchedClient = clients.find(c => c.name === it.clientName);\n          if (matchedClient === null || matchedClient === undefined) {\n            notFoundClients.push(it.clientName);\n          }\n        }\n\n        // 작업장 이름 필수 검증\n        if (it?.workplaceName === null || it?.workplaceName === undefined || it.workplaceName.trim() === '') {\n          missingWorkplaces.push(`${it?.clientName ?? '(건축주 없음)'} - ${it?.name ?? '(항목명 없음)'}`);\n        }\n\n        // 작업장 이름으로 ID 찾기 (해당 건축주 내에서)\n        let matchedWorkplaceId: number | '' = '';\n        if (matchedClient !== null && matchedClient !== undefined && it?.workplaceName !== null && it?.workplaceName !== undefined && it.workplaceName !== '') {\n          const workplace = matchedClient.workplaces?.find(wp => wp.name === it.workplaceName);\n          if (workplace !== null && workplace !== undefined) {\n            matchedWorkplaceId = typeof workplace.id === 'number' ? workplace.id : Number(workplace.id);\n          } else {\n            // 건축주는 있지만 해당 작업장이 없는 경우\n            notFoundWorkplaces.push(`${it.clientName} - ${it.workplaceName}`);\n          }\n        }\n        return {\n          id: currentMax + idx + 1,\n          clientId: matchedClient !== null && matchedClient !== undefined ? typeof matchedClient.id === 'number' ? matchedClient.id : Number(matchedClient.id) : 0,\n          clientName: it?.clientName ?? '',\n          workplaceId: matchedWorkplaceId,\n          workplaceName: it?.workplaceName ?? '',\n          projectName: it?.projectName ?? '',\n          name: String(it?.name ?? ''),\n          category: it?.category ?? '',\n          unit: it?.unit ?? '',\n          quantity: typeof it?.quantity === 'number' ? it.quantity : 0,\n          defaultPrice: typeof it?.defaultPrice === 'number' ? it.defaultPrice : 0,\n          description: it?.description ?? '',\n          notes: it?.notes ?? '',\n          status: it?.status as WorkStatus ?? '예정',\n          date: it?.date ?? new Date().toISOString().split('T')[0],\n          laborPersons: it?.laborPersons ?? '',\n          laborUnitRate: it?.laborUnitRate ?? '',\n          laborPersonsGeneral: it?.laborPersonsGeneral ?? '',\n          laborUnitRateGeneral: it?.laborUnitRateGeneral ?? ''\n        } as WorkItem;\n      });\n\n      // 검증 오류 확인\n      const MAX_ERROR_DISPLAY_COUNT = 5;\n      const errors: string[] = [];\n      if (notFoundClients.length > 0) {\n        const uniqueNames = Array.from(new Set(notFoundClients));\n        errors.push(`❌ 등록되지 않은 건축주:\\n   ${uniqueNames.join(', ')}`);\n      }\n      if (missingWorkplaces.length > 0) {\n        errors.push(`❌ 작업장 정보가 누락된 항목:\\n   ${missingWorkplaces.slice(0, MAX_ERROR_DISPLAY_COUNT).join('\\n   ')}${missingWorkplaces.length > MAX_ERROR_DISPLAY_COUNT ? `\\n   ... 외 ${missingWorkplaces.length - MAX_ERROR_DISPLAY_COUNT}개` : ''}`);\n      }\n      if (notFoundWorkplaces.length > 0) {\n        const uniqueWorkplaces = Array.from(new Set(notFoundWorkplaces));\n        errors.push(`❌ 등록되지 않은 작업장:\\n   ${uniqueWorkplaces.slice(0, MAX_ERROR_DISPLAY_COUNT).join('\\n   ')}${uniqueWorkplaces.length > MAX_ERROR_DISPLAY_COUNT ? `\\n   ... 외 ${uniqueWorkplaces.length - MAX_ERROR_DISPLAY_COUNT}개` : ''}`);\n      }\n      if (errors.length > 0) {\n        setWorkItems(previousWorkItems);\n        alert(`엑셀 가져오기 실패\\n\\n${errors.join('\\n\\n')}\\n\\n해결 방법:\\n1. 건축주 관리에서 건축주를 먼저 등록\\n2. 건축주의 작업장을 등록\\n3. 엑셀 파일의 \"건축주\"와 \"작업장\" 컬럼을 정확히 입력`);\n        (e.target as HTMLInputElement).value = '';\n        return;\n      }\n\n      // UI 즉시 업데이트 (낙관적 업데이트)\n      setWorkItems(prev => [...prev, ...remapped]);\n\n      // Supabase에 저장\n      try {\n        const {\n          supabase\n        } = await import('../services/supabase');\n        if (supabase === null || supabase === undefined) {\n          setWorkItems(previousWorkItems);\n          alert('데이터베이스 연결에 실패했습니다.');\n          return;\n        }\n        const {\n          getCurrentUserId\n        } = await import('../services/supabase');\n        const userId = await getCurrentUserId();\n\n        // Integer 필드를 안전하게 변환하는 헬퍼 함수\n        const toIntOrNull = (val: string | number | null | undefined): number | null => {\n          if (val === null || val === undefined || val === '') return null;\n          const num = Number(val);\n          return isNaN(num) ? null : num;\n        };\n\n        // Status 한글 -> 영어 변환 함수\n        const toDbStatus = (status: string | undefined): string => {\n          if (status === null || status === undefined || status === '') return 'planned';\n          const statusMap: Record<string, string> = {\n            '예정': 'planned',\n            '진행중': 'in_progress',\n            '완료': 'completed',\n            '보류': 'on_hold'\n          };\n          return statusMap[status] ?? 'planned';\n        };\n\n        // 대량 INSERT를 위한 데이터 배열 생성\n        const dbWorkItems = remapped.map(item => ({\n          user_id: userId,\n          client_id: toIntOrNull(item.clientId),\n          client_name: item.clientName ?? '',\n          workplace_id: toIntOrNull(item.workplaceId),\n          workplace_name: item.workplaceName ?? '',\n          project_name: item.projectName ?? '',\n          name: item.name,\n          description: item.description ?? '',\n          category: item.category ?? '',\n          quantity: toIntOrNull(item.quantity) ?? 0,\n          unit: item.unit ?? '',\n          default_price: toIntOrNull(item.defaultPrice) ?? 0,\n          status: toDbStatus(item.status),\n          start_date: item.date ?? null,\n          notes: item.notes ?? '',\n          labor_persons: toIntOrNull(item.laborPersons) ?? 0,\n          labor_unit_rate: toIntOrNull(item.laborUnitRate) ?? 0,\n          labor_persons_general: toIntOrNull(item.laborPersonsGeneral) ?? 0,\n          labor_unit_rate_general: toIntOrNull(item.laborUnitRateGeneral) ?? 0\n        }));\n        const {\n          data: insertedData,\n          error: insertError\n        } = await supabase.from('work_items').insert(dbWorkItems).select();\n        if (insertError !== null && insertError !== undefined) {\n          setWorkItems(previousWorkItems);\n          // eslint-disable-next-line no-console\n          console.error('엑셀 가져오기 Supabase 저장 오류 상세:', {\n            message: insertError.message,\n            details: insertError.details,\n            hint: insertError.hint,\n            code: insertError.code,\n            데이터개수: dbWorkItems.length,\n            첫번째항목: dbWorkItems[0]\n          });\n          alert(`Supabase 저장 중 오류가 발생했습니다: ${insertError.message}\\n\\n콘솔(F12)을 열어 상세 정보를 확인하세요.`);\n          return;\n        }\n\n        // DB에서 반환된 실제 데이터로 업데이트 (work_item_id 포함)\n        if (insertedData !== null && insertedData !== undefined) {\n          const actualCreatedItems: WorkItem[] = insertedData.map((w: Record<string, unknown>) => {\n            const fromDbStatus = (dbStatus: string): WorkStatus => {\n              const statusMap: Record<string, WorkStatus> = {\n                'planned': '예정',\n                'in_progress': '진행중',\n                'completed': '완료',\n                'on_hold': '보류'\n              };\n              return statusMap[dbStatus] ?? '예정';\n            };\n            const clientId = w.client_id as number;\n            const rawWorkplaceId = w.workplace_id as number | null | undefined;\n            const workplaceId = rawWorkplaceId !== null && rawWorkplaceId !== undefined ? rawWorkplaceId : '';\n            return {\n              id: w.work_item_id as number,\n              clientId,\n              clientName: (w.client_name ?? '') as string,\n              workplaceId,\n              workplaceName: (w.workplace_name ?? '') as string,\n              projectName: (w.project_name ?? '') as string,\n              name: w.name as string,\n              category: (w.category ?? '') as string,\n              defaultPrice: (w.default_price ?? 0) as number,\n              quantity: (w.quantity ?? 0) as number,\n              unit: (w.unit ?? '') as string,\n              description: (w.description ?? '') as string,\n              status: fromDbStatus(w.status as string),\n              date: (w.start_date ?? '') as string,\n              notes: (w.notes ?? '') as string,\n              laborPersons: (w.labor_persons ?? 0) as number,\n              laborUnitRate: (w.labor_unit_rate ?? 0) as number,\n              laborPersonsGeneral: (w.labor_persons_general ?? 0) as number,\n              laborUnitRateGeneral: (w.labor_unit_rate_general ?? 0) as number\n            };\n          });\n\n          // 실제 DB 데이터로 다시 업데이트\n          setWorkItems(prev => {\n            const withoutOptimistic = prev.filter(item => !remapped.some(created => created.id === item.id));\n            return [...withoutOptimistic, ...actualCreatedItems];\n          });\n        }\n      } catch (err) {\n        setWorkItems(previousWorkItems);\n        alert('작업 항목 저장 중 예상치 못한 오류가 발생했습니다.');\n        return;\n      }\n      alert(`${imported.length}개의 작업 항목을 가져왔습니다.`);\n    } catch (err) {\n      alert('Excel 파일을 가져오는 중 오류가 발생했습니다.');\n    }\n    (e.target as HTMLInputElement).value = '';\n  };\n  return /*@million jsx-skip*/<WorkItems_1 v0={() => createTemplate.workItems()} v1={() => fileInputRef.current?.click()} v2={handleExport} v3={() => setShowBulkModal(true)} v4={() => setShowItemModal(true)} v5={<input type=\"file\" ref={fileInputRef} onChange={handleImport} accept=\".xlsx,.xls\" style={{\n    display: 'none'\n  }} />} v6={<StatsCards filteredWorkItems={filteredWorkItems} format={format} getLaborCost={getLaborCost} />} v7={<FilterBar clients={clients} selectedClient={selectedClient} selectedProject={selectedProject} filteredCount={filteredWorkItems.length} totalCount={workItems.length} selectionCount={selection.selected.length} bulkStatus={bulkStatus} statuses={STATUSES} getClientProjects={getClientProjects} onChangeClient={val => {\n    setSelectedClient(val);\n    setSelectedProject('');\n  }} onChangeProject={val => setSelectedProject(val)} onResetFilters={() => {\n    setSelectedClient('');\n    setSelectedProject('');\n  }} onBulkStatusChange={val => setBulkStatus(val)} onApplyBulkStatus={handleApplyBulkStatus} onCreateBulkInvoice={handleCreateBulkInvoice} onBulkDelete={handleBulkDelete} />} v8={<WorkItemsTable items={filteredWorkItems} selection={selection} format={format} getLaborCost={getLaborCost} getCategoryColor={getCategoryColor} onEdit={handleEdit} onDelete={handleDelete} onCreateInvoice={handleCreateInvoice} />} v9={<ItemFormModal open={showItemModal} editingItem={editingItem} newItem={newItem} clients={clients} units={units} categories={categories} statuses={STATUSES} onChangeField={onChangeField} onCancel={() => {\n    setShowItemModal(false);\n    setEditingItem(null);\n    setNewItem(defaultNewItem);\n  }} onSubmit={handleSubmit} />} v10={<BulkFormModal open={showBulkModal} clients={clients} categories={categories} units={units} bulkItems={bulkItems} bulkBaseInfo={bulkBaseInfo} showBulkCustomProject={showBulkCustomProject} statuses={STATUSES} onBaseInfoChangeField={onBaseInfoChangeField} onItemChange={onBulkItemChange} onAddItem={onBulkAddItem} onRemoveItem={onBulkRemoveItem} onCancel={() => {\n    setShowBulkModal(false);\n  }} onSubmit={onBulkSubmit} />} v11={<ConfirmDialog open={showConfirmBulkDelete} title=\"선택 삭제\" message={`선택된 ${selection.selected.length}개의 작업 항목을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`} confirmText=\"삭제\" cancelText=\"취소\" onConfirm={confirmBulkDelete} onCancel={() => setShowConfirmBulkDelete(false)} />} v12={<ConfirmDialog open={pendingDeleteId != null} title=\"작업 항목 삭제\" message={`이 작업 항목을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`} confirmText=\"삭제\" cancelText=\"취소\" onConfirm={confirmDeleteSingle} onCancel={() => setPendingDeleteId(null)} />} />;\n};\nimport { block as _block } from \"million/react\";\nimport { useMemo, useRef, useState } from 'react';\nimport { useApp } from '../contexts/AppContext';\nimport { useNumberFormat } from '../hooks/useNumberFormat';\nimport { useSelection } from '../hooks/useSelection';\nimport { useClientWorkplaces } from '../hooks/useClientWorkplaces';\nimport StatsCards from './work-items/StatsCards';\nimport FilterBar from './work-items/FilterBar';\nimport WorkItemsTable from './work-items/WorkItemsTable';\nimport ItemFormModal from './work-items/ItemFormModal';\nimport BulkFormModal from './work-items/BulkFormModal';\nimport ConfirmDialog from './ConfirmDialog';\nimport { exportToExcel, importFromExcel, createTemplate } from '../utils/excelUtils';\nimport type { WorkItem, WorkStatus, Client } from '../types/domain';\nimport type { Id } from '../hooks/useSelection';\ntype NewItem = WorkItem;\ntype BulkItem = Partial<WorkItem> & {\n  status?: string;\n};\nconst STATUSES: WorkStatus[] = ['예정', '진행중', '완료', '보류'];\nexport default WorkItems;","import WorkItems from '../components/WorkItems';\nexport default function WorkItemsPage() {\n  return <WorkItems />;\n}","import { useEffect, useMemo, useState } from 'react';\n\nexport type Id = string | number;\n\nexport function useSelection(allIds: Id[]) {\n  const [selected, setSelected] = useState<Id[]>([]);\n\n  // 교차 보정: 전체 목록이 바뀌면 선택 목록도 교집합으로 정리\n  useEffect(() => {\n    setSelected((prev) => {\n      const next = prev.filter((id) => allIds.includes(id));\n      // 동일한 내용이면 상태 갱신 생략하여 불필요한 리렌더/루프 방지\n      if (next.length === prev.length && next.every((v, i) => v === prev[i])) {\n        return prev;\n      }\n      return next;\n    });\n  }, [allIds]);\n\n  const allSelected = useMemo(\n    () => allIds.length > 0 && selected.length === allIds.length,\n    [allIds.length, selected.length]\n  );\n\n  const toggleOne = (id: Id, checked: boolean) => {\n    setSelected((prev) =>\n      checked ? Array.from(new Set([...prev, id])) : prev.filter((x) => x !== id)\n    );\n  };\n\n  const toggleAll = (checked: boolean) => {\n    setSelected(checked ? [...allIds] : []);\n  };\n\n  const clear = () => setSelected([]);\n\n  return { selected, setSelected, allSelected, toggleOne, toggleAll, clear };\n}\n","// Simple number format/parse utilities as a React hook\n// Provides comma formatting and safe integer parsing used across forms.\n\nexport function useNumberFormat() {\n  /** Format a number-like value with thousands separators. */\n  const format = (value: number | string | null | undefined): string => {\n    if (value === null || value === undefined || value === '') return '';\n    const onlyDigits = String(value).replace(/[^\\d-]/g, '');\n    if (onlyDigits === '' || onlyDigits === '-') return '';\n    const num = Number(onlyDigits);\n    if (Number.isNaN(num)) return '';\n    return num.toLocaleString();\n  };\n\n  /** Parse a user input string into an integer (commas and non-digits ignored). */\n  const parse = (input: string): number => {\n    const onlyDigits = String(input ?? '').replace(/[^\\d-]/g, '');\n    if (onlyDigits === '' || onlyDigits === '-') return 0;\n    const n = parseInt(onlyDigits, 10);\n    return Number.isNaN(n) ? 0 : n;\n  };\n\n  return { format, parse };\n}\n"],"names":["useCalendar","options","arguments","length","undefined","value","onChange","closeOnSelect","open","setOpen","useState","month","setMonth","Date","containerRef","useRef","useEffect","parts","split","map","x","parseInt","y","m","Number","isFinite","ONE","onDoc","e","el","current","contains","target","document","addEventListener","removeEventListener","pad2","n","String","padStart","prevMonth","d","getFullYear","getMonth","nextMonth","pickDate","day","v","concat","getCalendarGrid","startDay","getDay","days","getDate","cells","i","push","rows","slice","ConfirmDialog_1","_compiledBlock","_props","_jsx","className","children","_jsxs","v0","v1","onClick","v2","v3","v4","v5","name","portals","_ref","title","message","confirmText","cancelText","onConfirm","onCancel","useClientWorkplaces","clients","useApp","getClientWorkplaces","clientId","trim","parsed","id","client","find","c","Array","isArray","workplaces","StatsCards_1","v6","v7","filteredWorkItems","format","getLaborCost","total","completed","filter","status","inProgress","totalAmount","reduce","sum","item","priceRaw","defaultPrice","qtyRaw","quantity","WrenchScrewdriverIcon","CheckCircleIcon","ExclamationTriangleIcon","CurrencyDollarIcon","isPositiveNumber","isFiniteNumber","FilterBar_1","disabled","v8","v9","v10","v11","v12","selectedClient","selectedProject","filteredCount","totalCount","selectionCount","bulkStatus","statuses","getClientProjects","onChangeClient","onChangeProject","onResetFilters","onBulkStatusChange","onApplyBulkStatus","onCreateBulkInvoice","onBulkDelete","hasClient","hasProject","hasFilter","hasSelection","project","_Fragment","s","WorkItemsTable_1","type","checked","items","selection","getCategoryColor","onEdit","onDelete","onCreateInvoice","toggleAll","selected","idx","includes","toggleOne","clientName","description","workplaceName","projectName","category","price","qty","laborCost","line","unit","date","Tooltip","label","ItemFormModal","_newItem$date","_newItem$clientId","_newItem$category","_newItem$date2","_newItem$name","_newItem$description","_newItem$quantity","_newItem$unit","_newItem$laborPersons","_newItem$notes","editingItem","newItem","units","categories","onChangeField","onSubmit","useNumberFormat","cal","calRef","required","_newItem$clientId2","_newItem$workplaceId","workplaceId","wp","address","_newItem$projectName","_newItem$projectName2","projects","proj","placeholder","cat","ref","inputMode","onFocus","style","transform","transformOrigin","row","i2","clickable","isNaN","dayColor","select","u","val","num","pRaw","qRaw","pNum","qNum","p","q","laborPersons","laborUnitRate","_newItem$laborPersons2","_newItem$laborUnitRat","persons","rate","r","notes","active","classes","_newItem$laborPersons3","_newItem$laborUnitRat2","laborRate","lp","lr","form","BulkFormModal","_bulkBaseInfo$date","_bulkBaseInfo$clientI","_bulkBaseInfo$date2","_bulkBaseInfo$bulkLab","bulkItems","bulkBaseInfo","showBulkCustomProject","onBaseInfoChangeField","onItemChange","onAddItem","onRemoveItem","workItems","cid","fromWorkItems","clientProjects","clientWorkplaces","fromClientProjects","fromWorkplaces","from","Set","getAllProjects","sort","useProjects","_bulkBaseInfo$clientI2","_bulkBaseInfo$workpla","workplace","_bulkBaseInfo$clientI3","bulkLaborPersons","bulkLaborUnitRate","index","_item$name","_item$category","_item$description","_item$quantity","_item$unit","_item$notes","WorkItems_1","STATUSES","setClients","setWorkItems","invoices","setInvoices","parse","setSelectedClient","setSelectedProject","setBulkStatus","showConfirmBulkDelete","setShowConfirmBulkDelete","pendingDeleteId","setPendingDeleteId","showItemModal","setShowItemModal","setEditingItem","showBulkModal","setShowBulkModal","setShowBulkCustomProject","setBulkItems","setBulkBaseInfo","toISOString","defaultNewItem","laborPersonsGeneral","laborUnitRateGeneral","setNewItem","fileInputRef","useMemo","visibleIds","useSelection","_item$laborPersons","_item$laborUnitRate","_item$laborPersonsGen","_item$laborUnitRateGe","skilledPersons","skilledRate","generalPersons","generalRate","toInvoiceItem","wi","_wi$laborPersons","_wi$laborUnitRate","_wi$laborPersonsGener","_wi$laborUnitRateGene","_wi$notes","_wi$date","_wi$category","_wi$description","_wi$laborPersons2","_wi$laborUnitRate2","_wi$laborPersonsGener2","_wi$laborUnitRateGene2","unitPrice","lpg","lrg","totalLaborCost","createTemplate","_fileInputRef$current","click","handleExport","exportToExcel","async","files","file","previousWorkItems","imported","importFromExcel","currentMax","Math","max","_Number3","notFoundClients","notFoundWorkplaces","missingWorkplaces","remapped","it","_it$clientName2","_it$workplaceName","_it$projectName","_it$name2","_it$category","_it$unit","_it$description","_it$notes","_ref2","_it$date","_it$laborPersons","_it$laborUnitRate","_it$laborPersonsGener","_it$laborUnitRateGene","matchedClient","_it$clientName","_it$name","matchedWorkplaceId","_matchedClient$workpl","MAX_ERROR_DISPLAY_COUNT","errors","uniqueNames","join","uniqueWorkplaces","alert","prev","supabase","getCurrentUserId","userId","toIntOrNull","toDbStatus","_statusMap$status7","dbWorkItems","_item$clientName","_item$workplaceName","_item$projectName3","_item$description4","_item$category4","_toIntOrNull17","_item$unit4","_toIntOrNull18","_item$date2","_item$notes3","_toIntOrNull19","_toIntOrNull20","_toIntOrNull21","_toIntOrNull22","user_id","client_id","client_name","workplace_id","workplace_name","project_name","default_price","start_date","labor_persons","labor_unit_rate","labor_persons_general","labor_unit_rate_general","data","insertedData","error","insertError","insert","console","details","hint","code","데이터개수","첫번째항목","actualCreatedItems","w","_w$client_name","_w$workplace_name","_w$project_name","_w$category","_w$default_price","_w$quantity","_w$unit","_w$description","_w$start_date","_w$notes","_w$labor_persons","_w$labor_unit_rate","_w$labor_persons_gene","_w$labor_unit_rate_ge","rawWorkplaceId","work_item_id","dbStatus","_statusMap$dbStatus","fromDbStatus","some","created","err","accept","display","StatsCards","FilterBar","_client$projects","_client$workplaces","_item$projectName","_wp$description","desc","_objectSpread","_statusMap$status6","update","in","handleCreateBulkInvoice","_client$workplaces3","_first$clientName","_first$projectName","_workplace$address2","selectedItems","first","newInvoiceId","dueDateTime","now","DAYS_UNTIL_DUE","newInvoice","workplaceAddress","amount","dueDate","clear","handleBulkDelete","WorkItemsTable","_colors$category","_client$workplaces2","_workItem$clientName","_workItem$projectName","_workplace$address","workItem","unbilledItems","previousInvoices","tempInvoice","_workItem$projectName2","_statusMap$status","invoiceData","invoiceError","invoice_number","due_date","single","dbInvoiceItems","invoice_id","unit_price","sort_order","itemsError","inv","digits","replace","parsedValue","preventDefault","selectedClientData","selectedWorkplace","_selectedClientData$n2","_selectedWorkplace$na2","updated","_updated$projectName","_updated$description","_updated$category","_toIntOrNull7","_updated$unit","_toIntOrNull8","_updated$date","_updated$notes","_toIntOrNull9","_toIntOrNull0","_toIntOrNull1","_toIntOrNull10","_statusMap$status4","eq","_selectedClientData$n3","_selectedWorkplace$na3","previousClients","nextId","_Number2","_c$projects2","_created$projectName","_created$description","_created$category","_toIntOrNull11","_created$unit","_toIntOrNull12","_created$date","_created$notes","_toIntOrNull13","_toIntOrNull14","_toIntOrNull15","_toIntOrNull16","_statusMap$status5","clientIdValue","workplaceIdValue","next","_wp$description2","hasProjectName","hasDescription","onBulkItemChange","field","existingItem","onBulkAddItem","_","_parseInt","_parseInt2","hasClientId","hasWorkplaceId","forEach","currentMaxId","_Number","bulkLP","bulkLR","createdItems","_selectedClientData$n","_selectedWorkplace$na","_item$category2","_item$unit2","_item$description2","_item$laborPersons2","_item$laborUnitRate2","_c$projects","_statusMap$status2","_item$projectName2","_item$description3","_item$category3","_toIntOrNull","_item$unit3","_toIntOrNull2","_item$date","_item$notes2","_toIntOrNull3","_toIntOrNull4","_toIntOrNull5","_toIntOrNull6","_statusMap$status3","company_name","ConfirmDialog","count","delete","WorkItemsPage","WorkItems","allIds","setSelected","every","allSelected","onlyDigits","toLocaleString","input"],"sourceRoot":""}