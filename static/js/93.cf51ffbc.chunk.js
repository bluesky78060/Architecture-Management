"use strict";(self.webpackChunkconstruction_management_frontend=self.webpackChunkconstruction_management_frontend||[]).push([[93],{7093:(e,a,r)=>{r.r(a),r.d(a,{default:()=>h});var t=r(6601),s=r(9198),d=r(109),l=r(8458),n=r(3515),o=r(5345),i=r(1182),c=r(7542),m=r(1415),x=r(2930),u=r(6696),g=r(5582);const b=(0,t.FZ)(e=>(0,g.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"\uc124\uc815"}),(0,g.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"\uacc4\uc815 \uc815\ubcf4\ub97c \uad00\ub9ac\ud558\uc138\uc694"})]}),(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[(0,g.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[e.v0,"\ud604\uc7ac \ub85c\uadf8\uc778 \uc815\ubcf4"]}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300 w-32",children:"\ub85c\uadf8\uc778 \ubc29\uc2dd:"}),(0,g.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:e.v1})]}),(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300 w-32",children:"\uc774\ub984:"}),(0,g.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:e.v2})]}),(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300 w-32",children:"\uc774\uba54\uc77c:"}),(0,g.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:e.v3})]}),e.v4]})]}),(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,g.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[e.v5,"\uc774\ub984 \ubcc0\uacbd"]}),(0,g.jsxs)("form",{onSubmit:e.v6,className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"newName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc0c8 \uc774\ub984"}),(0,g.jsx)("input",{id:"newName",type:"text",value:e.v7,onChange:e.v8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"\uc0c8 \uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),e.v9,e.v10,(0,g.jsx)("button",{type:"submit",disabled:e.v11,className:"w-full bg-blue-600 text-white py-2.5 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.v12})]})]}),e.v13,e.v14,(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,g.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[e.v15,"\ub85c\uadf8\uc544\uc6c3"]}),(0,g.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"\ubaa8\ub4e0 \uae30\uae30\uc5d0\uc11c \ub85c\uadf8\uc544\uc6c3\ub429\ub2c8\ub2e4."}),(0,g.jsx)("button",{type:"button",onClick:e.v16,className:"w-full bg-red-600 text-white py-2.5 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors",children:"\ub85c\uadf8\uc544\uc6c3"})]})]})]}),{name:"Settings_1",portals:["v0","v1","v2","v3","v4","v5","v9","v10","v12","v13","v14","v15"]}),h=()=>{const e=(0,d.Zp)(),{currentUser:a,logout:r}=(0,u.Jd)(),[t,h]=(0,s.useState)(""),[v,p]=(0,s.useState)(""),[y,k]=(0,s.useState)(null),[f,j]=(0,s.useState)(""),[N,w]=(0,s.useState)(!1),[S,_]=(0,s.useState)(""),[A,D]=(0,s.useState)(""),[U,E]=(0,s.useState)(""),[C,G]=(0,s.useState)(!1),[B,F]=(0,s.useState)(""),[P,M]=(0,s.useState)(""),[T,Z]=(0,s.useState)(""),[J,K]=(0,s.useState)(""),[q,z]=(0,s.useState)(!1),[H,I]=(0,s.useState)(""),[L,O]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{if(null!==a&&void 0!==a&&(h(null!==a.username&&void 0!==a.username?a.username:""),p(null!==a.name&&void 0!==a.name?a.name:""),j(null!==a.name&&void 0!==a.name?a.name:""),E(null!==a.username&&void 0!==a.username?a.username:"")),null!==x.supabase)try{const{data:{user:a}}=await x.supabase.auth.getUser();if(null!==a&&void 0!==a){console.log("\ud83d\udd0d DEBUG: user.identities:",a.identities),console.log("\ud83d\udd0d DEBUG: user.app_metadata:",a.app_metadata);let r="email";if(a.identities&&a.identities.length>0){const e=[...a.identities].sort((e,a)=>{var r,t,s,d;const l=new Date(null!==(r=null!==(t=e.last_sign_in_at)&&void 0!==t?t:e.created_at)&&void 0!==r?r:0).getTime();return new Date(null!==(s=null!==(d=a.last_sign_in_at)&&void 0!==d?d:a.created_at)&&void 0!==s?s:0).getTime()-l})[0];console.log("\ud83d\udd0d DEBUG: Most recent identity:",e),console.log("\ud83d\udd0d DEBUG: Most recent provider:",e.provider);const t=e.provider;r="google"===t?"google":"kakao"===t?"kakao":"email"}else{var e;const t=null===(e=a.app_metadata)||void 0===e?void 0:e.provider;console.log("\ud83d\udd0d DEBUG: fallback to app_metadata.provider:",t),r="google"===t?"google":"kakao"===t?"kakao":"email"}console.log("\u2705 DEBUG: Final detectedProvider:",r),k(r)}}catch(r){k("email")}})()},[a]);const Q=e=>"google"===e?"Google \ub85c\uadf8\uc778":"kakao"===e?"Kakao \ub85c\uadf8\uc778":"email"===e?"\uc774\uba54\uc77c \ub85c\uadf8\uc778":"\uc54c \uc218 \uc5c6\uc74c",R="google"===y||"kakao"===y;return(0,g.jsx)(b,{v0:(0,g.jsx)(c.A,{className:"w-6 h-6 mr-2 text-blue-600 dark:text-blue-400"}),v1:Q(y),v2:""!==v&&null!==v?v:"(\uc5c6\uc74c)",v3:t,v4:R&&(0,g.jsx)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:(0,g.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["SNS \ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790\ub294 ",Q(y)," \uacc4\uc815\uc5d0\uc11c \uc815\ubcf4\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4."]})}),v5:(0,g.jsx)(c.A,{className:"w-6 h-6 mr-2 text-blue-600 dark:text-blue-400"}),v6:async e=>{if(e.preventDefault(),null!==x.supabase&&void 0!==x.supabase){if(w(!0),D(""),_(""),""===f.trim())return D("\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."),void w(!1);try{const{error:e}=await x.supabase.auth.updateUser({data:{name:f}});null!==e&&void 0!==e?D(e.message):(_("\uc774\ub984\uc774 \uc131\uacf5\uc801\uc73c\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),p(f))}catch(a){D("\uc774\ub984 \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{w(!1)}}},v7:f,v8:e=>j(e.target.value),v9:""!==A&&(0,g.jsxs)("div",{className:"flex items-center p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[(0,g.jsx)(m.A,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),(0,g.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:A})]}),v10:""!==S&&(0,g.jsxs)("div",{className:"flex items-center p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:[(0,g.jsx)(n.A,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),(0,g.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm",children:S})]}),v11:N,v12:N?"\ubcc0\uacbd \uc911...":"\uc774\ub984 \ubcc0\uacbd",v13:!R&&(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,g.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[(0,g.jsx)(o.A,{className:"w-6 h-6 mr-2 text-blue-600 dark:text-blue-400"}),"\uc774\uba54\uc77c \ubcc0\uacbd"]}),(0,g.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==x.supabase&&void 0!==x.supabase){if(G(!0),M(""),F(""),""===U.trim()||!U.includes("@"))return M("\uc720\ud6a8\ud55c \uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."),void G(!1);if(U===t)return M("\ud604\uc7ac \uc774\uba54\uc77c\uacfc \ub3d9\uc77c\ud569\ub2c8\ub2e4."),void G(!1);try{const{error:e}=await x.supabase.auth.updateUser({email:U});null!==e&&void 0!==e?M(e.message):F("\uc774\uba54\uc77c \ubcc0\uacbd \ud655\uc778 \uba54\uc77c\uc774 \ubc1c\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc0c8 \uc774\uba54\uc77c\uc5d0\uc11c \ud655\uc778\ud574\uc8fc\uc138\uc694.")}catch(a){M("\uc774\uba54\uc77c \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{G(!1)}}},className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"newEmail",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc0c8 \uc774\uba54\uc77c"}),(0,g.jsx)("input",{id:"newEmail",type:"email",value:U,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"\uc0c8 \uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),""!==P&&(0,g.jsxs)("div",{className:"flex items-center p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[(0,g.jsx)(m.A,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),(0,g.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:P})]}),""!==B&&(0,g.jsxs)("div",{className:"flex items-center p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:[(0,g.jsx)(n.A,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),(0,g.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm",children:B})]}),(0,g.jsx)("button",{type:"submit",disabled:C,className:"w-full bg-blue-600 text-white py-2.5 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:C?"\ubcc0\uacbd \uc911...":"\uc774\uba54\uc77c \ubcc0\uacbd"}),(0,g.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"* \uc774\uba54\uc77c \ubcc0\uacbd \uc2dc \uc0c8 \uc774\uba54\uc77c\ub85c \ud655\uc778 \uba54\uc77c\uc774 \ubc1c\uc1a1\ub429\ub2c8\ub2e4."})]})]}),v14:!R&&(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,g.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[(0,g.jsx)(i.A,{className:"w-6 h-6 mr-2 text-blue-600 dark:text-blue-400"}),"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"]}),(0,g.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==x.supabase&&void 0!==x.supabase){if(z(!0),O(""),I(""),T.length<6)return O("\uc0c8 \ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."),void z(!1);if(T!==J)return O("\uc0c8 \ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),void z(!1);try{const{error:e}=await x.supabase.auth.updateUser({password:T});null!==e&&void 0!==e?O(e.message):(I("\ube44\ubc00\ubc88\ud638\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Z(""),K(""))}catch(a){O("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{z(!1)}}},className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc0c8 \ube44\ubc00\ubc88\ud638"}),(0,g.jsx)("input",{id:"newPassword",type:"password",value:T,onChange:e=>Z(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638 (\ucd5c\uc18c 6\uc790)"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uc0c8 \ube44\ubc00\ubc88\ud638 \ud655\uc778"}),(0,g.jsx)("input",{id:"confirmPassword",type:"password",value:J,onChange:e=>K(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638 \ud655\uc778"})]}),""!==L&&(0,g.jsxs)("div",{className:"flex items-center p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[(0,g.jsx)(m.A,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),(0,g.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:L})]}),""!==H&&(0,g.jsxs)("div",{className:"flex items-center p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:[(0,g.jsx)(n.A,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),(0,g.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm",children:H})]}),(0,g.jsx)("button",{type:"submit",disabled:q,className:"w-full bg-blue-600 text-white py-2.5 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:q?"\ubcc0\uacbd \uc911...":"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"})]})]}),v15:(0,g.jsx)(l.A,{className:"w-6 h-6 mr-2 text-red-600 dark:text-red-400"}),v16:async()=>{window.confirm("\ub85c\uadf8\uc544\uc6c3 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(r(),e("/"))}})}}}]);
//# sourceMappingURL=93.cf51ffbc.chunk.js.map