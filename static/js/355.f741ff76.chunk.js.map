{"version":3,"file":"static/js/355.f741ff76.chunk.js","mappings":"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","sources":["hooks/useCalendar.ts","components/ConfirmDialog.tsx","hooks/useClientWorkplaces.ts","components/work-items/StatsCards.tsx","utils/guards.ts","components/work-items/FilterBar.tsx","components/work-items/WorkItemsTable.tsx","components/work-items/ItemFormModal.tsx","components/work-items/BulkFormModal.tsx","hooks/useProjects.ts","components/WorkItems.tsx","pages/WorkItemsPage.tsx","hooks/useSelection.ts","hooks/useNumberFormat.ts"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\nexport type UseCalendarOptions = {\n  value?: string | null;\n  onChange?: (date: string) => void;\n  closeOnSelect?: boolean;\n};\n\nexport function useCalendar(options: UseCalendarOptions = {}) {\n  const { value, onChange, closeOnSelect = true } = options;\n  const [open, setOpen] = useState(false);\n  const [month, setMonth] = useState<Date>(() => new Date());\n  const containerRef = useRef<HTMLDivElement | null>(null);\n\n  // Sync month with external value\n  useEffect(() => {\n    if (value == null || value === '') return;\n    const parts = value.split('-').map((x) => parseInt(x, 10));\n    const y = parts[0];\n    const m = parts[1];\n    if (Number.isFinite(y) && Number.isFinite(m)) {\n      const ONE = 1; // eslint-disable-line no-magic-numbers\n      setMonth(new Date(y, m - ONE, ONE));\n    }\n  }, [value]);\n\n  // Close when clicking outside\n  useEffect(() => {\n    const onDoc = (e: MouseEvent) => {\n      const el = containerRef.current;\n      if (el !== null && !el.contains(e.target as Node)) setOpen(false);\n    };\n    document.addEventListener('mousedown', onDoc);\n    return () => document.removeEventListener('mousedown', onDoc);\n  }, []);\n\n  const pad2 = (n: number) => {\n    const WIDTH = 2; // eslint-disable-line no-magic-numbers\n    return String(n).padStart(WIDTH, '0');\n  };\n  const prevMonth = () => setMonth((d) => new Date(d.getFullYear(), d.getMonth() - 1, 1));\n  const nextMonth = () => setMonth((d) => new Date(d.getFullYear(), d.getMonth() + 1, 1));\n  const pickDate = (day: number | null) => {\n    if (day == null || !Number.isFinite(day) || day <= 0) return;\n    const y = month.getFullYear();\n    const m = month.getMonth() + 1;\n    const v = `${y}-${pad2(m)}-${pad2(day)}`;\n    onChange?.(v);\n    if (closeOnSelect) setOpen(false);\n  };\n\n  // Calendar grid (weeks x days)\n  const getCalendarGrid = () => {\n    const first = new Date(month.getFullYear(), month.getMonth(), 1);\n    const startDay = first.getDay();\n    const days = new Date(month.getFullYear(), month.getMonth() + 1, 0).getDate();\n    const cells: Array<number | null> = [];\n    for (let i = 0; i < startDay; i++) cells.push(null);\n    for (let d = 1; d <= days; d++) cells.push(d);\n    const rows: Array<Array<number | null>> = [];\n    const DAYS_IN_WEEK = 7; // eslint-disable-line no-magic-numbers\n    for (let i = 0; i < cells.length; i += DAYS_IN_WEEK) rows.push(cells.slice(i, i + DAYS_IN_WEEK));\n    return rows;\n  };\n\n  return {\n    open,\n    setOpen,\n    month,\n    setMonth,\n    prevMonth,\n    nextMonth,\n    pickDate,\n    getCalendarGrid,\n    containerRef,\n  };\n}\n","import { compiledBlock as _compiledBlock } from \"million/react\";\nimport { block as _block } from \"million/react\";\nimport React from 'react';\ntype Props = {\n  open: boolean;\n  title: string;\n  message: string | React.ReactNode;\n  confirmText?: string;\n  cancelText?: string;\n  onConfirm: () => void;\n  onCancel: () => void;\n};\nconst ConfirmDialog_1 = _compiledBlock(_props => <div className=\"fixed inset-0 bg-black bg-opacity-30 dark:bg-black dark:bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2\">{_props.v0}</h3>\n        <div className=\"text-sm text-gray-600 dark:text-gray-300 mb-4\">{_props.v1}</div>\n        <div className=\"flex justify-end space-x-2\">\n          <button onClick={_props.v2} className=\"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100\">{_props.v3}</button>\n          <button onClick={_props.v4} className=\"px-4 py-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded\">{_props.v5}</button>\n        </div>\n      </div>\n    </div>, {\n  name: \"ConfirmDialog_1\",\n  portals: [\"v0\", \"v1\", \"v3\", \"v5\"]\n});\nconst ConfirmDialog: React.FC<Props> = ({\n  open,\n  title,\n  message,\n  confirmText = '',\n  cancelText = '',\n  onConfirm,\n  onCancel\n}) => {\n  if (!open) return null;\n  return /*@million jsx-skip*/<ConfirmDialog_1 v0={title} v1={message} v2={onCancel} v3={cancelText} v4={onConfirm} v5={confirmText} />;\n};\nexport default ConfirmDialog;","import { useApp } from '../contexts/AppContext';\nimport type { Client, Workplace } from '../types/domain';\n\nexport function useClientWorkplaces() {\n  const { clients } = useApp();\n\n  const getClientWorkplaces = (clientId?: number | string): Workplace[] => {\n    if (clientId == null || (typeof clientId === 'string' && clientId.trim() === '')) return [];\n    const parsed = typeof clientId === 'string' ? parseInt(clientId, 10) : clientId;\n    const id = Number.isFinite(parsed) ? parsed : null;\n    if (id === null) return [];\n    const client = (clients as Client[]).find(c => c.id === id);\n    const workplaces: Workplace[] = (client !== undefined && Array.isArray(client.workplaces)) ? client.workplaces : [];\n    return workplaces;\n  };\n\n  return { getClientWorkplaces };\n}\n","import { compiledBlock as _compiledBlock } from \"million/react\";\nconst StatsCards_1 = _compiledBlock(_props => <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-4\">\n      <div className=\"bg-blue-100 dark:bg-blue-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <p className=\"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2\">  </p>\n            <p className=\"text-base font-bold text-gray-900 dark:text-gray-100\">{_props.v0}</p>\n          </div>\n          <div className=\"bg-blue-500 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12\">\n            {_props.v1}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-green-100 dark:bg-green-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <p className=\"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2\"> </p>\n            <p className=\"text-base font-bold text-gray-900 dark:text-gray-100\">{_props.v2}</p>\n          </div>\n          <div className=\"bg-green-500 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12\">\n            {_props.v3}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-purple-100 dark:bg-purple-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <p className=\"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2\">  </p>\n            <p className=\"text-base font-bold text-gray-900 dark:text-gray-100\">{_props.v4}</p>\n          </div>\n          <div className=\"bg-purple-500 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12\">\n            {_props.v5}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-orange-100 dark:bg-orange-900/30 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <p className=\"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2\">  </p>\n            <p className=\"text-base font-bold text-gray-900 dark:text-gray-100\">{_props.v6}</p>\n          </div>\n          <div className=\"bg-orange-500 rounded-full p-3 text-white text-xl ml-4 flex items-center justify-center w-12 h-12\">\n            {_props.v7}\n          </div>\n        </div>\n      </div>\n    </div>, {\n  name: \"StatsCards_1\",\n  portals: [\"v0\", \"v1\", \"v2\", \"v3\", \"v4\", \"v5\", \"v6\", \"v7\"]\n});\nconst StatsCards = function StatsCards({\n  filteredWorkItems,\n  format,\n  getLaborCost\n}: Props) {\n  const total = filteredWorkItems.length;\n  const completed = filteredWorkItems.filter(i => i.status === '').length;\n  const inProgress = filteredWorkItems.filter(i => i.status === '').length;\n  const totalAmount = filteredWorkItems.reduce((sum, item) => {\n    const priceRaw = Number(item.defaultPrice);\n    const qtyRaw = Number(item.quantity);\n    const price = Number.isFinite(priceRaw) ? priceRaw : 0;\n    const qty = Number.isFinite(qtyRaw) ? qtyRaw : 1;\n    return sum + price * qty + getLaborCost(item);\n  }, 0);\n  return /*@million jsx-skip*/<StatsCards_1 v0={total} v1={<WrenchScrewdriverIcon className=\"h-6 w-6\" aria-hidden=\"true\" />} v2={completed} v3={<CheckCircleIcon className=\"h-6 w-6\" aria-hidden=\"true\" />} v4={inProgress} v5={<ExclamationTriangleIcon className=\"h-6 w-6\" aria-hidden=\"true\" />} v6={format(totalAmount)} v7={<CurrencyDollarIcon className=\"h-6 w-6\" aria-hidden=\"true\" />} />;\n};\nimport { block as _block } from \"million/react\";\nimport { WrenchScrewdriverIcon, CheckCircleIcon, ExclamationTriangleIcon, CurrencyDollarIcon } from '@heroicons/react/24/outline';\nimport type { WorkItem } from '../../types/domain';\ntype Props = {\n  filteredWorkItems: WorkItem[];\n  format: (n: number) => string;\n  getLaborCost: (item: WorkItem) => number;\n};\nexport default StatsCards;","export const hasValue = <T>(v: T | null | undefined): v is T => v !== null && v !== undefined;\n\nexport const isNonEmptyString = (v: unknown): v is string => typeof v === 'string' && v.trim() !== '';\n\nexport const isFiniteNumber = (v: unknown): v is number => typeof v === 'number' && Number.isFinite(v);\n\nexport const isPositiveNumber = (v: unknown): v is number => isFiniteNumber(v) && v > 0;\n\n","import { compiledBlock as _compiledBlock } from \"million/react\";\nconst FilterBar_1 = _compiledBlock(_props => <div className=\"bg-white dark:bg-gray-800 rounded-md shadow-sm p-2 mb-4\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-3 flex-wrap\">\n          <span className=\"text-xs font-medium text-gray-500 dark:text-gray-400\">:</span>\n          <div className=\"relative inline-flex items-center\">\n            <select value={_props.v0} onChange={_props.v1} className=\"border border-gray-300 dark:border-gray-600 rounded-md px-3 pr-8 py-1.5 bg-white dark:bg-gray-700 text-xs text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-indigo-500 appearance-none cursor-pointer min-w-0\">\n              <option value=\"\"> </option>\n              {_props.v2}\n            </select>\n          </div>\n          <div className=\"relative inline-flex items-center\">\n            <select value={_props.v3} onChange={_props.v4} className={_props.v5} disabled={_props.v6}>\n              <option value=\"\">{_props.v7}</option>\n              {_props.v8}\n            </select>\n          </div>\n          <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n            {_props.v9}\n          </span>\n          {_props.v10}\n          {_props.v11}\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          {_props.v12}\n        </div>\n      </div>\n    </div>, {\n  name: \"FilterBar_1\",\n  portals: [\"v2\", \"v7\", \"v8\", \"v9\", \"v10\", \"v11\", \"v12\"]\n});\nconst FilterBar = function FilterBar({\n  clients,\n  selectedClient,\n  selectedProject,\n  filteredCount,\n  totalCount,\n  selectionCount,\n  bulkStatus,\n  statuses,\n  getClientProjects,\n  onChangeClient,\n  onChangeProject,\n  onResetFilters,\n  onBulkStatusChange,\n  onApplyBulkStatus,\n  onCreateBulkInvoice,\n  onBulkDelete\n}: Props) {\n  const hasClient = String(selectedClient ?? '') !== '';\n  const hasProject = (selectedProject ?? '').trim() !== '';\n  const hasFilter = hasClient || hasProject;\n  const hasSelection = isPositiveNumber(selectionCount);\n  return /*@million jsx-skip*/<FilterBar_1 v0={selectedClient == null ? '' : String(selectedClient)} v1={e => onChangeClient(e.target.value)} v2={clients.map(client => <option key={client.id} value={String(client.id)}>{client.name}</option>)} v3={selectedProject} v4={e => onChangeProject(e.target.value)} v5={`border border-gray-300 dark:border-gray-600 rounded-md px-3 pr-8 py-1.5 bg-white dark:bg-gray-700 text-xs hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-indigo-500 appearance-none cursor-pointer min-w-0 ${!hasClient ? 'text-gray-400 cursor-not-allowed' : 'text-gray-700 dark:text-gray-300'}`} v6={!hasClient} v7={hasClient ? ' ' : '  '} v8={hasClient && getClientProjects(selectedClient).map(project => <option key={project} value={project}>{project}</option>)} v9={hasFilter ? `${filteredCount}` : ` ${totalCount}`} v10={hasSelection && <span className=\"ml-2 inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-700\">\n               {selectionCount}\n            </span>} v11={hasFilter && <button onClick={onResetFilters} className=\"text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 underline\">\n              \n            </button>} v12={hasSelection && <>\n              <div className=\"flex items-center space-x-2 mr-2\">\n                <label className=\"text-xs text-gray-600 dark:text-gray-300\">  </label>\n                <select value={bulkStatus} onChange={e => onBulkStatusChange(e.target.value)} className=\"border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1 text-xs bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500\">\n                  <option value=\"\"> </option>\n                  {statuses.map(s => <option key={s} value={s}>{s}</option>)}\n                </select>\n                <button onClick={onApplyBulkStatus} className=\"bg-purple-600 hover:bg-purple-700 text-white font-medium py-1 px-2 rounded flex items-center text-xs leading-none\">\n                  \n                </button>\n              </div>\n              <button onClick={onCreateBulkInvoice} className=\"flex items-center justify-center px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm hover:shadow-md transition-shadow duration-300 text-gray-700 dark:text-gray-300 text-xs leading-none\">\n                <span className=\"text-green-600 mr-1.5\"></span>\n                <span className=\"font-semibold\">  ({selectionCount})</span>\n              </button>\n              <button onClick={onBulkDelete} className=\"flex items-center justify-center px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm hover:shadow-md transition-shadow duration-300 text-gray-700 dark:text-gray-300 text-xs leading-none\">\n                <span className=\"text-red-600 mr-1.5\"></span>\n                <span className=\"font-semibold\"> ({selectionCount})</span>\n              </button>\n            </>} />;\n};\nimport { block as _block } from \"million/react\";\nimport type { Client } from '../../types/domain';\nimport { isPositiveNumber } from '../../utils/guards';\ntype Props = {\n  clients: Client[];\n  selectedClient: string | number;\n  selectedProject: string;\n  filteredCount: number;\n  totalCount: number;\n  selectionCount: number;\n  bulkStatus: string;\n  statuses: string[];\n  getClientProjects: (clientId?: number | string) => string[];\n  onChangeClient: (val: string) => void;\n  onChangeProject: (val: string) => void;\n  onResetFilters: () => void;\n  onBulkStatusChange: (val: string) => void;\n  onApplyBulkStatus: () => void;\n  onCreateBulkInvoice: () => void;\n  onBulkDelete: () => void;\n};\nexport default FilterBar;","import { compiledBlock as _compiledBlock } from \"million/react\";\nconst WorkItemsTable_1 = _compiledBlock(_props => <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden\">\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n          <thead className=\"bg-gray-50 dark:bg-gray-700\">\n            <tr>\n              <th className=\"px-3 py-3 text-center text-sm font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12\">\n                <input id=\"workitem-select-all\" name=\"workitem-select-all\" type=\"checkbox\" onChange={_props.v0} checked={_props.v1} className=\"w-4 h-4 rounded border-gray-300\" title=\" \" />\n              </th>\n              <th className=\"px-2 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-24\">\n                  \n              </th>\n              <th className=\"px-2 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-52\">\n                &nbsp;&nbsp;&nbsp;&nbsp;\n              </th>\n              <th className=\"px-3 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-24\">\n                  \n              </th>\n              <th className=\"px-3 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-28\">\n                \n              </th>\n              <th className=\"px-3 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-20 whitespace-nowrap\">\n\n              </th>\n              <th className=\"px-3 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-32 whitespace-nowrap\">\n/\n              </th>\n              <th className=\"px-3 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-16\">\n                &nbsp;&nbsp;&nbsp;&nbsp;\n              </th>\n              <th className=\"px-3 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider w-24\">\n                &nbsp;&nbsp;&nbsp;&nbsp;\n              </th>\n              <th className=\"px-3 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider w-20\">\n                &nbsp;&nbsp;&nbsp;&nbsp;\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n            {_props.v2}\n          </tbody>\n        </table>\n      </div>\n    </div>, {\n  name: \"WorkItemsTable_1\",\n  portals: [\"v2\"]\n});\nconst WorkItemsTable = function WorkItemsTable({\n  items,\n  selection,\n  format,\n  getLaborCost,\n  getCategoryColor,\n  onEdit,\n  onDelete,\n  onCreateInvoice\n}: Props) {\n  return /*@million jsx-skip*/<WorkItemsTable_1 v0={e => selection.toggleAll(e.target.checked)} v1={selection.selected.length > 0 && selection.selected.length === items.length} v2={items.map((item, idx) => <tr key={`${item.id}-${idx}`} className=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\n                <td className=\"px-3 py-4 whitespace-nowrap\">\n                  <input id={`workitem-select-${item.id}`} name={`workitem-select-${item.id}`} type=\"checkbox\" checked={selection.selected.includes(item.id)} onChange={e => selection.toggleOne(item.id, e.target.checked)} className=\"w-4 h-4 rounded border-gray-300\" title=\" \" />\n                </td>\n                <td className=\"px-2 py-3 whitespace-nowrap\">\n                  <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100 truncate w-16\">{item.clientName}</div>\n                </td>\n                <td className=\"px-2 py-3 w-52\">\n                  <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100 truncate\">{item.name}</div>\n                  <div className=\"text-xs text-gray-500 dark:text-gray-400 truncate\">{item.description}</div>\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap\">\n                  <div className=\"text-sm text-gray-900 dark:text-gray-100 truncate w-24\">{item.workplaceName}</div>\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap\">\n                  <div className=\"text-sm text-gray-900 dark:text-gray-100 truncate w-28\">{item.projectName}</div>\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap\">\n                  <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getCategoryColor(item.category)}`}>\n                    {item.category}\n                  </span>\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap w-32 text-right\">\n                  {(() => {\n        const priceRaw = Number(item.defaultPrice);\n        const qtyRaw = Number(item.quantity);\n        const price = Number.isFinite(priceRaw) ? priceRaw : 0;\n        const qty = Number.isFinite(qtyRaw) ? qtyRaw : 1;\n        const laborCost = getLaborCost(item);\n        const line = price * qty + laborCost;\n        return <>\n                        <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{format(price)}</div>\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400\"> {qty} {item.unit}</div>\n                        {laborCost > 0 && <div className=\"text-xs text-indigo-600 dark:text-indigo-400\">+  {format(laborCost)}</div>}\n                        <div className=\"text-xs text-gray-700 dark:text-gray-200 font-medium\">{format(line)}</div>\n                      </>;\n      })()}\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap w-16\">\n                  <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${item.status === '' ? 'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400' : item.status === '' ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400' : item.status === '' ? 'bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400' : 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400'}`}>\n                    {item.status}\n                  </span>\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap w-24\">\n                  <div className=\"text-sm text-gray-900 dark:text-gray-100\">{item.date}</div>\n                </td>\n                <td className=\"px-3 py-3 whitespace-nowrap text-sm font-medium w-24\">\n                  <div className=\"flex\">\n                    <Tooltip label=\"\">\n                      <button onClick={() => onEdit(item)} className=\"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mx-2\" title=\"  \"></button>\n                    </Tooltip>\n                    <Tooltip label=\"\">\n                      <button onClick={() => onDelete(item.id)} className=\"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 mx-2\" title=\"  \"></button>\n                    </Tooltip>\n                    {item.status === '' && <Tooltip label=\" \">\n                        <button onClick={() => onCreateInvoice(item)} className=\"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 mx-2\" title=\" \"></button>\n                      </Tooltip>}\n                  </div>\n                </td>\n              </tr>)} />;\n};\nimport { block as _block } from \"million/react\";\nimport Tooltip from '../Tooltip';\nimport type { WorkItem } from '../../types/domain';\nimport type { Id } from '../../hooks/useSelection';\ntype Selection = {\n  selected: Id[];\n  toggleAll: (checked: boolean) => void;\n  toggleOne: (id: Id, checked: boolean) => void;\n};\ntype Props = {\n  items: WorkItem[];\n  selection: Selection;\n  format: (n: number) => string;\n  getLaborCost: (item: WorkItem) => number;\n  getCategoryColor: (category?: string) => string;\n  onEdit: (item: WorkItem) => void;\n  onDelete: (id: Id) => void;\n  onCreateInvoice: (item: WorkItem) => void;\n};\nexport default WorkItemsTable;","import { useRef } from 'react';\nimport type { Client, WorkItem } from '../../types/domain';\nimport { useCalendar } from '../../hooks/useCalendar';\nimport { useNumberFormat } from '../../hooks/useNumberFormat';\nimport { useClientWorkplaces } from '../../hooks/useClientWorkplaces';\ntype Props = {\n  open: boolean;\n  editingItem: WorkItem | null;\n  newItem: WorkItem;\n  clients: Client[];\n  units: string[];\n  categories: string[];\n  statuses: string[];\n  onChangeField: (name: string, value: string) => void;\n  onCancel: () => void;\n  onSubmit: (e: React.FormEvent<HTMLFormElement>) => void;\n};\nexport default function ItemFormModal({\n  open,\n  editingItem,\n  newItem,\n  clients,\n  units,\n  categories,\n  statuses,\n  onChangeField,\n  onCancel,\n  onSubmit\n}: Props) {\n  const {\n    getClientWorkplaces\n  } = useClientWorkplaces();\n  const {\n    format\n  } = useNumberFormat();\n  const cal = useCalendar({\n    value: newItem?.date ?? '',\n    onChange: d => onChangeField('date', d)\n  });\n  const calRef = useRef<HTMLDivElement>(null);\n  if (open !== true) return null;\n  return <div className=\"fixed inset-0 bg-gray-800/50 dark:bg-gray-900/70 backdrop-blur-sm overflow-y-auto h-full w-full z-50\">\n      <div className=\"relative top-8 mx-auto w-[980px] max-w-[95vw] shadow-2xl rounded-2xl bg-white/80 dark:bg-gray-800/90 ring-1 ring-black/5 dark:ring-white/10 mb-8\">\n        <div className=\"rounded-t-2xl bg-gradient-to-br from-indigo-50 via-purple-50 to-white dark:from-indigo-900/30 dark:via-purple-900/30 dark:to-gray-800 px-8 pt-5 pb-3\">\n          <div className=\"text-center\">\n            <h3 className=\"text-2xl font-extrabold tracking-tight text-indigo-600 dark:text-indigo-400\">{editingItem !== null ? '  ' : '   '}</h3>\n            <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">     </p>\n          </div>\n        </div>\n        <div className=\"px-6 pb-6 pt-3\">\n          <form id=\"work-item-form\" onSubmit={onSubmit} className=\"space-y-4\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4\">\n              <div className=\"flex items-center mb-3 gap-3\">\n                <span className=\"inline-flex h-7 w-7 items-center justify-center rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400\"></span>\n                <h4 className=\"text-base font-semibold text-gray-900 dark:text-gray-100\"> </h4>\n              </div>\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-300\"></label>\n                  <select name=\"clientId\" value={String(newItem.clientId ?? '')} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required>\n                    <option value=\"\"> </option>\n                    {clients.map(c => <option key={c.id} value={String(c.id)}>{c.name}</option>)}\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-300\"></label>\n                  {(() => {\n                  const hasClient = String(newItem.clientId ?? '') !== '';\n                  return <select name=\"workplaceId\" value={String(newItem.workplaceId ?? '')} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed\" required disabled={!hasClient}>\n                        <option value=\"\">{hasClient ? ' ' : ' (  )'}</option>\n                        {hasClient && getClientWorkplaces(newItem.clientId).map(wp => <option key={wp.id} value={String(wp.id)}>{wp.name} - {wp.address}</option>)}\n                      </select>;\n                })()}\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 gap-3 mt-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-300\"></label>\n                  {(() => {\n                  const selectedClient = clients.find(c => String(c.id) === String(newItem.clientId));\n                  const projects: string[] = selectedClient !== undefined && Array.isArray(selectedClient.projects) ? selectedClient.projects : [];\n                  const hasProjects = Array.isArray(projects) && projects.length > 0;\n                  return hasProjects ? <select name=\"projectName\" value={newItem.projectName ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required>\n                        <option value=\"\"> </option>\n                        {projects.map(proj => <option key={proj} value={proj}>{proj}</option>)}\n                      </select> : <input type=\"text\" name=\"projectName\" value={newItem.projectName ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} placeholder=\" \" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required />;\n                })()}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-300\"></label>\n                  <select name=\"category\" value={newItem.category ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required>\n                    <option value=\"\"> </option>\n                    {categories.map(cat => <option key={cat} value={cat}>{cat}</option>)}\n                  </select>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4\">\n              <div className=\"flex items-center mb-3 gap-3\">\n                <span className=\"inline-flex h-7 w-7 items-center justify-center rounded-full bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400\"></span>\n                <h4 className=\"text-base font-semibold text-gray-900 dark:text-gray-100\"> </h4>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                <div className=\"mt-1 relative inline-block\" ref={calRef}>\n                  <div className=\"flex items-center gap-2\">\n                    <input type=\"text\" name=\"date\" value={newItem?.date ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} placeholder=\"YYYY-MM-DD\" inputMode=\"numeric\" className=\"block w-full border border-gray-200 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder-gray-400\" onFocus={() => cal.setOpen(true)} required />\n                    <button type=\"button\" className=\"px-2 py-2 text-gray-600 hover:text-gray-800\" onClick={() => cal.setOpen(v => !v)} title=\" \"></button>\n                  </div>\n                  {cal.open && <div className=\"absolute z-50 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg mt-2 p-3\" style={{\n                  transform: 'scale(1)',\n                  transformOrigin: 'top left'\n                }}>\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <button type=\"button\" className=\"px-2 py-1 text-sm border dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\" onClick={cal.prevMonth}></button>\n                        <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{cal.month.getFullYear()} {cal.month.getMonth() + 1}</div>\n                        <button type=\"button\" className=\"px-2 py-1 text-sm border dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\" onClick={cal.nextMonth}></button>\n                      </div>\n                      <table className=\"text-xs select-none\">\n                        <thead>\n                          <tr className=\"text-left text-gray-600 dark:text-gray-400\">{['', '', '', '', '', '', ''].map((d, idx) => {\n                          const SUN = 0; // eslint-disable-line no-magic-numbers\n                          const SAT = 6; // eslint-disable-line no-magic-numbers\n                          return <th key={d} className={`px-2 py-1 ${idx === SUN ? 'text-red-600' : idx === SAT ? 'text-blue-600' : ''}`}>{d}</th>;\n                        })}</tr>\n                        </thead>\n                        <tbody>{cal.getCalendarGrid().map((row, idx) => <tr key={idx} className=\"text-left\">{row.map((d, i2) => {\n                          const clickable = typeof d === 'number' && d !== 0 && !Number.isNaN(d);\n                          const SUN = 0; // eslint-disable-line no-magic-numbers\n                          const SAT = 6; // eslint-disable-line no-magic-numbers\n                          const dayColor = i2 === SUN ? 'text-red-600' : i2 === SAT ? 'text-blue-600' : '';\n                          return <td key={i2} className={`px-2 py-1 ${dayColor} ${clickable ? 'cursor-pointer hover:bg-gray-100 rounded' : ''}`} onClick={() => {\n                            if (clickable) cal.pickDate(d as number);\n                          }}>\n                                {clickable ? d : ''}\n                              </td>;\n                        })}</tr>)}</tbody>\n                      </table>\n                    </div>}\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-3 mt-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                  <input type=\"text\" name=\"name\" value={newItem.name ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"> </label>\n                  <input type=\"text\" name=\"description\" value={newItem.description ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-4 gap-3 mt-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                  <input type=\"text\" name=\"quantity\" value={newItem.quantity ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} onFocus={e => e.target.select()} placeholder=\": 1\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                  <select name=\"unit\" value={newItem.unit ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\">\n                    <option value=\"\"> </option>\n                    {units.map(u => <option key={u} value={u}>{u}</option>)}\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                  <input type=\"text\" name=\"defaultPrice\" value={(() => {\n                  const val = newItem.defaultPrice;\n                  if (val === null || val === undefined) return '';\n                  const num = Number(val);\n                  return Number.isFinite(num) ? format(num) : String(val);\n                })()} onChange={e => onChangeField(e.target.name, e.target.value)} onFocus={e => e.target.select()} placeholder=\": 200,000\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                  <div className=\"mt-1 w-full bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded px-3 py-2 text-sm font-semibold text-green-900 dark:text-green-300\">{(() => {\n                    const pRaw = newItem.defaultPrice;\n                    const qRaw = newItem.quantity;\n                    const pNum = Number(pRaw);\n                    const qNum = Number(qRaw);\n                    const p = Number.isFinite(pNum) ? pNum : 0;\n                    const q = Number.isFinite(qNum) ? qNum : 1;\n                    return `${format(p * q)}`;\n                  })()}</div>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-3 gap-3 mt-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"> </label>\n                  <input type=\"text\" name=\"laborPersons\" value={String(newItem.laborPersons ?? '')} onChange={e => onChangeField(e.target.name, e.target.value)} onFocus={e => e.target.select()} placeholder=\": 3\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"> </label>\n                  <input type=\"text\" name=\"laborUnitRate\" value={typeof newItem.laborUnitRate === 'number' ? format(newItem.laborUnitRate) : ''} onChange={e => onChangeField(e.target.name, e.target.value)} onFocus={e => e.target.select()} placeholder=\": 250,000\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"> </label>\n                  <div className=\"mt-1 w-full bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 rounded px-3 py-2 text-sm font-semibold text-indigo-900 dark:text-indigo-300\">{(() => {\n                    const persons = Number(newItem.laborPersons ?? 0);\n                    const rate = Number(newItem.laborUnitRate ?? 0);\n                    const p = Number.isFinite(persons) ? persons : 0;\n                    const r = Number.isFinite(rate) ? rate : 0;\n                    return `${format(p * r)}`;\n                  })()}</div>\n                </div>\n              </div>\n\n              <div className=\"mt-3\">\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                <input type=\"text\" name=\"notes\" value={newItem.notes ?? ''} onChange={e => onChangeField(e.target.name, e.target.value)} placeholder=\"   \" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n              </div>\n            </div>\n\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4\">\n              <div className=\"flex justify-between items-center\">\n                <div className=\"flex-1\">\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\"></label>\n                  <div className=\"flex flex-wrap gap-1.5\">\n                    {statuses.map(s => {\n                    const active = newItem.status === s;\n                    const classes = active ? 'bg-indigo-600 dark:bg-indigo-500 text-white border-transparent shadow' : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600';\n                    return <button key={s} type=\"button\" onClick={() => onChangeField('status', s)} className={`px-3 py-1.5 rounded-full text-sm transition ${classes}`} aria-pressed={active}>{s}</button>;\n                  })}\n                  </div>\n                </div>\n                <div className=\"ml-4\">\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-right\"> </label>\n                  <div className=\"bg-blue-600 dark:bg-blue-700 text-white rounded-lg px-4 py-2 text-base font-bold shadow-md\">{(() => {\n                    const pRaw = newItem.defaultPrice;\n                    const qRaw = newItem.quantity;\n                    const pNum = Number(pRaw);\n                    const qNum = Number(qRaw);\n                    const p = Number.isFinite(pNum) ? pNum : 0;\n                    const q = Number.isFinite(qNum) ? qNum : 1;\n                    const laborPersons = Number(newItem.laborPersons ?? 0);\n                    const laborRate = Number(newItem.laborUnitRate ?? 0);\n                    const lp = Number.isFinite(laborPersons) ? laborPersons : 0;\n                    const lr = Number.isFinite(laborRate) ? laborRate : 0;\n                    const laborCost = lp * lr;\n                    const total = p * q + laborCost;\n                    return `${format(total)}`;\n                  })()}</div>\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n\n        {/* Sticky   */}\n        <div className=\"sticky bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700 px-6 py-4 rounded-b-2xl shadow-lg\">\n          <div className=\"flex justify-end space-x-3\">\n            <button type=\"button\" onClick={onCancel} className=\"px-6 py-2.5 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition font-medium\">\n              \n            </button>\n            <button type=\"submit\" form=\"work-item-form\" className=\"px-6 py-2.5 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-md transition font-bold\">\n              {editingItem !== null ? '' : ''}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>;\n}","import { useRef } from 'react';\nimport type { Client, WorkItem } from '../../types/domain';\nimport { useCalendar } from '../../hooks/useCalendar';\nimport { useNumberFormat } from '../../hooks/useNumberFormat';\nimport { useClientWorkplaces } from '../../hooks/useClientWorkplaces';\nimport { useProjects } from '../../hooks/useProjects';\ntype BulkItem = Partial<WorkItem> & {\n  status?: string;\n};\ntype Props = {\n  open: boolean;\n  clients: Client[];\n  categories: string[];\n  units: string[];\n  bulkItems: BulkItem[];\n  bulkBaseInfo: {\n    clientId: string | number;\n    workplaceId: string | number;\n    projectName: string;\n    date?: string;\n    bulkLaborPersons?: string | number;\n    bulkLaborUnitRate?: string | number;\n  };\n  showBulkCustomProject: boolean;\n  statuses: string[];\n  onBaseInfoChangeField: (name: string, value: string) => void;\n  onItemChange: (index: number, field: string, value: string) => void;\n  onAddItem: () => void;\n  onRemoveItem: (index: number) => void;\n  onCancel: () => void;\n  onSubmit: (e: React.FormEvent<HTMLFormElement>) => void;\n};\nexport default function BulkFormModal({\n  open,\n  clients,\n  categories,\n  units,\n  bulkItems,\n  bulkBaseInfo,\n  showBulkCustomProject,\n  statuses,\n  onBaseInfoChangeField,\n  onItemChange,\n  onAddItem,\n  onRemoveItem,\n  onCancel,\n  onSubmit\n}: Props) {\n  const {\n    getClientWorkplaces\n  } = useClientWorkplaces();\n  const {\n    getClientProjects\n  } = useProjects();\n  const {\n    format\n  } = useNumberFormat();\n  const cal = useCalendar({\n    value: bulkBaseInfo?.date ?? '',\n    onChange: d => onBaseInfoChangeField('date', d)\n  });\n  const calRef = useRef<HTMLDivElement>(null);\n  if (open !== true) return null;\n  return <div className=\"fixed inset-0 bg-gray-800/50 dark:bg-gray-900/70 backdrop-blur-sm overflow-y-auto h-full w-full z-50\">\n      <div className=\"relative top-6 mx-auto w-[1100px] max-w-[96vw] shadow-2xl rounded-2xl bg-white/80 dark:bg-gray-800/90 ring-1 ring-black/5 dark:ring-white/10 mb-8\">\n        <div className=\"rounded-t-2xl bg-gradient-to-br from-indigo-50 via-purple-50 to-white dark:from-indigo-900/30 dark:via-purple-900/30 dark:to-gray-800 px-8 pt-8 pb-6 text-center\">\n          <h3 className=\"text-2xl font-extrabold tracking-tight text-indigo-600 dark:text-indigo-400\">   </h3>\n          <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">    </p>\n        </div>\n        <div className=\"px-6 pb-6\">\n          <form id=\"bulk-work-item-form\" onSubmit={onSubmit} className=\"space-y-4\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4\">\n              <div className=\"flex items-center mb-3 gap-3\">\n                <span className=\"inline-flex h-7 w-7 items-center justify-center rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400\"></span>\n                <h4 className=\"text-base font-semibold text-gray-900 dark:text-gray-100\"> </h4>\n              </div>\n              <div className=\"grid grid-cols-4 gap-3 mb-3\">\n                <div>\n                  <label htmlFor=\"bulk-client\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                  <select id=\"bulk-client\" name=\"clientId\" autoComplete=\"organization\" value={String(bulkBaseInfo.clientId ?? '')} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required>\n                    <option value=\"\"> </option>\n                    {clients.map(client => <option key={client.id} value={String(client.id)}>{client.name}</option>)}\n                  </select>\n                </div>\n                <div>\n                  <label htmlFor=\"bulk-workplace\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                  {(() => {\n                  const hasClient = String(bulkBaseInfo.clientId ?? '') !== '';\n                  return <select id=\"bulk-workplace\" name=\"workplaceId\" autoComplete=\"off\" value={String(bulkBaseInfo.workplaceId ?? '')} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required disabled={!hasClient}>\n                        <option value=\"\">{hasClient ? ' ' : ' (  )'}</option>\n                        {hasClient && getClientWorkplaces(bulkBaseInfo.clientId).map(workplace => <option key={workplace.id} value={String(workplace.id)}>{workplace.name} - {workplace.address}</option>)}\n                      </select>;\n                })()}\n                </div>\n                <div>\n                  <label htmlFor=\"bulk-project\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                  {showBulkCustomProject !== true ? (() => {\n                  const hasClient = String(bulkBaseInfo.clientId ?? '') !== '';\n                  return <select id=\"bulk-project\" name=\"projectName\" autoComplete=\"off\" value={bulkBaseInfo.projectName} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required disabled={!hasClient}>\n                          <option value=\"\"> </option>\n                          {hasClient && getClientProjects(bulkBaseInfo.clientId).map(project => <option key={project} value={project}>{project}</option>)}\n                          <option value=\"custom\">+   </option>\n                        </select>;\n                })() : <div className=\"flex space-x-2\">\n                      <input id=\"bulk-project-custom\" type=\"text\" name=\"projectName\" autoComplete=\"off\" value={bulkBaseInfo.projectName} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} placeholder=\"  \" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required />\n                      <button type=\"button\" onClick={() => onBaseInfoChangeField('projectName', '')} className=\"mt-1 px-2 py-2 text-gray-400 hover:text-gray-600\" aria-label=\"   \"></button>\n                    </div>}\n                </div>\n                <div>\n                  <label htmlFor=\"bulk-date\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                  <div className=\"mt-1 relative inline-block\" ref={calRef}>\n                    <div className=\"flex items-center gap-2\">\n                      <input id=\"bulk-date\" type=\"text\" name=\"date\" autoComplete=\"off\" value={bulkBaseInfo?.date ?? ''} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} placeholder=\"YYYY-MM-DD\" inputMode=\"numeric\" className=\"block w-full border border-gray-200 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder-gray-400\" onFocus={() => cal.setOpen(true)} required />\n                      <button type=\"button\" className=\"px-2 py-2 text-gray-600 hover:text-gray-800\" onClick={() => cal.setOpen(v => !v)} aria-label=\" \"></button>\n                    </div>\n                    {cal.open && <div className=\"absolute z-50 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg mt-2 p-3\" style={{\n                    transform: 'scale(1)',\n                    transformOrigin: 'top left'\n                  }}>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <button type=\"button\" className=\"px-2 py-1 text-sm border dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\" onClick={cal.prevMonth}></button>\n                          <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{cal.month.getFullYear()} {cal.month.getMonth() + 1}</div>\n                          <button type=\"button\" className=\"px-2 py-1 text-sm border dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\" onClick={cal.nextMonth}></button>\n                        </div>\n                        <table className=\"text-xs select-none\">\n                          <thead>\n                            <tr className=\"text-left text-gray-600 dark:text-gray-400\">{['', '', '', '', '', '', ''].map((d, idx) => {\n                            const SUN = 0; // eslint-disable-line no-magic-numbers\n                            const SAT = 6; // eslint-disable-line no-magic-numbers\n                            return <th key={d} className={`px-2 py-1 ${idx === SUN ? 'text-red-600' : idx === SAT ? 'text-blue-600' : ''}`}>{d}</th>;\n                          })}</tr>\n                          </thead>\n                          <tbody>{cal.getCalendarGrid().map((row, idx) => <tr key={idx} className=\"text-left\">{row.map((d, i2) => {\n                            const clickable = typeof d === 'number' && d !== 0 && !Number.isNaN(d);\n                            const SUN = 0; // eslint-disable-line no-magic-numbers\n                            const SAT = 6; // eslint-disable-line no-magic-numbers\n                            const dayColor = i2 === SUN ? 'text-red-600' : i2 === SAT ? 'text-blue-600' : '';\n                            return <td key={i2} className={`px-2 py-1 ${dayColor} ${clickable ? 'cursor-pointer hover:bg-gray-100 rounded' : ''}`} onClick={() => {\n                              if (clickable) cal.pickDate(d as number);\n                            }}>\n                                  {clickable ? d : ''}\n                                </td>;\n                          })}</tr>)}</tbody>\n                        </table>\n                      </div>}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"border-t border-gray-200 dark:border-gray-700 pt-3\">\n                <div className=\"grid grid-cols-3 gap-3\">\n                  <div>\n                    <label htmlFor=\"bulk-labor-persons\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"> </label>\n                    <input id=\"bulk-labor-persons\" type=\"text\" name=\"bulkLaborPersons\" autoComplete=\"off\" value={bulkBaseInfo.bulkLaborPersons ?? ''} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} onFocus={e => e.target.select()} placeholder=\": 3\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                  </div>\n                  <div>\n                    <label htmlFor=\"bulk-labor-rate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"> </label>\n                    <input id=\"bulk-labor-rate\" type=\"text\" name=\"bulkLaborUnitRate\" autoComplete=\"off\" value={(() => {\n                    const val = bulkBaseInfo.bulkLaborUnitRate;\n                    if (val === null || val === undefined || val === '') return '';\n                    const num = Number(val);\n                    return Number.isFinite(num) ? format(num) : String(val);\n                  })()} onChange={e => onBaseInfoChangeField(e.target.name, e.target.value)} onFocus={e => e.target.select()} placeholder=\": 250,000\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                  </div>\n                  <div>\n                    <div className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"> </div>\n                    <div className=\"mt-1 w-full bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 rounded px-3 py-2 text-sm font-semibold text-indigo-900 dark:text-indigo-300\">{(() => {\n                      const persons = Number(bulkBaseInfo.bulkLaborPersons);\n                      const rate = Number(bulkBaseInfo.bulkLaborUnitRate);\n                      const p = Number.isFinite(persons) ? persons : 0;\n                      const r = Number.isFinite(rate) ? rate : 0;\n                      return `${format(p * r)}`;\n                    })()}</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"inline-flex h-7 w-7 items-center justify-center rounded-full bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400\"></span>\n                  <h4 className=\"text-base font-semibold text-gray-900 dark:text-gray-100\"> </h4>\n                </div>\n                <button type=\"button\" onClick={onAddItem} className=\"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 text-sm\">+  </button>\n              </div>\n\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                {bulkItems.map((item, index) => <div key={index} className=\"border border-gray-200 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50\">\n                    <div className=\"flex justify-between items-center mb-3\">\n                      <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">  #{index + 1}</span>\n                      {bulkItems.length > 1 && <button type=\"button\" onClick={() => onRemoveItem(index)} className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 text-sm\"></button>}\n                    </div>\n\n                    {/* 1: , ,  */}\n                    <div className=\"grid grid-cols-3 gap-3 mb-2\">\n                      <div>\n                        <label htmlFor={`bulk-item-name-${index}`} className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                        <input id={`bulk-item-name-${index}`} type=\"text\" name={`bulk-item-name-${index}`} autoComplete=\"off\" value={item.name ?? ''} onChange={e => onItemChange(index, 'name', e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required />\n                      </div>\n                      <div>\n                        <label htmlFor={`bulk-item-category-${index}`} className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                        <select id={`bulk-item-category-${index}`} name={`bulk-item-category-${index}`} autoComplete=\"off\" value={item.category ?? ''} onChange={e => onItemChange(index, 'category', e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" required>\n                          <option value=\"\"> </option>\n                          {categories.map(cat => <option key={cat} value={cat}>{cat}</option>)}\n                        </select>\n                      </div>\n                      <div>\n                        <label htmlFor={`bulk-item-description-${index}`} className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"> </label>\n                        <input id={`bulk-item-description-${index}`} type=\"text\" name={`bulk-item-description-${index}`} autoComplete=\"off\" value={item.description ?? ''} onChange={e => onItemChange(index, 'description', e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                      </div>\n                    </div>\n\n                    {/* 2: , , ,  */}\n                    <div className=\"grid grid-cols-4 gap-3 mb-2\">\n                      <div>\n                        <label htmlFor={`bulk-item-quantity-${index}`} className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                        <input id={`bulk-item-quantity-${index}`} type=\"text\" name={`bulk-item-quantity-${index}`} autoComplete=\"off\" value={item.quantity ?? ''} onChange={e => onItemChange(index, 'quantity', e.target.value)} onFocus={e => e.target.select()} placeholder=\": 1\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                      </div>\n                      <div>\n                        <label htmlFor={`bulk-item-unit-${index}`} className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                        <select id={`bulk-item-unit-${index}`} name={`bulk-item-unit-${index}`} autoComplete=\"off\" value={item.unit ?? ''} onChange={e => onItemChange(index, 'unit', e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\">\n                          <option value=\"\"> </option>\n                          {units.map(u => <option key={u} value={u}>{u}</option>)}\n                        </select>\n                      </div>\n                      <div>\n                        <label htmlFor={`bulk-item-price-${index}`} className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                        <input id={`bulk-item-price-${index}`} type=\"text\" name={`bulk-item-price-${index}`} autoComplete=\"off\" value={(() => {\n                      const val = item.defaultPrice;\n                      if (val === null || val === undefined) return '';\n                      const num = Number(val);\n                      return Number.isFinite(num) ? format(num) : String(val);\n                    })()} onChange={e => onItemChange(index, 'defaultPrice', e.target.value)} onFocus={e => e.target.select()} placeholder=\": 200,000\" className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                      </div>\n                      <div>\n                        <div className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></div>\n                        <div className=\"mt-1 w-full bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded px-3 py-2 text-sm font-semibold text-green-900 dark:text-green-300\">{(() => {\n                        const pRaw = item.defaultPrice;\n                        const qRaw = item.quantity;\n                        const pNum = Number(pRaw);\n                        const qNum = Number(qRaw);\n                        const p = Number.isFinite(pNum) ? pNum : 0;\n                        const q = Number.isFinite(qNum) ? qNum : 1;\n                        const total = p * q;\n                        return `${format(total)}`;\n                      })()}</div>\n                      </div>\n                    </div>\n\n                    {/* 3:  */}\n                    <div className=\"mb-3\">\n                      <label htmlFor={`bulk-item-notes-${index}`} className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"></label>\n                      <input id={`bulk-item-notes-${index}`} type=\"text\" name={`bulk-item-notes-${index}`} autoComplete=\"off\" value={item.notes ?? ''} onChange={e => onItemChange(index, 'notes', e.target.value)} className=\"mt-1 block w-full border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\" />\n                    </div>\n\n                    {/*    */}\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"flex-1\">\n                        <div className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"></div>\n                        <div className=\"flex flex-wrap gap-1.5\" role=\"group\" aria-label={`  ${index + 1}  `}>\n                          {statuses.map(s => {\n                        const active = item.status === s;\n                        const classes = active ? 'bg-indigo-600 dark:bg-indigo-500 text-white border-transparent shadow' : 'bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-500 hover:bg-gray-200 dark:hover:bg-gray-500';\n                        return <button key={s} type=\"button\" onClick={() => onItemChange(index, 'status', s)} className={`px-2.5 py-1 rounded-full text-xs transition ${classes}`} aria-pressed={active}>{s}</button>;\n                      })}\n                        </div>\n                      </div>\n                      <div className=\"ml-4\">\n                        <div className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 text-right\"> </div>\n                        <div className=\"bg-blue-600 dark:bg-blue-700 text-white rounded-lg px-4 py-2 text-base font-bold shadow-md\">{(() => {\n                        const pRaw = item.defaultPrice;\n                        const qRaw = item.quantity;\n                        const pNum = Number(pRaw);\n                        const qNum = Number(qRaw);\n                        const p = Number.isFinite(pNum) ? pNum : 0;\n                        const q = Number.isFinite(qNum) ? qNum : 1;\n                        const laborPersons = Number(bulkBaseInfo.bulkLaborPersons);\n                        const laborRate = Number(bulkBaseInfo.bulkLaborUnitRate);\n                        const lp = Number.isFinite(laborPersons) ? laborPersons : 0;\n                        const lr = Number.isFinite(laborRate) ? laborRate : 0;\n                        const laborCost = lp * lr;\n                        const total = p * q + laborCost;\n                        return `${format(total)}`;\n                      })()}</div>\n                      </div>\n                    </div>\n                  </div>)}\n              </div>\n            </div>\n          </form>\n        </div>\n\n        {/* Sticky   */}\n        <div className=\"sticky bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700 px-6 py-4 rounded-b-2xl shadow-lg\">\n          <div className=\"flex justify-end space-x-3\">\n            <button type=\"button\" onClick={onCancel} className=\"px-6 py-2.5 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition font-medium\">\n              \n            </button>\n            <button type=\"submit\" form=\"bulk-work-item-form\" className=\"px-6 py-2.5 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-md transition font-bold\">\n              {bulkItems.length}   \n            </button>\n          </div>\n        </div>\n      </div>\n    </div>;\n}","import { useApp } from '../contexts/AppContext';\nimport type { WorkItem, Client } from '../types/domain';\n\nexport function useProjects() {\n  const { workItems, clients } = useApp();\n\n  const getClientProjects = (clientId?: number | string): string[] => {\n    if (clientId == null || (typeof clientId === 'string' && clientId.trim() === '')) return [];\n    const parsed = typeof clientId === 'string' ? parseInt(clientId, 10) : clientId;\n    const cid = Number.isFinite(parsed) ? parsed : null;\n    if (cid === null) return [];\n    const fromWorkItems = (workItems as WorkItem[])\n      .filter(item => item.clientId === cid)\n      .map(item => item.projectName)\n      .filter((s): s is string => typeof s === 'string' && s.trim() !== '');\n    const client = (clients as Client[]).find(c => c.id === cid);\n    const clientProjects: string[] = (client !== undefined && Array.isArray(client.projects)) ? client.projects : [];\n    const clientWorkplaces = (client !== undefined && Array.isArray(client.workplaces)) ? client.workplaces : [];\n    const fromClientProjects = clientProjects\n      .filter((s): s is string => typeof s === 'string' && s.trim() !== '');\n    const fromWorkplaces = clientWorkplaces\n      .map(wp => wp.description)\n      .filter((s): s is string => typeof s === 'string' && s.trim() !== '');\n    return Array.from(new Set([...fromWorkItems, ...fromClientProjects, ...fromWorkplaces]));\n  };\n\n  const getAllProjects = (): string[] => {\n    const all = Array.from(new Set((workItems as WorkItem[])\n      .map(i => i.projectName)\n      .filter((s): s is string => typeof s === 'string' && s.trim() !== '')));\n    return all.sort();\n  };\n\n  return { getClientProjects, getAllProjects };\n}\n","import { compiledBlock as _compiledBlock } from \"million/react\";\nconst WorkItems_1 = _compiledBlock(_props => <div className=\"p-2 md:p-3\">\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2\">  </h1>\n            <p className=\"text-gray-600 dark:text-gray-300\">    </p>\n          </div>\n          <div className=\"flex space-x-2\">\n            <button onClick={_props.v0} className=\"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm text-gray-700 dark:text-gray-300\">\n              <span className=\"text-gray-500 dark:text-gray-400 mr-2\"></span>\n              <span className=\"text-xs font-semibold\"> </span>\n            </button>\n            <button onClick={_props.v1} className=\"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm text-gray-700 dark:text-gray-300\">\n              <span className=\"text-blue-500 mr-2\"></span>\n              <span className=\"text-xs font-semibold\">Excel </span>\n            </button>\n            <button onClick={_props.v2} className=\"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm text-gray-700 dark:text-gray-300\">\n              <span className=\"text-green-500 mr-2\"></span>\n              <span className=\"text-xs font-semibold\">Excel </span>\n            </button>\n            <button onClick={_props.v3} className=\"flex items-center justify-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full shadow-sm text-gray-700 dark:text-gray-300\">\n              <span className=\"text-purple-500 mr-2\"></span>\n              <span className=\"text-xs font-semibold\">   </span>\n            </button>\n            <button onClick={_props.v4} className=\"flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-full shadow-lg\">\n              <span className=\"text-yellow-300 mr-2\"></span>\n              <span className=\"text-xs font-bold\">  </span>\n            </button>\n          </div>\n        </div>\n        {_props.v5}\n      </div>\n\n      {_props.v6}\n\n      {_props.v7}\n\n      {_props.v8}\n\n      {_props.v9}\n\n      {_props.v10}\n\n      {_props.v11}\n      {_props.v12}\n    </div>, {\n  name: \"WorkItems_1\",\n  portals: [\"v5\", \"v6\", \"v7\", \"v8\", \"v9\", \"v10\", \"v11\", \"v12\"]\n});\nconst WorkItems = function WorkItems() {\n  const {\n    clients,\n    setClients,\n    workItems,\n    setWorkItems,\n    invoices,\n    setInvoices,\n    units,\n    categories\n  } = useApp();\n  const {\n    format,\n    parse\n  } = useNumberFormat();\n  const {\n    getClientWorkplaces\n  } = useClientWorkplaces();\n  // const { getAllProjects } = useProjects();\n\n  const [selectedClient, setSelectedClient] = useState<string>('');\n  const [selectedProject, setSelectedProject] = useState<string>('');\n  const [bulkStatus, setBulkStatus] = useState<string>('');\n  const [showConfirmBulkDelete, setShowConfirmBulkDelete] = useState<boolean>(false);\n  const [pendingDeleteId, setPendingDeleteId] = useState<Id | null>(null);\n  const [showItemModal, setShowItemModal] = useState<boolean>(false);\n  const [editingItem, setEditingItem] = useState<WorkItem | null>(null);\n  const [showBulkModal, setShowBulkModal] = useState<boolean>(false);\n  const [showBulkCustomProject, setShowBulkCustomProject] = useState<boolean>(false);\n  const [bulkItems, setBulkItems] = useState<BulkItem[]>([{\n    name: '',\n    category: '',\n    defaultPrice: '' as unknown as number,\n    quantity: '' as unknown as number,\n    unit: '',\n    description: '',\n    status: '',\n    notes: '',\n    laborPersons: '',\n    laborUnitRate: ''\n  }]);\n  const [bulkBaseInfo, setBulkBaseInfo] = useState<{\n    clientId: string | number;\n    workplaceId: string | number;\n    projectName: string;\n    date: string;\n    bulkLaborPersons: string | number;\n    bulkLaborUnitRate: string | number;\n  }>({\n    clientId: '',\n    workplaceId: '',\n    projectName: '',\n    date: new Date().toISOString().split('T')[0],\n    bulkLaborPersons: '',\n    bulkLaborUnitRate: ''\n  });\n  const defaultNewItem: NewItem = {\n    id: 0,\n    clientId: '' as unknown as number,\n    clientName: '',\n    workplaceId: '' as unknown as number,\n    workplaceName: '',\n    projectName: '',\n    name: '',\n    category: '',\n    defaultPrice: '' as unknown as number,\n    quantity: '' as unknown as number,\n    unit: '',\n    description: '',\n    status: '',\n    notes: '',\n    date: new Date().toISOString().split('T')[0],\n    laborPersons: '',\n    laborUnitRate: '',\n    laborPersonsGeneral: '',\n    laborUnitRateGeneral: ''\n  };\n  const [newItem, setNewItem] = useState<NewItem>(defaultNewItem);\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  const filteredWorkItems = useMemo(() => {\n    return workItems.filter(item => {\n      if (selectedClient !== '' && item.clientId !== parseInt(selectedClient)) return false;\n      if (selectedProject !== '' && item.projectName !== selectedProject) return false;\n      return true;\n    });\n  }, [workItems, selectedClient, selectedProject]);\n  const visibleIds = useMemo<Id[]>(() => filteredWorkItems.map(i => i.id), [filteredWorkItems]);\n  const selection = useSelection(visibleIds);\n  const getLaborCost = (item: WorkItem): number => {\n    const skilledPersons = parseInt(String(item?.laborPersons ?? 0), 10);\n    const skilledRate = parseInt(String(item?.laborUnitRate ?? 0), 10);\n    const generalPersons = parseInt(String(item?.laborPersonsGeneral ?? 0), 10);\n    const generalRate = parseInt(String(item?.laborUnitRateGeneral ?? 0), 10);\n    const skilledCost = Number.isFinite(skilledPersons) && skilledPersons !== 0 ? skilledPersons * skilledRate : 0;\n    const generalCost = Number.isFinite(generalPersons) && generalPersons !== 0 ? generalPersons * generalRate : 0;\n    return skilledCost + generalCost;\n  };\n  const getClientProjects = (clientId?: number | string): string[] => {\n    if (clientId === undefined || clientId === null || clientId === '') return [];\n    const cid = parseInt(String(clientId));\n    const fromWorkItems = workItems.filter(item => item.clientId === cid).map(item => item.projectName ?? '').filter((name): name is string => name !== '');\n    const client = clients.find(c => Number(c.id) === cid);\n    const fromClientProjects = (client?.projects ?? []).filter((p): p is string => p !== '' && p !== null && p !== undefined);\n    const fromWorkplaces = (client?.workplaces ?? []).map(wp => wp.description ?? '').filter((desc): desc is string => desc !== '');\n    return Array.from(new Set([...fromWorkItems, ...fromClientProjects, ...fromWorkplaces]));\n  };\n  const getCategoryColor = (category?: string): string => {\n    const colors: Record<string, string> = {\n      '': 'bg-brown-100 text-brown-800 dark:bg-brown-900/30 dark:text-brown-300',\n      '': 'bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300',\n      '': 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300',\n      '': 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300',\n      '': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300',\n      '': 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300',\n      '': 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300'\n    };\n    if (category !== undefined && category !== null && category !== '') {\n      return colors[category] ?? 'bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300';\n    }\n    return 'bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300';\n  };\n  const handleEdit = (item: WorkItem) => {\n    setEditingItem(item);\n    setNewItem({\n      ...item\n    });\n    setShowItemModal(true);\n  };\n  const handleDelete = (id: Id) => setPendingDeleteId(id);\n  const confirmDeleteSingle = async () => {\n    if (pendingDeleteId == null) return;\n\n    // UI  \n    setWorkItems(prev => prev.filter(i => i.id !== pendingDeleteId));\n    setPendingDeleteId(null);\n\n    // Supabase  \n    try {\n      const {\n        supabase\n      } = await import('../services/supabase');\n      if (supabase === null || supabase === undefined) return;\n      const {\n        error\n      } = await supabase.from('work_items').delete().eq('work_item_id', pendingDeleteId);\n      if (error !== null && error !== undefined) {\n        //  \n      }\n    } catch (err) {\n      // \n    }\n  };\n  const toInvoiceItem = (wi: WorkItem) => {\n    const DEFAULT_QUANTITY = 1;\n    const qty = typeof wi.quantity === 'number' && wi.quantity > 0 ? wi.quantity : DEFAULT_QUANTITY;\n    const unitPrice = typeof wi.defaultPrice === 'number' ? wi.defaultPrice : 0;\n\n    //    (laborPersons * laborUnitRate)\n    const persons = parseInt(String(wi.laborPersons ?? 0), 10);\n    const rate = parseInt(String(wi.laborUnitRate ?? 0), 10);\n    const personsNum = Number.isFinite(persons) && !isNaN(persons) ? persons : 0;\n    const rateNum = Number.isFinite(rate) && !isNaN(rate) ? rate : 0;\n    const laborCost = personsNum * rateNum;\n\n    //     (  )\n    const lpg = parseInt(String(wi.laborPersonsGeneral ?? 0), 10);\n    const lrg = parseInt(String(wi.laborUnitRateGeneral ?? 0), 10);\n    const lpgNum = Number.isFinite(lpg) && !isNaN(lpg) ? lpg : 0;\n    const lrgNum = Number.isFinite(lrg) && !isNaN(lrg) ? lrg : 0;\n    const legacyLaborCost = lpgNum * lrgNum;\n    const totalLaborCost = laborCost + legacyLaborCost;\n    return {\n      name: wi.name,\n      quantity: qty,\n      unit: wi.unit,\n      unitPrice,\n      total: qty * unitPrice + totalLaborCost,\n      notes: wi.notes ?? '',\n      date: wi.date ?? '',\n      // /  \n      category: wi.category ?? '',\n      description: wi.description ?? '',\n      laborPersons: wi.laborPersons ?? '',\n      laborUnitRate: wi.laborUnitRate ?? '',\n      laborPersonsGeneral: wi.laborPersonsGeneral ?? '',\n      laborUnitRateGeneral: wi.laborUnitRateGeneral ?? ''\n    };\n  };\n  const handleCreateInvoice = async (workItem: WorkItem) => {\n    const INVOICE_ID_PADDING = 3;\n    const DAYS_UNTIL_DUE = 14;\n    const HOURS_PER_DAY = 24;\n    const MINUTES_PER_HOUR = 60;\n    const SECONDS_PER_MINUTE = 60;\n    const MS_PER_SECOND = 1000;\n\n    // clientId  \n    if (workItem.clientId === null || workItem.clientId === undefined || workItem.clientId === 0) {\n      alert('   .     .');\n      return;\n    }\n    const completedItems = workItems.filter(i => i.clientId === workItem.clientId && Number(i.workplaceId) === Number(workItem.workplaceId) && i.projectName === workItem.projectName && i.status === '');\n    const unbilledItems = completedItems;\n    if (unbilledItems.length === 0) {\n      alert('     .');\n      return;\n    }\n    const client = clients.find(c => Number(c.id) === workItem.clientId);\n    const workplace = client?.workplaces?.find(w => Number(w.id) === Number(workItem.workplaceId));\n    const newInvoiceId = `INV-${new Date().getFullYear()}-${String(invoices.length + 1).padStart(INVOICE_ID_PADDING, '0')}`;\n    const items = unbilledItems.map(toInvoiceItem);\n    const totalAmount = items.reduce((s, it) => s + (it.total !== 0 ? it.total : 0), 0);\n    const dueDateTime = Date.now() + DAYS_UNTIL_DUE * HOURS_PER_DAY * MINUTES_PER_HOUR * SECONDS_PER_MINUTE * MS_PER_SECOND;\n    const newInvoice = {\n      id: newInvoiceId,\n      clientId: workItem.clientId,\n      client: workItem.clientName ?? '',\n      workplaceId: typeof workItem.workplaceId === 'number' ? workItem.workplaceId : undefined,\n      project: workItem.projectName ?? '',\n      workplaceAddress: workplace?.address ?? '',\n      amount: totalAmount,\n      status: '' as const,\n      date: new Date().toISOString().split('T')[0],\n      dueDate: new Date(dueDateTime).toISOString().split('T')[0],\n      workItems: items\n    };\n\n    //   \n    const previousInvoices = [...invoices];\n\n    // UI   (optimistic update)\n    const tempInvoice = {\n      ...newInvoice,\n      id: `TEMP-${Date.now()}`\n    };\n    setInvoices(prev => [...prev, tempInvoice]);\n\n    // Supabase INSERT\n    try {\n      const {\n        supabase,\n        getCurrentUserId\n      } = await import('../services/supabase');\n      if (supabase !== null && supabase !== undefined) {\n        const userId = await getCurrentUserId();\n\n        // Status    \n        const toDbStatus = (status: string): string => {\n          const statusMap: Record<string, string> = {\n            '': 'pending',\n            '': 'pending',\n            '': 'overdue',\n            '': 'paid'\n          };\n          return statusMap[status] ?? 'pending';\n        };\n\n        // 1. Invoice   INSERT\n        const {\n          data: invoiceData,\n          error: invoiceError\n        } = await supabase.from('invoices').insert({\n          user_id: userId,\n          invoice_number: newInvoiceId,\n          client_id: workItem.clientId,\n          workplace_id: workItem.workplaceId,\n          title: workItem.projectName ?? '',\n          date: newInvoice.date,\n          due_date: newInvoice.dueDate,\n          status: toDbStatus(newInvoice.status),\n          amount: totalAmount,\n          notes: ''\n        }).select('invoice_id').single();\n        if (invoiceError !== null && invoiceError !== undefined) {\n          alert(`    : ${invoiceError.message}`);\n          setInvoices(previousInvoices);\n          return;\n        }\n\n        // 2. Invoice Items INSERT\n        if (invoiceData !== null && invoiceData !== undefined && items.length > 0) {\n          const dbInvoiceItems = items.map((item, index) => ({\n            user_id: userId,\n            invoice_id: invoiceData.invoice_id,\n            category: item.category ?? '',\n            name: item.name,\n            description: item.description ?? '',\n            unit: item.unit ?? '',\n            quantity: item.quantity,\n            unit_price: item.unitPrice,\n            sort_order: index,\n            date: item.date !== null && item.date !== undefined && item.date !== '' ? item.date : null,\n            notes: item.notes !== null && item.notes !== undefined && item.notes !== '' ? item.notes : null,\n            labor_persons: typeof item.laborPersons === 'number' ? item.laborPersons : typeof item.laborPersons === 'string' && item.laborPersons !== '' ? Number(item.laborPersons) : 0,\n            labor_unit_rate: typeof item.laborUnitRate === 'number' ? item.laborUnitRate : typeof item.laborUnitRate === 'string' && item.laborUnitRate !== '' ? Number(item.laborUnitRate) : 0,\n            labor_persons_general: typeof item.laborPersonsGeneral === 'number' ? item.laborPersonsGeneral : typeof item.laborPersonsGeneral === 'string' && item.laborPersonsGeneral !== '' ? Number(item.laborPersonsGeneral) : 0,\n            labor_unit_rate_general: typeof item.laborUnitRateGeneral === 'number' ? item.laborUnitRateGeneral : typeof item.laborUnitRateGeneral === 'string' && item.laborUnitRateGeneral !== '' ? Number(item.laborUnitRateGeneral) : 0\n          }));\n          const {\n            error: itemsError\n          } = await supabase.from('invoice_items').insert(dbInvoiceItems);\n          if (itemsError !== null && itemsError !== undefined) {\n            alert(`     : ${itemsError.message}`);\n            // Invoice  items   -  \n          }\n        }\n\n        //  ID UI \n        setInvoices(prev => prev.map(inv => inv.id === tempInvoice.id ? {\n          ...newInvoice,\n          id: newInvoiceId\n        } : inv));\n        alert(` ${newInvoiceId} .`);\n      }\n    } catch (err) {\n      alert(`  : ${String(err)}`);\n      setInvoices(previousInvoices);\n    }\n  };\n  const onChangeField = (name: string, value: string) => {\n    let v: unknown = value;\n    if (['defaultPrice', 'quantity', 'laborPersons', 'laborUnitRate', 'laborPersonsGeneral', 'laborUnitRateGeneral'].includes(name)) {\n      const digits = String(value).replace(/[^\\d-]/g, '');\n      v = digits === '' || digits === '-' ? '' : parse(digits);\n    } else if (['clientId', 'workplaceId'].includes(name)) {\n      const parsedValue = parseInt(String(value));\n      v = parsedValue !== 0 ? parsedValue : 0;\n    }\n    setNewItem(prev => ({\n      ...prev,\n      [name]: v\n    }) as NewItem);\n  };\n\n  // Bulk Modal handlers\n  const onBaseInfoChangeField = (name: string, value: string) => {\n    let v: unknown = value;\n    if (name === 'clientId' || name === 'workplaceId') {\n      const parsedValue = parseInt(String(value));\n      v = parsedValue !== 0 ? parsedValue : '';\n    } else if (name === 'bulkLaborPersons' || name === 'bulkLaborUnitRate') {\n      const digits = String(value).replace(/[^\\d-]/g, '');\n      v = digits === '' || digits === '-' ? '' : parse(digits);\n    }\n    setBulkBaseInfo(prev => {\n      const next = {\n        ...prev,\n        [name]: v\n      } as typeof prev;\n      if (name === 'clientId') {\n        next.workplaceId = '';\n        setShowBulkCustomProject(false);\n      }\n      if (name === 'workplaceId') {\n        const wp = getClientWorkplaces(next.clientId).find(w => w.id === Number(v));\n        const hasProjectName = next.projectName !== '' && next.projectName !== null && next.projectName !== undefined;\n        const hasDescription = wp?.description !== undefined && wp?.description !== null && wp?.description !== '';\n        if (!hasProjectName && hasDescription) next.projectName = wp.description ?? '';\n      }\n      if (name === 'projectName') {\n        if (value === 'custom') {\n          setShowBulkCustomProject(true);\n          next.projectName = '';\n        } else {\n          setShowBulkCustomProject(false);\n        }\n      }\n      return next;\n    });\n  };\n  const onBulkItemChange = (index: number, field: string, value: string) => {\n    setBulkItems(prev => {\n      const updated = [...prev];\n      let v: unknown = value;\n      if (['defaultPrice', 'quantity', 'laborPersons', 'laborUnitRate'].includes(field)) {\n        const digits = String(value).replace(/[^\\d-]/g, '');\n        v = digits === '' || digits === '-' ? '' : parse(digits);\n      }\n      const existingItem = updated[index];\n      if (existingItem !== undefined) {\n        updated[index] = {\n          ...existingItem,\n          [field]: v\n        } as BulkItem;\n      }\n      return updated;\n    });\n  };\n  const onBulkAddItem = () => {\n    setBulkItems(prev => [...prev, {\n      name: '',\n      category: '',\n      defaultPrice: '' as unknown as number,\n      quantity: '' as unknown as number,\n      unit: '',\n      description: '',\n      status: '',\n      notes: '',\n      laborPersons: '',\n      laborUnitRate: ''\n    }]);\n  };\n  const onBulkRemoveItem = (index: number) => {\n    setBulkItems(prev => prev.length <= 1 ? prev : prev.filter((_, i) => i !== index));\n  };\n  const onBulkSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const errors: string[] = [];\n    const hasClientId = bulkBaseInfo.clientId !== '' && bulkBaseInfo.clientId !== null && bulkBaseInfo.clientId !== undefined;\n    const hasWorkplaceId = bulkBaseInfo.workplaceId !== '' && bulkBaseInfo.workplaceId !== null && bulkBaseInfo.workplaceId !== undefined;\n    const hasProjectName = bulkBaseInfo.projectName !== '' && bulkBaseInfo.projectName !== null && bulkBaseInfo.projectName !== undefined;\n    if (!hasClientId) errors.push(' .');\n    if (!hasWorkplaceId) errors.push(' .');\n    if (!hasProjectName) errors.push(' .');\n    bulkItems.forEach((it, idx) => {\n      const hasName = it.name !== undefined && it.name !== null && String(it.name).trim() !== '';\n      if (!hasName) errors.push(` #${idx + 1}:  .`);\n    });\n    if (errors.length > 0) {\n      alert(errors.join('\\n'));\n      return;\n    }\n    const selectedClientData = clients.find(c => Number(c.id) === Number(bulkBaseInfo.clientId));\n    const selectedWorkplace = getClientWorkplaces(bulkBaseInfo.clientId).find(wp => wp.id === Number(bulkBaseInfo.workplaceId));\n    const currentMaxId = workItems.length > 0 ? Math.max(...workItems.map(i => Number(i.id) ?? 0)) : 0;\n    const bulkLP: number | '' = typeof bulkBaseInfo.bulkLaborPersons === 'number' ? bulkBaseInfo.bulkLaborPersons : String(bulkBaseInfo.bulkLaborPersons).trim() === '' ? '' : parseInt(String(bulkBaseInfo.bulkLaborPersons), 10) ?? 0;\n    const bulkLR: number | '' = typeof bulkBaseInfo.bulkLaborUnitRate === 'number' ? bulkBaseInfo.bulkLaborUnitRate : String(bulkBaseInfo.bulkLaborUnitRate).trim() === '' ? '' : parseInt(String(bulkBaseInfo.bulkLaborUnitRate), 10) ?? 0;\n    const createdItems: WorkItem[] = bulkItems.map((item, idx) => ({\n      id: currentMaxId + idx + 1,\n      clientId: Number(bulkBaseInfo.clientId) as number,\n      clientName: selectedClientData?.name ?? '',\n      workplaceId: Number(bulkBaseInfo.workplaceId) as number,\n      workplaceName: selectedWorkplace?.name ?? '',\n      projectName: bulkBaseInfo.projectName,\n      date: bulkBaseInfo.date ?? new Date().toISOString().split('T')[0],\n      name: item.name ?? '',\n      category: item.category ?? '',\n      defaultPrice: typeof item.defaultPrice === 'number' && item.defaultPrice !== 0 ? item.defaultPrice : item.defaultPrice as unknown as string === '' ? '' as unknown as number : 0,\n      quantity: typeof item.quantity === 'number' && item.quantity !== 0 ? item.quantity : item.quantity as unknown as string === '' ? '' as unknown as number : 1,\n      unit: item.unit ?? '',\n      description: item.description ?? '',\n      status: item.status as WorkStatus ?? '',\n      notes: item.notes ?? '',\n      laborPersonsGeneral: bulkLP,\n      laborUnitRateGeneral: bulkLR,\n      laborPersons: item.laborPersons ?? '',\n      laborUnitRate: item.laborUnitRate ?? ''\n    }));\n\n    //    ()\n    const previousWorkItems = workItems;\n    const previousClients = clients;\n\n    // UI   ( )\n    setWorkItems(prev => [...prev, ...createdItems]);\n    const hasBulkProjectName = bulkBaseInfo.projectName !== '' && bulkBaseInfo.projectName !== null && bulkBaseInfo.projectName !== undefined;\n    if (hasBulkProjectName) {\n      setClients(prev => prev.map(c => Number(c.id) === Number(bulkBaseInfo.clientId) ? {\n        ...c,\n        projects: Array.from(new Set([...(c.projects ?? []), bulkBaseInfo.projectName]))\n      } : c));\n    }\n\n    // Supabase  \n    try {\n      const {\n        supabase\n      } = await import('../services/supabase');\n      if (supabase === null || supabase === undefined) {\n        setWorkItems(previousWorkItems);\n        setClients(previousClients);\n        alert('  .');\n        return;\n      }\n      const {\n        getCurrentUserId\n      } = await import('../services/supabase');\n      const userId = await getCurrentUserId();\n\n      // Integer     \n      const toIntOrNull = (val: string | number | null | undefined): number | null => {\n        if (val === null || val === undefined || val === '') return null;\n        const num = Number(val);\n        return isNaN(num) ? null : num;\n      };\n\n      // Status  ->   \n      const toDbStatus = (status: string | undefined): string => {\n        if (status === null || status === undefined || status === '') return 'planned';\n        const statusMap: Record<string, string> = {\n          '': 'planned',\n          '': 'in_progress',\n          '': 'completed',\n          '': 'on_hold'\n        };\n        return statusMap[status] ?? 'planned';\n      };\n\n      //  INSERT    \n      const dbWorkItems = createdItems.map(item => ({\n        user_id: userId,\n        client_id: toIntOrNull(item.clientId),\n        workplace_id: toIntOrNull(item.workplaceId),\n        project_name: item.projectName ?? '',\n        name: item.name,\n        description: item.description ?? '',\n        category: item.category ?? '',\n        quantity: toIntOrNull(item.quantity) ?? 0,\n        unit: item.unit ?? '',\n        default_price: toIntOrNull(item.defaultPrice) ?? 0,\n        status: toDbStatus(item.status),\n        start_date: item.date ?? null,\n        notes: item.notes ?? '',\n        labor_persons: toIntOrNull(item.laborPersons) ?? 0,\n        labor_unit_rate: toIntOrNull(item.laborUnitRate) ?? 0,\n        labor_persons_general: toIntOrNull(item.laborPersonsGeneral) ?? 0,\n        labor_unit_rate_general: toIntOrNull(item.laborUnitRateGeneral) ?? 0\n      }));\n      const {\n        data: insertedData,\n        error\n      } = await supabase.from('work_items').insert(dbWorkItems).select(`\n          *,\n          clients!client_id (\n            company_name,\n            workplaces\n          )\n        `);\n      if (error !== null && error !== undefined) {\n        setWorkItems(previousWorkItems);\n        setClients(previousClients);\n        alert(`     : ${error.message}`);\n        return;\n      }\n\n      // DB    UI \n      if (insertedData !== null && insertedData !== undefined && insertedData.length > 0) {\n        const fromDbStatus = (status: string): '' | '' | '' | '' => {\n          const statusMap: Record<string, '' | '' | '' | ''> = {\n            'planned': '',\n            'in_progress': '',\n            'completed': '',\n            'on_hold': '',\n            'cancelled': ''\n          };\n          return statusMap[status] ?? '';\n        };\n        const actualCreatedItems: WorkItem[] = insertedData.map((w: Record<string, unknown>) => {\n          const clients = w.clients as Record<string, unknown> | null | undefined;\n          const clientName = clients?.company_name !== null && clients?.company_name !== undefined ? String(clients.company_name) : '';\n          const workplaces = clients?.workplaces !== null && clients?.workplaces !== undefined ? clients.workplaces as Array<Record<string, unknown>> : [];\n          const workplace = workplaces.find((wp: Record<string, unknown>) => wp.id !== null && wp.id !== undefined && wp.id === w.workplace_id);\n          const workplaceName = workplace?.name !== null && workplace?.name !== undefined ? String(workplace.name) : '';\n          const rawWorkplaceId = w.workplace_id as number | null | undefined;\n          const workplaceId = rawWorkplaceId !== null && rawWorkplaceId !== undefined ? rawWorkplaceId : '';\n          return {\n            id: w.work_item_id as number,\n            clientId: w.client_id as number,\n            clientName,\n            workplaceId,\n            workplaceName,\n            projectName: w.project_name !== null && w.project_name !== undefined ? String(w.project_name) : '',\n            name: w.name as string,\n            category: w.category !== null && w.category !== undefined ? String(w.category) : '',\n            defaultPrice: w.default_price !== null && w.default_price !== undefined ? Number(w.default_price) : 0,\n            quantity: w.quantity !== null && w.quantity !== undefined ? Number(w.quantity) : 0,\n            unit: w.unit !== null && w.unit !== undefined ? String(w.unit) : '',\n            description: w.description !== null && w.description !== undefined ? String(w.description) : '',\n            status: fromDbStatus(w.status as string) as WorkStatus,\n            date: w.start_date !== null && w.start_date !== undefined ? String(w.start_date) : '',\n            notes: w.notes !== null && w.notes !== undefined ? String(w.notes) : '',\n            laborPersons: w.labor_persons !== null && w.labor_persons !== undefined ? Number(w.labor_persons) : 0,\n            laborUnitRate: w.labor_unit_rate !== null && w.labor_unit_rate !== undefined ? Number(w.labor_unit_rate) : 0,\n            laborPersonsGeneral: w.labor_persons_general !== null && w.labor_persons_general !== undefined ? Number(w.labor_persons_general) : 0,\n            laborUnitRateGeneral: w.labor_unit_rate_general !== null && w.labor_unit_rate_general !== undefined ? Number(w.labor_unit_rate_general) : 0\n          };\n        });\n\n        //  DB   \n        setWorkItems(prev => {\n          const withoutOptimistic = prev.filter(item => !createdItems.some(created => created.id === item.id));\n          return [...withoutOptimistic, ...actualCreatedItems];\n        });\n      }\n    } catch (err) {\n      setWorkItems(previousWorkItems);\n      setClients(previousClients);\n      alert('       .');\n      return;\n    }\n    setShowBulkModal(false);\n    setShowBulkCustomProject(false);\n    setBulkItems([{\n      name: '',\n      category: '',\n      defaultPrice: '' as unknown as number,\n      quantity: '' as unknown as number,\n      unit: '',\n      description: '',\n      status: '',\n      notes: '',\n      laborPersons: '',\n      laborUnitRate: ''\n    }]);\n    setBulkBaseInfo({\n      clientId: '',\n      workplaceId: '',\n      projectName: '',\n      date: new Date().toISOString().split('T')[0],\n      bulkLaborPersons: '',\n      bulkLaborUnitRate: ''\n    });\n    alert(`${createdItems.length}   .`);\n  };\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const selectedClientData = clients.find(c => Number(c.id) === Number(newItem.clientId));\n    const selectedWorkplace = getClientWorkplaces(newItem.clientId).find(wp => wp.id === newItem.workplaceId);\n    if (editingItem !== null) {\n      //    ()\n      const previousWorkItems = workItems;\n\n      // : UI   ( )\n      const updated = {\n        ...editingItem,\n        ...newItem,\n        clientName: selectedClientData?.name ?? editingItem.clientName,\n        workplaceName: selectedWorkplace?.name ?? editingItem.workplaceName\n      } as WorkItem;\n      setWorkItems(prev => prev.map(i => i.id === editingItem.id ? updated : i));\n\n      // Supabase  \n      try {\n        const {\n          supabase\n        } = await import('../services/supabase');\n        if (supabase === null || supabase === undefined) {\n          // Supabase    \n          setWorkItems(previousWorkItems);\n          alert('  .');\n          return;\n        }\n        // Integer     \n        const toIntOrNull = (val: string | number | null | undefined): number | null => {\n          if (val === null || val === undefined || val === '') return null;\n          const num = Number(val);\n          return isNaN(num) ? null : num;\n        };\n\n        // Status  ->   \n        const toDbStatus = (status: string | undefined): string => {\n          if (status === null || status === undefined || status === '') return 'planned';\n          const statusMap: Record<string, string> = {\n            '': 'planned',\n            '': 'in_progress',\n            '': 'completed',\n            '': 'on_hold'\n          };\n          return statusMap[status] ?? 'planned';\n        };\n        const {\n          error\n        } = await supabase.from('work_items').update({\n          client_id: toIntOrNull(updated.clientId),\n          workplace_id: toIntOrNull(updated.workplaceId),\n          project_name: updated.projectName ?? '',\n          name: updated.name,\n          description: updated.description ?? '',\n          category: updated.category ?? '',\n          quantity: toIntOrNull(updated.quantity) ?? 0,\n          unit: updated.unit ?? '',\n          default_price: toIntOrNull(updated.defaultPrice) ?? 0,\n          status: toDbStatus(updated.status),\n          start_date: updated.date ?? null,\n          notes: updated.notes ?? '',\n          labor_persons: toIntOrNull(updated.laborPersons) ?? 0,\n          labor_unit_rate: toIntOrNull(updated.laborUnitRate) ?? 0,\n          labor_persons_general: toIntOrNull(updated.laborPersonsGeneral) ?? 0,\n          labor_unit_rate_general: toIntOrNull(updated.laborUnitRateGeneral) ?? 0\n        }).eq('work_item_id', updated.id);\n        if (error !== null && error !== undefined) {\n          //    \n          setWorkItems(previousWorkItems);\n          alert(`     : ${error.message}`);\n          return;\n        }\n      } catch (err) {\n        //    \n        setWorkItems(previousWorkItems);\n        alert('       .');\n        return;\n      }\n    } else {\n      //    ()\n      const previousWorkItems = workItems;\n      const previousClients = clients;\n\n      // : UI   ( )\n      const nextId = (workItems.length > 0 ? Math.max(...workItems.map(i => Number(i.id) ?? 0)) : 0) + 1;\n      const created: WorkItem = {\n        ...newItem,\n        id: nextId,\n        clientName: selectedClientData?.name ?? '',\n        workplaceName: selectedWorkplace?.name ?? '',\n        date: newItem.date ?? new Date().toISOString().split('T')[0]\n      } as WorkItem;\n      setWorkItems(prev => [...prev, created]);\n      const hasProjectName = newItem.projectName !== undefined && newItem.projectName !== null && newItem.projectName !== '';\n      if (hasProjectName) {\n        setClients(prev => prev.map(c => Number(c.id) === Number(newItem.clientId) ? {\n          ...c,\n          projects: Array.from(new Set([...(c.projects ?? []), newItem.projectName!]))\n        } : c));\n      }\n\n      // Supabase  \n      try {\n        const {\n          supabase\n        } = await import('../services/supabase');\n        if (supabase === null || supabase === undefined) {\n          // Supabase    \n          setWorkItems(previousWorkItems);\n          setClients(previousClients);\n          alert('  .');\n          return;\n        }\n        const {\n          getCurrentUserId\n        } = await import('../services/supabase');\n        const userId = await getCurrentUserId();\n\n        // Integer     \n        const toIntOrNull = (val: string | number | null | undefined): number | null => {\n          if (val === null || val === undefined || val === '') return null;\n          const num = Number(val);\n          return isNaN(num) ? null : num;\n        };\n\n        // Status  ->   \n        const toDbStatus = (status: string | undefined): string => {\n          if (status === null || status === undefined || status === '') return 'planned';\n          const statusMap: Record<string, string> = {\n            '': 'planned',\n            '': 'in_progress',\n            '': 'completed',\n            '': 'on_hold'\n          };\n          return statusMap[status] ?? 'planned';\n        };\n        const dbStatus = toDbStatus(created.status);\n        const clientIdValue = toIntOrNull(created.clientId);\n        const workplaceIdValue = toIntOrNull(created.workplaceId);\n\n        // client_id  null \n        if (clientIdValue === null) {\n          alert(' .');\n          setWorkItems(previousWorkItems);\n          setClients(previousClients);\n          return;\n        }\n\n        // work_item_id    \n        const {\n          error\n        } = await supabase.from('work_items').insert({\n          user_id: userId,\n          client_id: clientIdValue,\n          workplace_id: workplaceIdValue,\n          project_name: created.projectName ?? '',\n          name: created.name,\n          description: created.description ?? '',\n          category: created.category ?? '',\n          quantity: toIntOrNull(created.quantity) ?? 0,\n          unit: created.unit ?? '',\n          default_price: toIntOrNull(created.defaultPrice) ?? 0,\n          status: dbStatus,\n          start_date: created.date ?? null,\n          notes: created.notes ?? '',\n          labor_persons: toIntOrNull(created.laborPersons) ?? 0,\n          labor_unit_rate: toIntOrNull(created.laborUnitRate) ?? 0,\n          labor_persons_general: toIntOrNull(created.laborPersonsGeneral) ?? 0,\n          labor_unit_rate_general: toIntOrNull(created.laborUnitRateGeneral) ?? 0\n        });\n        if (error !== null && error !== undefined) {\n          //    \n          setWorkItems(previousWorkItems);\n          setClients(previousClients);\n          alert(`     : ${error.message}`);\n          return;\n        }\n      } catch (err) {\n        //    \n        setWorkItems(previousWorkItems);\n        setClients(previousClients);\n        alert('       .');\n        return;\n      }\n    }\n    setShowItemModal(false);\n    setEditingItem(null);\n    setNewItem(defaultNewItem);\n  };\n  const handleBulkDelete = () => {\n    if (selection.selected.length === 0) {\n      alert('  .');\n      return;\n    }\n    setShowConfirmBulkDelete(true);\n  };\n  const confirmBulkDelete = async () => {\n    const count = selection.selected.length;\n\n    // UI  \n    setWorkItems(prev => prev.filter(i => !selection.selected.includes(i.id)));\n    selection.clear();\n    setShowConfirmBulkDelete(false);\n    alert(`${count}   .`);\n\n    // Supabase  \n    try {\n      const {\n        supabase\n      } = await import('../services/supabase');\n      if (supabase === null || supabase === undefined) return;\n      const {\n        error\n      } = await supabase.from('work_items').delete().in('work_item_id', selection.selected);\n      if (error !== null && error !== undefined) {\n        //  \n      }\n    } catch (err) {\n      // \n    }\n  };\n  const handleApplyBulkStatus = async () => {\n    const hasStatus = bulkStatus !== '' && bulkStatus !== null && bulkStatus !== undefined;\n    if (!hasStatus) {\n      alert('  .');\n      return;\n    }\n\n    //    ()\n    const previousWorkItems = workItems;\n\n    // UI   ( )\n    setWorkItems(prev => prev.map(item => selection.selected.includes(item.id) ? {\n      ...item,\n      status: bulkStatus as WorkStatus\n    } : item));\n    setBulkStatus('');\n\n    // Supabase  \n    try {\n      const {\n        supabase\n      } = await import('../services/supabase');\n      if (supabase === null || supabase === undefined) {\n        setWorkItems(previousWorkItems);\n        alert('  .');\n        return;\n      }\n\n      // Status  ->   \n      const toDbStatus = (status: string | undefined): string => {\n        if (status === null || status === undefined || status === '') return 'planned';\n        const statusMap: Record<string, string> = {\n          '': 'planned',\n          '': 'in_progress',\n          '': 'completed',\n          '': 'on_hold'\n        };\n        return statusMap[status] ?? 'planned';\n      };\n      const dbStatus = toDbStatus(bulkStatus as WorkStatus);\n\n      //     \n      const {\n        error\n      } = await supabase.from('work_items').update({\n        status: dbStatus\n      }).in('work_item_id', selection.selected);\n      if (error !== null && error !== undefined) {\n        setWorkItems(previousWorkItems);\n        alert(`    : ${error.message}`);\n        return;\n      }\n    } catch (err) {\n      setWorkItems(previousWorkItems);\n      alert('      .');\n    }\n  };\n  const handleCreateBulkInvoice = () => {\n    const INVOICE_ID_PADDING = 3;\n    const DAYS_UNTIL_DUE = 14;\n    const HOURS_PER_DAY = 24;\n    const MINUTES_PER_HOUR = 60;\n    const SECONDS_PER_MINUTE = 60;\n    const MS_PER_SECOND = 1000;\n    if (selection.selected.length === 0) {\n      alert(' .');\n      return;\n    }\n    const selectedItems = workItems.filter(i => selection.selected.includes(i.id) && i.status === '');\n    if (selectedItems.length === 0) {\n      alert('  .');\n      return;\n    }\n    const first = selectedItems[0];\n\n    // clientId  \n    if (first.clientId === null || first.clientId === undefined || first.clientId === 0) {\n      alert('   .     .');\n      return;\n    }\n\n    //  , ,  \n    const hasDifferentProject = selectedItems.some(item => item.clientId !== first.clientId || Number(item.workplaceId) !== Number(first.workplaceId) || item.projectName !== first.projectName);\n    if (hasDifferentProject) {\n      alert('    , ,  .');\n      return;\n    }\n    const client = clients.find(c => Number(c.id) === first.clientId);\n    const workplace = client?.workplaces?.find(w => Number(w.id) === Number(first.workplaceId));\n    const newInvoiceId = `INV-${new Date().getFullYear()}-${String(invoices.length + 1).padStart(INVOICE_ID_PADDING, '0')}`;\n    const items = selectedItems.map(toInvoiceItem);\n    const totalAmount = items.reduce((s, it) => s + (it.total !== 0 ? it.total : 0), 0);\n    const dueDateTime = Date.now() + DAYS_UNTIL_DUE * HOURS_PER_DAY * MINUTES_PER_HOUR * SECONDS_PER_MINUTE * MS_PER_SECOND;\n    const newInvoice = {\n      id: newInvoiceId,\n      clientId: first.clientId,\n      client: first.clientName ?? '',\n      workplaceId: typeof first.workplaceId === 'number' ? first.workplaceId : undefined,\n      project: first.projectName ?? '',\n      workplaceAddress: workplace?.address ?? '',\n      amount: totalAmount,\n      status: '' as const,\n      date: new Date().toISOString().split('T')[0],\n      dueDate: new Date(dueDateTime).toISOString().split('T')[0],\n      workItems: items\n    };\n    setInvoices(prev => [...prev, newInvoice]);\n    selection.clear();\n    alert(` ${newInvoiceId} ! (${selectedItems.length} )`);\n  };\n  const handleExport = () => exportToExcel.workItems(filteredWorkItems);\n  const handleImport = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    const file = files !== null && files.length > 0 ? files[0] : null;\n    if (file === null) return;\n\n    //    ()\n    const previousWorkItems = workItems;\n    try {\n      const imported = await importFromExcel.workItems(file);\n      const currentMax = workItems.length > 0 ? Math.max(...workItems.map(i => Number(i.id) ?? 0)) : 0;\n      const importedArray = imported ?? [];\n\n      //   ID   \n      const notFoundClients: string[] = [];\n      const notFoundWorkplaces: string[] = [];\n      const missingWorkplaces: string[] = [];\n      const remapped = importedArray.map((it: Partial<WorkItem>, idx: number) => {\n        //   ID \n        let matchedClient: Client | undefined;\n        if (it?.clientName !== null && it?.clientName !== undefined && it.clientName !== '') {\n          matchedClient = clients.find(c => c.name === it.clientName);\n          if (matchedClient === null || matchedClient === undefined) {\n            notFoundClients.push(it.clientName);\n          }\n        }\n\n        //    \n        if (it?.workplaceName === null || it?.workplaceName === undefined || it.workplaceName.trim() === '') {\n          missingWorkplaces.push(`${it?.clientName ?? '( )'} - ${it?.name ?? '( )'}`);\n        }\n\n        //   ID  (  )\n        let matchedWorkplaceId: number | '' = '';\n        if (matchedClient !== null && matchedClient !== undefined && it?.workplaceName !== null && it?.workplaceName !== undefined && it.workplaceName !== '') {\n          const workplace = matchedClient.workplaces?.find(wp => wp.name === it.workplaceName);\n          if (workplace !== null && workplace !== undefined) {\n            matchedWorkplaceId = typeof workplace.id === 'number' ? workplace.id : Number(workplace.id);\n          } else {\n            //      \n            notFoundWorkplaces.push(`${it.clientName} - ${it.workplaceName}`);\n          }\n        }\n        return {\n          id: currentMax + idx + 1,\n          clientId: matchedClient !== null && matchedClient !== undefined ? typeof matchedClient.id === 'number' ? matchedClient.id : Number(matchedClient.id) : 0,\n          clientName: it?.clientName ?? '',\n          workplaceId: matchedWorkplaceId,\n          workplaceName: it?.workplaceName ?? '',\n          projectName: it?.projectName ?? '',\n          name: String(it?.name ?? ''),\n          category: it?.category ?? '',\n          unit: it?.unit ?? '',\n          quantity: typeof it?.quantity === 'number' ? it.quantity : 0,\n          defaultPrice: typeof it?.defaultPrice === 'number' ? it.defaultPrice : 0,\n          description: it?.description ?? '',\n          notes: it?.notes ?? '',\n          status: it?.status as WorkStatus ?? '',\n          date: it?.date ?? new Date().toISOString().split('T')[0],\n          laborPersons: it?.laborPersons ?? '',\n          laborUnitRate: it?.laborUnitRate ?? '',\n          laborPersonsGeneral: it?.laborPersonsGeneral ?? '',\n          laborUnitRateGeneral: it?.laborUnitRateGeneral ?? ''\n        } as WorkItem;\n      });\n\n      //   \n      const MAX_ERROR_DISPLAY_COUNT = 5;\n      const errors: string[] = [];\n      if (notFoundClients.length > 0) {\n        const uniqueNames = Array.from(new Set(notFoundClients));\n        errors.push(`   :\\n   ${uniqueNames.join(', ')}`);\n      }\n      if (missingWorkplaces.length > 0) {\n        errors.push(`    :\\n   ${missingWorkplaces.slice(0, MAX_ERROR_DISPLAY_COUNT).join('\\n   ')}${missingWorkplaces.length > MAX_ERROR_DISPLAY_COUNT ? `\\n   ...  ${missingWorkplaces.length - MAX_ERROR_DISPLAY_COUNT}` : ''}`);\n      }\n      if (notFoundWorkplaces.length > 0) {\n        const uniqueWorkplaces = Array.from(new Set(notFoundWorkplaces));\n        errors.push(`   :\\n   ${uniqueWorkplaces.slice(0, MAX_ERROR_DISPLAY_COUNT).join('\\n   ')}${uniqueWorkplaces.length > MAX_ERROR_DISPLAY_COUNT ? `\\n   ...  ${uniqueWorkplaces.length - MAX_ERROR_DISPLAY_COUNT}` : ''}`);\n      }\n      if (errors.length > 0) {\n        setWorkItems(previousWorkItems);\n        alert(`  \\n\\n${errors.join('\\n\\n')}\\n\\n :\\n1.     \\n2.   \\n3.   \"\" \"\"   `);\n        (e.target as HTMLInputElement).value = '';\n        return;\n      }\n\n      // UI   ( )\n      setWorkItems(prev => [...prev, ...remapped]);\n\n      // Supabase \n      try {\n        const {\n          supabase\n        } = await import('../services/supabase');\n        if (supabase === null || supabase === undefined) {\n          setWorkItems(previousWorkItems);\n          alert('  .');\n          return;\n        }\n        const {\n          getCurrentUserId\n        } = await import('../services/supabase');\n        const userId = await getCurrentUserId();\n\n        // Integer     \n        const toIntOrNull = (val: string | number | null | undefined): number | null => {\n          if (val === null || val === undefined || val === '') return null;\n          const num = Number(val);\n          return isNaN(num) ? null : num;\n        };\n\n        // Status  ->   \n        const toDbStatus = (status: string | undefined): string => {\n          if (status === null || status === undefined || status === '') return 'planned';\n          const statusMap: Record<string, string> = {\n            '': 'planned',\n            '': 'in_progress',\n            '': 'completed',\n            '': 'on_hold'\n          };\n          return statusMap[status] ?? 'planned';\n        };\n\n        //  INSERT    \n        const dbWorkItems = remapped.map(item => ({\n          user_id: userId,\n          client_id: toIntOrNull(item.clientId),\n          client_name: item.clientName ?? '',\n          workplace_id: toIntOrNull(item.workplaceId),\n          workplace_name: item.workplaceName ?? '',\n          project_name: item.projectName ?? '',\n          name: item.name,\n          description: item.description ?? '',\n          category: item.category ?? '',\n          quantity: toIntOrNull(item.quantity) ?? 0,\n          unit: item.unit ?? '',\n          default_price: toIntOrNull(item.defaultPrice) ?? 0,\n          status: toDbStatus(item.status),\n          start_date: item.date ?? null,\n          notes: item.notes ?? '',\n          labor_persons: toIntOrNull(item.laborPersons) ?? 0,\n          labor_unit_rate: toIntOrNull(item.laborUnitRate) ?? 0,\n          labor_persons_general: toIntOrNull(item.laborPersonsGeneral) ?? 0,\n          labor_unit_rate_general: toIntOrNull(item.laborUnitRateGeneral) ?? 0\n        }));\n        const {\n          data: insertedData,\n          error: insertError\n        } = await supabase.from('work_items').insert(dbWorkItems).select();\n        if (insertError !== null && insertError !== undefined) {\n          setWorkItems(previousWorkItems);\n          // eslint-disable-next-line no-console\n          console.error('  Supabase   :', {\n            message: insertError.message,\n            details: insertError.details,\n            hint: insertError.hint,\n            code: insertError.code,\n            : dbWorkItems.length,\n            : dbWorkItems[0]\n          });\n          alert(`Supabase    : ${insertError.message}\\n\\n(F12)    .`);\n          return;\n        }\n\n        // DB     (work_item_id )\n        if (insertedData !== null && insertedData !== undefined) {\n          const actualCreatedItems: WorkItem[] = insertedData.map((w: Record<string, unknown>) => {\n            const fromDbStatus = (dbStatus: string): WorkStatus => {\n              const statusMap: Record<string, WorkStatus> = {\n                'planned': '',\n                'in_progress': '',\n                'completed': '',\n                'on_hold': ''\n              };\n              return statusMap[dbStatus] ?? '';\n            };\n            const clientId = w.client_id as number;\n            const rawWorkplaceId = w.workplace_id as number | null | undefined;\n            const workplaceId = rawWorkplaceId !== null && rawWorkplaceId !== undefined ? rawWorkplaceId : '';\n            return {\n              id: w.work_item_id as number,\n              clientId,\n              clientName: (w.client_name ?? '') as string,\n              workplaceId,\n              workplaceName: (w.workplace_name ?? '') as string,\n              projectName: (w.project_name ?? '') as string,\n              name: w.name as string,\n              category: (w.category ?? '') as string,\n              defaultPrice: (w.default_price ?? 0) as number,\n              quantity: (w.quantity ?? 0) as number,\n              unit: (w.unit ?? '') as string,\n              description: (w.description ?? '') as string,\n              status: fromDbStatus(w.status as string),\n              date: (w.start_date ?? '') as string,\n              notes: (w.notes ?? '') as string,\n              laborPersons: (w.labor_persons ?? 0) as number,\n              laborUnitRate: (w.labor_unit_rate ?? 0) as number,\n              laborPersonsGeneral: (w.labor_persons_general ?? 0) as number,\n              laborUnitRateGeneral: (w.labor_unit_rate_general ?? 0) as number\n            };\n          });\n\n          //  DB   \n          setWorkItems(prev => {\n            const withoutOptimistic = prev.filter(item => !remapped.some(created => created.id === item.id));\n            return [...withoutOptimistic, ...actualCreatedItems];\n          });\n        }\n      } catch (err) {\n        setWorkItems(previousWorkItems);\n        alert('       .');\n        return;\n      }\n      alert(`${imported.length}   .`);\n    } catch (err) {\n      alert('Excel     .');\n    }\n    (e.target as HTMLInputElement).value = '';\n  };\n  return /*@million jsx-skip*/<WorkItems_1 v0={() => createTemplate.workItems()} v1={() => fileInputRef.current?.click()} v2={handleExport} v3={() => setShowBulkModal(true)} v4={() => setShowItemModal(true)} v5={<input type=\"file\" ref={fileInputRef} onChange={handleImport} accept=\".xlsx,.xls\" style={{\n    display: 'none'\n  }} />} v6={<StatsCards filteredWorkItems={filteredWorkItems} format={format} getLaborCost={getLaborCost} />} v7={<FilterBar clients={clients} selectedClient={selectedClient} selectedProject={selectedProject} filteredCount={filteredWorkItems.length} totalCount={workItems.length} selectionCount={selection.selected.length} bulkStatus={bulkStatus} statuses={STATUSES} getClientProjects={getClientProjects} onChangeClient={val => {\n    setSelectedClient(val);\n    setSelectedProject('');\n  }} onChangeProject={val => setSelectedProject(val)} onResetFilters={() => {\n    setSelectedClient('');\n    setSelectedProject('');\n  }} onBulkStatusChange={val => setBulkStatus(val)} onApplyBulkStatus={handleApplyBulkStatus} onCreateBulkInvoice={handleCreateBulkInvoice} onBulkDelete={handleBulkDelete} />} v8={<WorkItemsTable items={filteredWorkItems} selection={selection} format={format} getLaborCost={getLaborCost} getCategoryColor={getCategoryColor} onEdit={handleEdit} onDelete={handleDelete} onCreateInvoice={handleCreateInvoice} />} v9={<ItemFormModal open={showItemModal} editingItem={editingItem} newItem={newItem} clients={clients} units={units} categories={categories} statuses={STATUSES} onChangeField={onChangeField} onCancel={() => {\n    setShowItemModal(false);\n    setEditingItem(null);\n    setNewItem(defaultNewItem);\n  }} onSubmit={handleSubmit} />} v10={<BulkFormModal open={showBulkModal} clients={clients} categories={categories} units={units} bulkItems={bulkItems} bulkBaseInfo={bulkBaseInfo} showBulkCustomProject={showBulkCustomProject} statuses={STATUSES} onBaseInfoChangeField={onBaseInfoChangeField} onItemChange={onBulkItemChange} onAddItem={onBulkAddItem} onRemoveItem={onBulkRemoveItem} onCancel={() => {\n    setShowBulkModal(false);\n  }} onSubmit={onBulkSubmit} />} v11={<ConfirmDialog open={showConfirmBulkDelete} title=\" \" message={` ${selection.selected.length}   ?     .`} confirmText=\"\" cancelText=\"\" onConfirm={confirmBulkDelete} onCancel={() => setShowConfirmBulkDelete(false)} />} v12={<ConfirmDialog open={pendingDeleteId != null} title=\"  \" message={`   ?     .`} confirmText=\"\" cancelText=\"\" onConfirm={confirmDeleteSingle} onCancel={() => setPendingDeleteId(null)} />} />;\n};\nimport { block as _block } from \"million/react\";\nimport { useMemo, useRef, useState } from 'react';\nimport { useApp } from '../contexts/AppContext';\nimport { useNumberFormat } from '../hooks/useNumberFormat';\nimport { useSelection } from '../hooks/useSelection';\nimport { useClientWorkplaces } from '../hooks/useClientWorkplaces';\nimport StatsCards from './work-items/StatsCards';\nimport FilterBar from './work-items/FilterBar';\nimport WorkItemsTable from './work-items/WorkItemsTable';\nimport ItemFormModal from './work-items/ItemFormModal';\nimport BulkFormModal from './work-items/BulkFormModal';\nimport ConfirmDialog from './ConfirmDialog';\nimport { exportToExcel, importFromExcel, createTemplate } from '../utils/excelUtils';\nimport type { WorkItem, WorkStatus, Client } from '../types/domain';\nimport type { Id } from '../hooks/useSelection';\ntype NewItem = WorkItem;\ntype BulkItem = Partial<WorkItem> & {\n  status?: string;\n};\nconst STATUSES: WorkStatus[] = ['', '', '', ''];\nexport default WorkItems;","import WorkItems from '../components/WorkItems';\nexport default function WorkItemsPage() {\n  return <WorkItems />;\n}","import { useEffect, useMemo, useState } from 'react';\n\nexport type Id = string | number;\n\nexport function useSelection(allIds: Id[]) {\n  const [selected, setSelected] = useState<Id[]>([]);\n\n  //  :       \n  useEffect(() => {\n    setSelected((prev) => {\n      const next = prev.filter((id) => allIds.includes(id));\n      //       / \n      if (next.length === prev.length && next.every((v, i) => v === prev[i])) {\n        return prev;\n      }\n      return next;\n    });\n  }, [allIds]);\n\n  const allSelected = useMemo(\n    () => allIds.length > 0 && selected.length === allIds.length,\n    [allIds.length, selected.length]\n  );\n\n  const toggleOne = (id: Id, checked: boolean) => {\n    setSelected((prev) =>\n      checked ? Array.from(new Set([...prev, id])) : prev.filter((x) => x !== id)\n    );\n  };\n\n  const toggleAll = (checked: boolean) => {\n    setSelected(checked ? [...allIds] : []);\n  };\n\n  const clear = () => setSelected([]);\n\n  return { selected, setSelected, allSelected, toggleOne, toggleAll, clear };\n}\n","// Simple number format/parse utilities as a React hook\n// Provides comma formatting and safe integer parsing used across forms.\n\nexport function useNumberFormat() {\n  /** Format a number-like value with thousands separators. */\n  const format = (value: number | string | null | undefined): string => {\n    if (value === null || value === undefined || value === '') return '';\n    const onlyDigits = String(value).replace(/[^\\d-]/g, '');\n    if (onlyDigits === '' || onlyDigits === '-') return '';\n    const num = Number(onlyDigits);\n    if (Number.isNaN(num)) return '';\n    return num.toLocaleString();\n  };\n\n  /** Parse a user input string into an integer (commas and non-digits ignored). */\n  const parse = (input: string): number => {\n    const onlyDigits = String(input ?? '').replace(/[^\\d-]/g, '');\n    if (onlyDigits === '' || onlyDigits === '-') return 0;\n    const n = parseInt(onlyDigits, 10);\n    return Number.isNaN(n) ? 0 : n;\n  };\n\n  return { format, parse };\n}\n"],"names":["useCalendar","options","arguments","length","undefined","value","onChange","closeOnSelect","open","setOpen","useState","month","setMonth","Date","containerRef","useRef","useEffect","parts","split","map","x","parseInt","y","m","Number","isFinite","ONE","onDoc","e","el","current","contains","target","document","addEventListener","removeEventListener","pad2","n","String","padStart","prevMonth","d","getFullYear","getMonth","nextMonth","pickDate","day","v","concat","getCalendarGrid","startDay","getDay","days","getDate","cells","i","push","rows","slice","ConfirmDialog_1","_compiledBlock","_props","_jsx","className","children","_jsxs","v0","v1","onClick","v2","v3","v4","v5","name","portals","_ref","title","message","confirmText","cancelText","onConfirm","onCancel","useClientWorkplaces","clients","useApp","getClientWorkplaces","clientId","trim","parsed","id","client","find","c","Array","isArray","workplaces","StatsCards_1","v6","v7","filteredWorkItems","format","getLaborCost","total","completed","filter","status","inProgress","totalAmount","reduce","sum","item","priceRaw","defaultPrice","qtyRaw","quantity","WrenchScrewdriverIcon","CheckCircleIcon","ExclamationTriangleIcon","CurrencyDollarIcon","isPositiveNumber","isFiniteNumber","FilterBar_1","disabled","v8","v9","v10","v11","v12","selectedClient","selectedProject","filteredCount","totalCount","selectionCount","bulkStatus","statuses","getClientProjects","onChangeClient","onChangeProject","onResetFilters","onBulkStatusChange","onApplyBulkStatus","onCreateBulkInvoice","onBulkDelete","hasClient","hasProject","hasFilter","hasSelection","project","_Fragment","s","WorkItemsTable_1","type","checked","items","selection","getCategoryColor","onEdit","onDelete","onCreateInvoice","toggleAll","selected","idx","includes","toggleOne","clientName","description","workplaceName","projectName","category","price","qty","laborCost","line","unit","date","Tooltip","label","ItemFormModal","_newItem$date","_newItem$clientId","_newItem$category","_newItem$date2","_newItem$name","_newItem$description","_newItem$quantity","_newItem$unit","_newItem$laborPersons","_newItem$notes","editingItem","newItem","units","categories","onChangeField","onSubmit","useNumberFormat","cal","calRef","required","_newItem$clientId2","_newItem$workplaceId","workplaceId","wp","address","_newItem$projectName","_newItem$projectName2","projects","proj","placeholder","cat","ref","inputMode","onFocus","style","transform","transformOrigin","row","i2","clickable","isNaN","dayColor","select","u","val","num","pRaw","qRaw","pNum","qNum","p","q","laborPersons","laborUnitRate","_newItem$laborPersons2","_newItem$laborUnitRat","persons","rate","r","notes","active","classes","_newItem$laborPersons3","_newItem$laborUnitRat2","laborRate","lp","lr","form","BulkFormModal","_bulkBaseInfo$date","_bulkBaseInfo$clientI","_bulkBaseInfo$date2","_bulkBaseInfo$bulkLab","bulkItems","bulkBaseInfo","showBulkCustomProject","onBaseInfoChangeField","onItemChange","onAddItem","onRemoveItem","workItems","cid","fromWorkItems","clientProjects","clientWorkplaces","fromClientProjects","fromWorkplaces","from","Set","getAllProjects","sort","useProjects","htmlFor","autoComplete","_bulkBaseInfo$clientI2","_bulkBaseInfo$workpla","workplace","_bulkBaseInfo$clientI3","bulkLaborPersons","bulkLaborUnitRate","index","_item$name","_item$category","_item$description","_item$quantity","_item$unit","_item$notes","role","WorkItems_1","STATUSES","setClients","setWorkItems","invoices","setInvoices","parse","setSelectedClient","setSelectedProject","setBulkStatus","showConfirmBulkDelete","setShowConfirmBulkDelete","pendingDeleteId","setPendingDeleteId","showItemModal","setShowItemModal","setEditingItem","showBulkModal","setShowBulkModal","setShowBulkCustomProject","setBulkItems","setBulkBaseInfo","toISOString","defaultNewItem","laborPersonsGeneral","laborUnitRateGeneral","setNewItem","fileInputRef","useMemo","visibleIds","useSelection","_item$laborPersons","_item$laborUnitRate","_item$laborPersonsGen","_item$laborUnitRateGe","skilledPersons","skilledRate","generalPersons","generalRate","toInvoiceItem","wi","_wi$laborPersons","_wi$laborUnitRate","_wi$laborPersonsGener","_wi$laborUnitRateGene","_wi$notes","_wi$date","_wi$category","_wi$description","_wi$laborPersons2","_wi$laborUnitRate2","_wi$laborPersonsGener2","_wi$laborUnitRateGene2","unitPrice","lpg","lrg","totalLaborCost","createTemplate","_fileInputRef$current","click","handleExport","exportToExcel","async","files","file","previousWorkItems","imported","importFromExcel","currentMax","Math","max","_Number3","notFoundClients","notFoundWorkplaces","missingWorkplaces","remapped","it","_it$clientName2","_it$workplaceName","_it$projectName","_it$name2","_it$category","_it$unit","_it$description","_it$notes","_ref2","_it$date","_it$laborPersons","_it$laborUnitRate","_it$laborPersonsGener","_it$laborUnitRateGene","matchedClient","_it$clientName","_it$name","matchedWorkplaceId","_matchedClient$workpl","MAX_ERROR_DISPLAY_COUNT","errors","uniqueNames","join","uniqueWorkplaces","alert","prev","supabase","getCurrentUserId","userId","toIntOrNull","toDbStatus","_statusMap$status7","dbWorkItems","_item$clientName","_item$workplaceName","_item$projectName3","_item$description4","_item$category4","_toIntOrNull17","_item$unit4","_toIntOrNull18","_item$date2","_item$notes3","_toIntOrNull19","_toIntOrNull20","_toIntOrNull21","_toIntOrNull22","user_id","client_id","client_name","workplace_id","workplace_name","project_name","default_price","start_date","labor_persons","labor_unit_rate","labor_persons_general","labor_unit_rate_general","data","insertedData","error","insertError","insert","console","details","hint","code","","","actualCreatedItems","w","_w$client_name","_w$workplace_name","_w$project_name","_w$category","_w$default_price","_w$quantity","_w$unit","_w$description","_w$start_date","_w$notes","_w$labor_persons","_w$labor_unit_rate","_w$labor_persons_gene","_w$labor_unit_rate_ge","rawWorkplaceId","work_item_id","dbStatus","_statusMap$dbStatus","fromDbStatus","some","created","err","accept","display","StatsCards","FilterBar","_client$projects","_client$workplaces","_item$projectName","_wp$description","desc","_objectSpread","_statusMap$status6","update","in","handleCreateBulkInvoice","_client$workplaces3","_first$clientName","_first$projectName","_workplace$address2","selectedItems","first","newInvoiceId","dueDateTime","now","DAYS_UNTIL_DUE","newInvoice","workplaceAddress","amount","dueDate","clear","handleBulkDelete","WorkItemsTable","_colors$category","_client$workplaces2","_workItem$clientName","_workItem$projectName","_workplace$address","workItem","unbilledItems","previousInvoices","tempInvoice","_workItem$projectName2","_statusMap$status","invoiceData","invoiceError","invoice_number","due_date","single","dbInvoiceItems","invoice_id","unit_price","sort_order","itemsError","inv","digits","replace","parsedValue","preventDefault","selectedClientData","selectedWorkplace","_selectedClientData$n2","_selectedWorkplace$na2","updated","_updated$projectName","_updated$description","_updated$category","_toIntOrNull7","_updated$unit","_toIntOrNull8","_updated$date","_updated$notes","_toIntOrNull9","_toIntOrNull0","_toIntOrNull1","_toIntOrNull10","_statusMap$status4","eq","_selectedClientData$n3","_selectedWorkplace$na3","previousClients","nextId","_Number2","_c$projects2","_created$projectName","_created$description","_created$category","_toIntOrNull11","_created$unit","_toIntOrNull12","_created$date","_created$notes","_toIntOrNull13","_toIntOrNull14","_toIntOrNull15","_toIntOrNull16","_statusMap$status5","clientIdValue","workplaceIdValue","next","_wp$description2","hasProjectName","hasDescription","onBulkItemChange","field","existingItem","onBulkAddItem","_","_parseInt","_parseInt2","hasClientId","hasWorkplaceId","forEach","currentMaxId","_Number","bulkLP","bulkLR","createdItems","_selectedClientData$n","_selectedWorkplace$na","_item$category2","_item$unit2","_item$description2","_item$laborPersons2","_item$laborUnitRate2","_c$projects","_statusMap$status2","_item$projectName2","_item$description3","_item$category3","_toIntOrNull","_item$unit3","_toIntOrNull2","_item$date","_item$notes2","_toIntOrNull3","_toIntOrNull4","_toIntOrNull5","_toIntOrNull6","_statusMap$status3","company_name","ConfirmDialog","count","delete","WorkItemsPage","WorkItems","allIds","setSelected","every","allSelected","onlyDigits","toLocaleString","input"],"sourceRoot":""}