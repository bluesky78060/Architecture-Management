# Claude Code ν”„λ΅μ νΈ κΈ°λ΅

## μ²΄ν¬ν¬μΈνΈ μ‹μ¤ν…

### μλ™ μ²΄ν¬ν¬μΈνΈ μƒμ„± κ·μΉ™
- **νΈλ¦¬κ±°**: "μ²΄ν¬ν¬μΈνΈ" ν”„λ΅¬ν”„νΈ μ…λ ¥ μ‹
- **λ™μ‘**: ν„μ¬ μ‹μ μ μ „μ²΄ ν”„λ΅μ νΈ λ°±μ—… μλ™ μƒμ„±
- **μ΄μ¤‘ λ°±μ—…**: κ°λ³„ μ²΄ν¬ν¬μΈνΈ + checkpoint_back ν΄λ” μλ™ μ—…λ°μ΄νΈ

### λ°±μ—… μ„μΉ λ° κµ¬μ΅°
```
/Users/leechanhee/backup_checkpoints/
β”β”€β”€ checkpoint_YYYYMMDD_HHMMSS_[μ„¤λ…]/    # κ°λ³„ μ²΄ν¬ν¬μΈνΈ
β”β”€β”€ checkpoint_back/                      # μ „μ²΄ ν”„λ΅μ νΈ μµμ‹  λ°±μ—… (μλ™ κ°±μ‹ )
β”β”€β”€ RESTORE_INSTRUCTIONS.md
β””β”€β”€ [κΈ°νƒ€ μ²΄ν¬ν¬μΈνΈ ν΄λ”λ“¤...]
```

### ν–¥μƒλ μ²΄ν¬ν¬μΈνΈ μ‹μ¤ν… (2025.09.30 μ—…λ°μ΄νΈ)
- **μ΄μ¤‘ λ°±μ—… κµ¬μ΅°**: 
  - κ°λ³„ μ²΄ν¬ν¬μΈνΈ: νΉμ • μ‹μ μ λ³€κ²½μ‚¬ν•­λ§ λ°±μ—…
  - checkpoint_back: ν•­μƒ μµμ‹  μ „μ²΄ ν”„λ΅μ νΈ μƒνƒ μ μ§€
- **μλ™ λ™κΈ°ν™”**: μ²΄ν¬ν¬μΈνΈ μƒμ„± μ‹ μμ •λ νμΌμ„ checkpoint_backμ— μλ™ λ³µμ‚¬
- **μλ™ λ¬Έμ„ν™”**: μ²΄ν¬ν¬μΈνΈ μƒμ„± μ‹ CLAUDE.md μλ™ μ—…λ°μ΄νΈ
- **νμ „ μ •μ±…**: μµμ‹  3κ° κΈ°λ΅λ§ μ μ§€, μ΄μ „ κΈ°λ΅μ€ μλ™ μ‚­μ 
- **λ΅¤λ°± νΈμμ„±**: μ „μ²΄ ν”„λ΅μ νΈ λ³µμ›μ΄λ‚ κ°λ³„ νμΌ λ³µμ› λ¨λ‘ μ§€μ›

### CLAUDE.md μλ™ κ΄€λ¦¬ κ·μΉ™
- **μ²΄ν¬ν¬μΈνΈ νΈλ¦¬κ±°**: "μ²΄ν¬ν¬μΈνΈ" λ…λ Ή μ‹ μλ™ κΈ°λ΅
- **κΈ°λ΅ ν•μ‹**: μƒ μ‘μ—…μ€ μƒμ„Έ κΈ°λ΅, μ΄μ „ μ‘μ—…μ€ μ¶•μ•½ ν•νƒ
- **λ³΄κ΄€ μ£ΌκΈ°**: μµμ‹  3κ° μ‘μ—… κΈ°λ΅λ§ μ μ§€
- **μλ™ μ •λ¦¬**: 3νμ°¨ μ΄μ „ λ‚΄μ©μ€ μλ™ μ‚­μ ν•μ—¬ νμΌ ν¬κΈ° κ΄€λ¦¬

### ν„μ¬ μƒμ„±λ μ²΄ν¬ν¬μΈνΈ
1. **checkpoint_20251006_203522_tier2_table_tests_complete** β¨ μµμ‹ 
   - μƒμ„±μΌμ‹: 2025λ…„ 10μ›” 6μΌ 20:35:22
   - μ„¤λ…: Tier 2 ν…μ΄λΈ” μ»΄ν¬λ„νΈ ν…μ¤νΈ μ™„λ£
   - λ‚΄μ©: WorkItemsTable, EstimatesTable, InvoiceDetailTable ν…μ¤νΈ 63κ° μ¶”κ°€
   - ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€: 20 test suites, 265 tests (264 passing, 99.6%)

2. **checkpoint_20251006_195009_tier1_component_tests_complete**
   - μƒμ„±μΌμ‹: 2025λ…„ 10μ›” 6μΌ 19:50:09
   - μ„¤λ…: λ¨λ“  Tier 1 μ»΄ν¬λ„νΈ ν…μ¤νΈ μ™„λ£
   - λ‚΄μ©: Clients, WorkItems ν…μ¤νΈ 42κ° μ¶”κ°€ (μ΄ 180κ° ν…μ¤νΈ ν†µκ³Ό)

3. **checkpoint_20250930_205041_stamp_optimization_complete**
   - μƒμ„±μΌμ‹: 2025λ…„ 9μ›” 30μΌ 20:50:41
   - μ„¤λ…: μ²­κµ¬μ„ λ„μ¥ μ‹μ¤ν… μµμ ν™” μ™„λ£

## λ³µμ› λ°©λ²•

### μ „μ²΄ ν”„λ΅μ νΈ λ³µμ›
```bash
cd /Users/leechanhee
rm -rf ConstructionManagement-Installer
cp -r backup_checkpoints/[μ²΄ν¬ν¬μΈνΈλ…] ConstructionManagement-Installer
```

### νΉμ • νμΌλ§ λ³µμ›
```bash
cp backup_checkpoints/[μ²΄ν¬ν¬μΈνΈλ…]/src/components/[νμΌλ…] /Users/leechanhee/ConstructionManagement-Installer/src/components/
```

## ν”„λ΅μ νΈ μ§„ν–‰ κΈ°λ΅

### 2025.10.14 - Supabase μ™„μ „ λ§μ΄κ·Έλ μ΄μ… π€
- **μ‘μ—… λ‚΄μ©**: localStorageμ—μ„ Supabase PostgreSQLλ΅ λ°μ΄ν„° μ €μ¥μ† μ™„μ „ μ „ν™
- **λ°μ΄ν„°λ² μ΄μ¤ λ§μ΄κ·Έλ μ΄μ…**:
  - β… λ¨λ“  ν…μ΄λΈ”μ— user_id μ»¬λΌ μ¶”κ°€ (UUID, auth.users μ°Έμ΅°)
  - β… user_id μΈλ±μ¤ μƒμ„± (μ„±λ¥ μµμ ν™”)
  - β… RLS (Row Level Security) μ •μ±… μ μ©
  - β… κ°λ° ν™κ²½ μ „μ²΄ μ ‘κ·Ό μ •μ±… μ„¤μ •
  - β… company_info.user_id UNIQUE constraint μ¶”κ°€

### CRUD κµ¬ν„ μ™„λ£
- **Clients (κ±΄μ¶•μ£Ό)**:
  - λ°μ΄ν„° λ΅λ”©: μ „μ²΄ ν•„λ“ λ§¤ν•‘ (business κ°μ²΄ ν¬ν•¨)
  - λ°μ΄ν„° μ €μ¥: delete-and-insert μ „λµ, SERIAL ID μλ™ μƒμ„±
- **WorkItems (μ‘μ—… ν•­λ©)**:
  - ν…μ΄λΈ” μ¤ν‚¤λ§ ν™•μ¥ (10κ° μ»¬λΌ μ¶”κ°€: client_name, workplace_name, project_name, default_price, quantity, unit, labor_* λ“±)
  - λ°μ΄ν„° λ΅λ”© λ° μ €μ¥ μ™„μ „ κµ¬ν„
- **Estimates (κ²¬μ μ„)**:
  - μ¤‘μ²© λ°μ΄ν„° μ²λ¦¬ (estimates + estimate_items JOIN)
  - κ²¬μ μ„ μ €μ¥ ν›„ λ°ν™λ IDλ΅ ν•­λ© μ €μ¥
- **Invoices (μ²­κµ¬μ„)**:
  - μ¤‘μ²© λ°μ΄ν„° μ²λ¦¬ (invoices + invoice_items JOIN)
  - μ²­κµ¬μ„ μ €μ¥ ν›„ λ°ν™λ IDλ΅ ν•­λ© μ €μ¥
- **CompanyInfo (νμ‚¬ μ •λ³΄)**:
  - Upsert μ „λµ (onConflict: user_id)
  - μ»¬λΌλ… μμ • (name β†’ company_name)

### ν•΄κ²°λ μ£Όμ” λ¬Έμ 
1. **μ»¬λΌλ… λ¶μΌμΉ**: name β†’ company_name μμ •
2. **SERIAL ID μ¶©λ**: μλ™ ID ν• λ‹Ή μ κ±°, λ°μ΄ν„°λ² μ΄μ¤ μλ™ μƒμ„± μ‚¬μ©
3. **μ¤ν‚¤λ§ λ¶μΌμΉ**: work_items ν…μ΄λΈ” 10κ° μ»¬λΌ μ¶”κ°€
4. **NULL user_id**: κΈ°μ΅΄ λ°μ΄ν„° μ‚­μ , user_id ν•„μ μ μ©
5. **μ¤‘μ²© λ°μ΄ν„° μ™Έλν‚¤**: λ¶€λ¨ μ €μ¥ ν›„ λ°ν™λ IDλ΅ μμ‹ μ €μ¥

### Git μ»¤λ°‹
- `0fb420f` - feat: complete Supabase CRUD implementation for all data types
- `f03aed8` - fix: remove manual ID assignments in Supabase CRUD operations

### ν„μ¬ μƒνƒ
- β οΈ Supabase μ¤ν‚¤λ§ μΊμ‹ μƒλ΅κ³ μΉ¨ ν•„μ”
- β οΈ company_info 406/400 μ—λ¬ λ‚¨μ•„μμ (μ¤ν‚¤λ§ μΊμ‹ λ¬Έμ )
- β… κΈ°λ³Έ CRUD λ΅μ§ μ™„μ„±
- π”„ ν…μ¤νΈ λ° κ²€μ¦ μ§„ν–‰ μ¤‘

### 2025.10.05 - μ•”νΈν™” μ‹μ¤ν… λ§μ΄κ·Έλ μ΄μ… μ™„λ£ π”’
- XOR β†’ AES-256-GCM μ „λ©΄ μ—…κ·Έλ μ΄λ“
- PBKDF2 ν‚¤ νμƒ (100,000 iterations)
- μλ™ λ§μ΄κ·Έλ μ΄μ… μ‹μ¤ν… κµ¬ν„

### 2025.09.30 - μ΄μ „ μ‘μ—… μ”μ•½
- μ²­κµ¬μ„ λ„μ¥ μ‹μ¤ν… μµμ ν™” (Safari νΈν™μ„±, localStorage μ „ν™)
- ν”„λ΅μ νΈ μ „λ©΄ μ •λ¦¬ (console.log μ κ±°, λ²λ“¤ ν¬κΈ° κ°μ†)
- Playwright MCP ν¬κ΄„μ  ν…μ¤νΈ (100% ν†µκ³Ό)
- μ•„μ΄μ½ μ‹μ¤ν… ν†µμΌ (outline-style Heroicons)

## μ£Όμμ‚¬ν•­
- λ³µμ› μ „ ν„μ¬ μ‘μ—… λ‚΄μ© λ°±μ—… ν•„μ
- λ³µμ› ν›„ `npm install` μ‹¤ν–‰ν•μ—¬ μμ΅΄μ„± ν™•μΈ
- μ²΄ν¬ν¬μΈνΈλ” μλ™ μ‚­μ  ν•„μ” (μλ™ μ‚­μ  μ•λ¨)

## μ¤λ¥ μ²λ¦¬ μ›μΉ™

### Claude Code μ‘μ—… κ·μΉ™
- **μ¤λ¥ λ°κ²¬ μ‹**: μ¦‰μ‹ μμ •ν•μ§€ λ§κ³  λ¨Όμ € μ¤λ¥ λ‚΄μ©μ„ μ‚¬μ©μμ—κ² λ³΄κ³ 
- **μμ • μΉμΈ**: μ‚¬μ©μκ°€ λ…μ‹μ μΌλ΅ μμ •μ„ μ”μ²­ν•  λ•λ§ μ½”λ“ λ³€κ²½
- **μμ¨ μμ • κΈμ§€**: μ¤λ¥λ‚ λ¬Έμ μ μ„ λ°κ²¬ν•΄λ„ μ‚¬μ©μ μΉμΈ μ—†μ΄ μ„μ μμ • λ¶κ°€
- **ν¬λ…μ„± μ›μΉ™**: λ¨λ“  μ¤λ¥μ™€ λ¬Έμ μ μ€ μ¨κΈ°μ§€ λ§κ³  λ…ν™•ν λ³΄κ³ 
